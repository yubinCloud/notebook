(window.webpackJsonp=window.webpackJsonp||[]).push([[202],{954:function(t,s,a){"use strict";a.r(s);var n=a(22),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1-æœåŠ¡ä¿æŠ¤-åˆè¯†-sentinel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-æœåŠ¡ä¿æŠ¤-åˆè¯†-sentinel"}},[t._v("#")]),t._v(" 1. æœåŠ¡ä¿æŠ¤ â€”â€” åˆè¯† Sentinel")]),t._v(" "),a("h3",{attrs:{id:"_1-1-é›ªå´©é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-é›ªå´©é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" 1.1 é›ªå´©é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("p",[t._v("å¾®æœåŠ¡ä¸­ï¼ŒæœåŠ¡é—´è°ƒç”¨å…³ç³»é”™ç»¼å¤æ‚ï¼Œä¸€ä¸ªå¾®æœåŠ¡å¾€å¾€ä¾èµ–äºå¤šä¸ªå…¶å®ƒå¾®æœåŠ¡ã€‚å¦‚æœæœåŠ¡æä¾›è€… D å‘ç”Ÿäº†æ•…éšœï¼Œå½“å‰çš„åº”ç”¨çš„éƒ¨åˆ†ä¸šåŠ¡å› ä¸ºä¾èµ–äºæœåŠ¡ Dï¼Œå› æ­¤ä¹Ÿä¼šè¢«é˜»å¡ã€‚æ­¤æ—¶ï¼Œå…¶å®ƒä¸ä¾èµ–äºæœåŠ¡ D çš„ä¸šåŠ¡ä¼¼ä¹ä¸å—å½±å“ã€‚ä½†æ˜¯ï¼Œä¾èµ–æœåŠ¡ D çš„ä¸šåŠ¡è¯·æ±‚è¢«é˜»å¡ï¼Œç”¨æˆ·ä¸ä¼šå¾—åˆ°å“åº”ï¼Œåˆ™ tomcat çš„è¿™ä¸ªçº¿ç¨‹ä¸ä¼šé‡Šæ”¾ï¼Œäºæ˜¯è¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·è¯·æ±‚åˆ°æ¥ï¼Œè¶Šæ¥è¶Šå¤šçš„çº¿ç¨‹ä¼šé˜»å¡ã€‚æœåŠ¡å™¨æ”¯æŒçš„çº¿ç¨‹å’Œå¹¶å‘æ•°æœ‰é™ï¼Œè¯·æ±‚ä¸€ç›´é˜»å¡ï¼Œä¼š"),a("strong",[t._v("å¯¼è‡´æœåŠ¡å™¨èµ„æºè€—å°½ï¼Œä»è€Œå¯¼è‡´æ‰€æœ‰å…¶å®ƒæœåŠ¡éƒ½ä¸å¯ç”¨")]),t._v("ï¼Œé‚£ä¹ˆå½“å‰æœåŠ¡ä¹Ÿå°±ä¸å¯ç”¨äº†ã€‚é‚£ä¹ˆï¼Œä¾èµ–äºå½“å‰æœåŠ¡çš„å…¶å®ƒæœåŠ¡éšç€æ—¶é—´çš„æ¨ç§»ï¼Œ"),a("strong",[t._v("æœ€ç»ˆä¹Ÿéƒ½ä¼šå˜çš„ä¸å¯ç”¨ï¼Œå½¢æˆçº§è”å¤±è´¥")]),t._v("ï¼Œ"),a("mark",[t._v("é›ªå´©")]),t._v("å°±å‘ç”Ÿäº†ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210715172710340.png",alt:"image-20210715172710340"}}),t._v(" "),a("p",[t._v("è§£å†³é›ªå´©é—®é¢˜çš„å¸¸è§æ–¹å¼æœ‰å››ç§ï¼š")]),t._v(" "),a("h4",{attrs:{id:"è§£å†³æ–¹æ¡ˆ-1-è¶…æ—¶å¤„ç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è§£å†³æ–¹æ¡ˆ-1-è¶…æ—¶å¤„ç†"}},[t._v("#")]),t._v(" ğŸ–Š è§£å†³æ–¹æ¡ˆ 1ï¼šè¶…æ—¶å¤„ç†")]),t._v(" "),a("p",[a("strong",[t._v("è¶…æ—¶å¤„ç†")]),t._v("ï¼šè®¾å®šè¶…æ—¶æ—¶é—´ï¼Œè¯·æ±‚è¶…è¿‡ä¸€å®šæ—¶é—´æ²¡æœ‰å“åº”å°±è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œä¸ä¼šæ— ä¼‘æ­¢ç­‰å¾…ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("è¿™ç§æ–¹å¼åªèƒ½ç¼“è§£é›ªå´©é—®é¢˜ï¼Œæ¯”å¦‚ç­‰å¾… 1s åè¿”å›é”™è¯¯ä¿¡æ¯ï¼Œä½†æ¯ç§’æ”¶åˆ° 2 ä¸ªè¯·æ±‚ï¼Œä¾ç„¶ä¼šäº§ç”Ÿé›ªå´©ã€‚ æ‰€ä»¥"),a("strong",[t._v("è¿™ç§æ–¹æ¡ˆä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜")]),t._v("ã€‚")])]),t._v(" "),a("h4",{attrs:{id:"è§£å†³æ–¹æ¡ˆ-2-ä»“å£æ¨¡å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è§£å†³æ–¹æ¡ˆ-2-ä»“å£æ¨¡å¼"}},[t._v("#")]),t._v(" ğŸ–Š è§£å†³æ–¹æ¡ˆ 2ï¼šä»“å£æ¨¡å¼")]),t._v(" "),a("p",[t._v("ä»“å£æ¨¡å¼æ¥æºäºèˆ¹èˆ±çš„è®¾è®¡ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210715172946352.png",alt:"image-20210715172946352"}}),t._v(" "),a("p",[t._v("èˆ¹èˆ±éƒ½ä¼šè¢«éš”æ¿åˆ†ç¦»ä¸ºå¤šä¸ªç‹¬ç«‹ç©ºé—´ï¼Œå½“èˆ¹ä½“ç ´æŸæ—¶ï¼Œåªä¼šå¯¼è‡´éƒ¨åˆ†ç©ºé—´è¿›å…¥ï¼Œ"),a("strong",[t._v("å°†æ•…éšœæ§åˆ¶åœ¨ä¸€å®šèŒƒå›´å†…")]),t._v("ï¼Œé¿å…æ•´ä¸ªèˆ¹ä½“éƒ½è¢«æ·¹æ²¡ã€‚")]),t._v(" "),a("p",[t._v("äºæ­¤ç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥"),a("strong",[t._v("é™å®šæ¯ä¸ªä¸šåŠ¡èƒ½ä½¿ç”¨çš„çº¿ç¨‹æ•°")]),t._v("ï¼Œé¿å…è€—å°½æ•´ä¸ª tomcat çš„èµ„æºï¼Œå› æ­¤ä¹Ÿå«"),a("strong",[t._v("çº¿ç¨‹éš”ç¦»")]),t._v("ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("ä½†è¿™ç§æ–¹å¼ä¹Ÿä¼šé€ æˆèµ„æºæµªè´¹ï¼Œæ¯”å¦‚æœåŠ¡ C æŒ‚äº†ï¼Œä½†ä¾ç„¶ä¼šå‡ºç°å¯¹å…¶çš„è®¿é—®ã€‚")])]),t._v(" "),a("h4",{attrs:{id:"è§£å†³æ–¹å¼-3-ç†”æ–­é™çº§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è§£å†³æ–¹å¼-3-ç†”æ–­é™çº§"}},[t._v("#")]),t._v(" ğŸ–Š è§£å†³æ–¹å¼ 3ï¼šç†”æ–­é™çº§")]),t._v(" "),a("p",[t._v("æ–­è·¯å™¨æ¨¡å¼ï¼šç”±"),a("strong",[t._v("æ–­è·¯å™¨")]),t._v("ç»Ÿè®¡ä¸šåŠ¡æ‰§è¡Œçš„å¼‚å¸¸æ¯”ä¾‹ï¼Œå¦‚æœè¶…å‡ºé˜ˆå€¼åˆ™ä¼š"),a("strong",[t._v("ç†”æ–­")]),t._v("è¯¥ä¸šåŠ¡ï¼Œæ‹¦æˆªè®¿é—®è¯¥ä¸šåŠ¡çš„ä¸€åˆ‡è¯·æ±‚ã€‚")]),t._v(" "),a("p",[t._v("æ–­è·¯å™¨ä¼šç»Ÿè®¡è®¿é—®æŸä¸ªæœåŠ¡çš„è¯·æ±‚æ•°é‡å’Œå¼‚å¸¸æ¯”ä¾‹ï¼Œå½“å‘ç°è®¿é—®æœåŠ¡ D çš„è¯·æ±‚å¼‚å¸¸æ¯”ä¾‹è¿‡é«˜æ—¶ï¼Œè®¤ä¸ºæœåŠ¡Dæœ‰å¯¼è‡´é›ªå´©çš„é£é™©ï¼Œä¼šæ‹¦æˆªè®¿é—®æœåŠ¡ D çš„ä¸€åˆ‡è¯·æ±‚ï¼Œå½¢æˆç†”æ–­ã€‚")]),t._v(" "),a("h4",{attrs:{id:"è§£å†³æ–¹å¼-4-æµé‡æ§åˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è§£å†³æ–¹å¼-4-æµé‡æ§åˆ¶"}},[t._v("#")]),t._v(" ğŸ–Š è§£å†³æ–¹å¼ 4ï¼šæµé‡æ§åˆ¶")]),t._v(" "),a("p",[a("strong",[t._v("æµé‡æ§åˆ¶")]),t._v("ï¼šé™åˆ¶ä¸šåŠ¡è®¿é—®çš„ QPSï¼Œé¿å…æœåŠ¡å› æµé‡çš„çªå¢è€Œæ•…éšœã€‚")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210715173555158.png",alt:"image-20210715173555158"}}),t._v(" "),a("blockquote",[a("p",[t._v("æµé‡æ§åˆ¶æ˜¯é¢„é˜²é›ªå´©ï¼Œå‰ä¸‰ç§æ˜¯å‡ºç°é›ªå´©æ—¶çš„è§£å†³é—®é¢˜ã€‚æ³¨æ„å¹¶ä¸æ˜¯åšå¥½æµé‡æ§åˆ¶å°±ä¼šé¿å…é›ªå´©é—®é¢˜ï¼Œç½‘ç»œé—®é¢˜ã€å‡æ­»é—®é¢˜ç­‰éƒ½ä¼šå¼•èµ·é›ªå´©ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"_1-2-æœåŠ¡ä¿æŠ¤æŠ€æœ¯å¯¹æ¯”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-æœåŠ¡ä¿æŠ¤æŠ€æœ¯å¯¹æ¯”"}},[t._v("#")]),t._v(" 1.2 æœåŠ¡ä¿æŠ¤æŠ€æœ¯å¯¹æ¯”")]),t._v(" "),a("p",[t._v("Spring Cloud æ”¯æŒå¤šç§æœåŠ¡ä¿æŠ¤æŠ€æœ¯ï¼Œæ—©æœŸè¾ƒæµè¡Œçš„æ˜¯ Hystrixï¼Œä½†ç›®å‰å›½å†…å®ç”¨æœ€å¹¿æ³›çš„è¿˜æ˜¯é˜¿é‡Œå·´å·´çš„ Sentinelã€‚å®ƒä¿©çš„å¯¹æ¯”å¯è‡ªè¡Œç™¾åº¦ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_1-3-sentinel-å®‰è£…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-sentinel-å®‰è£…"}},[t._v("#")]),t._v(" 1.3 Sentinel å®‰è£…")]),t._v(" "),a("p",[t._v("Sentinel æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„å¾®æœåŠ¡æµé‡æ§åˆ¶ç»„ä»¶ã€‚å…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä¸°å¯Œçš„åº”ç”¨åœºæ™¯ï¼šæ‰¿æ¥å¤šå¹´åŒåä¸€å¤§ä¿ƒçš„æ ¸å¿ƒåœºæ™¯")]),t._v(" "),a("li",[t._v("å®Œå¤‡çš„å®æ—¶ç›‘æ§ï¼šå¯ä»¥åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°æ¥å…¥åº”ç”¨çš„å•å°æœºå™¨ç§’çº§æ•°æ®")]),t._v(" "),a("li",[t._v("å¹¿æ³›çš„å¼€æºç”Ÿæ€ï¼šå¯ä»¥è½»æ¾ä¸ Spring Cloudã€Dubboã€gRPC ç­‰æ•´åˆ")]),t._v(" "),a("li",[t._v("å®Œå–„çš„ SPI æ‰©å±•ç‚¹ï¼šå¯ä»¥é€šè¿‡å®ç°æ‰©å±•æ¥å£æ¥å¿«é€Ÿåœ°å®šåˆ¶é€»è¾‘ï¼Œå¦‚å®šåˆ¶è§„åˆ™ç®¡ç†ã€é€‚é…åŠ¨æ€æ•°æ®æºç­‰")])]),t._v(" "),a("h4",{attrs:{id:"å®‰è£…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…"}},[t._v("#")]),t._v(" å®‰è£…ï¼š")]),t._v(" "),a("p",[t._v("å» Github ä¸‹è½½ jar åŒ…ï¼Œåœ¨ä»»æ„éä¸­æ–‡ç›®å½•æ‰§è¡Œï¼š")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("java -jar sentinel-dashboard-1.8.1.jar\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("table",[a("thead",[a("tr",[a("th",[t._v("é…ç½®é¡¹")]),t._v(" "),a("th",[t._v("é»˜è®¤å€¼")]),t._v(" "),a("th",[t._v("è¯´æ˜")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("server.port")]),t._v(" "),a("td",[t._v("8080")]),t._v(" "),a("td",[t._v("æœåŠ¡ç«¯å£")])]),t._v(" "),a("tr",[a("td",[t._v("sentinel.dashboard.auth.username")]),t._v(" "),a("td",[t._v("sentinel")]),t._v(" "),a("td",[t._v("é»˜è®¤ç”¨æˆ·å")])]),t._v(" "),a("tr",[a("td",[t._v("sentinel.dashboard.auth.password")]),t._v(" "),a("td",[t._v("sentinel")]),t._v(" "),a("td",[t._v("é»˜è®¤å¯†ç ")])])])]),t._v(" "),a("p",[t._v("ä¾‹å¦‚ï¼Œä¿®æ”¹ç«¯å£ï¼š")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("java -Dserver.port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8090")]),t._v(" -jar sentinel-dashboard-1.8.1.jar\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("ä¹‹ååœ¨æŒ‡å®šç«¯å£ä¾¿å¯è®¿é—®å…¶æ§åˆ¶å°é¡µé¢äº†ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_1-4-å¾®æœåŠ¡æ•´åˆ-sentinel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-å¾®æœåŠ¡æ•´åˆ-sentinel"}},[t._v("#")]),t._v(" 1.4 å¾®æœåŠ¡æ•´åˆ Sentinel")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬åœ¨ order-service ä¸­æ•´åˆsentinelï¼Œå¹¶è¿æ¥ sentinel çš„æ§åˆ¶å°ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š")]),t._v(" "),a("h4",{attrs:{id:"_1-å¼•å…¥ä¾èµ–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-å¼•å…¥ä¾èµ–"}},[t._v("#")]),t._v(" 1ï¼‰å¼•å…¥ä¾èµ–")]),t._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--sentinel--\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.alibaba.cloud"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-cloud-starter-alibaba-sentinel"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h4",{attrs:{id:"_2-é…ç½®æ§åˆ¶å°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-é…ç½®æ§åˆ¶å°"}},[t._v("#")]),t._v(" 2ï¼‰é…ç½®æ§åˆ¶å°")]),t._v(" "),a("p",[t._v("ä¿®æ”¹ application.yaml æ–‡ä»¶ï¼Œæ·»åŠ ä¸‹é¢å†…å®¹ï¼š")]),t._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v("Â ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8088")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("sentinel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("transport")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dashboard")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# sentinel æ§åˆ¶å°åœ°å€")]),t._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h4",{attrs:{id:"_3-è®¿é—®æœåŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-è®¿é—®æœåŠ¡"}},[t._v("#")]),t._v(" 3ï¼‰è®¿é—®æœåŠ¡")]),t._v(" "),a("p",[t._v("è®¿é—® order-service çš„ä»»æ„ç«¯ç‚¹ï¼Œæ¯”å¦‚è®¿é—® "),a("code",[t._v("http://localhost:8088/order/101")]),t._v("ï¼Œè¿™æ ·æ‰èƒ½è§¦å‘ sentinel çš„ç›‘æ§ã€‚")]),t._v(" "),a("p",[t._v("è¿™æ—¶æ‰“å¼€ Sentinel çš„æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°æ•ˆæœï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210715191241799.png",alt:"image-20210715191241799"}}),t._v(" "),a("h2",{attrs:{id:"_2-sentinel-çš„æµé‡æ§åˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-sentinel-çš„æµé‡æ§åˆ¶"}},[t._v("#")]),t._v(" 2. Sentinel çš„æµé‡æ§åˆ¶")]),t._v(" "),a("p",[t._v("é™æµæ˜¯é¿å…æœåŠ¡å› çªå‘çš„æµé‡è€Œå‘ç”Ÿæ•…éšœï¼Œæ˜¯å¯¹å¾®æœåŠ¡é›ªå´©é—®é¢˜çš„é¢„é˜²ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_2-1-ç°‡ç‚¹é“¾è·¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-ç°‡ç‚¹é“¾è·¯"}},[t._v("#")]),t._v(" 2.1 ç°‡ç‚¹é“¾è·¯")]),t._v(" "),a("p",[t._v("å½“è¯·æ±‚è¿›å…¥å¾®æœåŠ¡æ—¶ï¼Œé¦–å…ˆä¼šè®¿é—® DispatcherServletï¼Œç„¶åè¿›å…¥ Controllerã€Serviceã€Mapperï¼Œè¿™æ ·çš„ä¸€ä¸ªè°ƒç”¨é“¾å°±å«åš"),a("strong",[t._v("ç°‡ç‚¹é“¾è·¯")]),t._v("ã€‚ç°‡ç‚¹é“¾è·¯ä¸­è¢«ç›‘æ§çš„æ¯ä¸€ä¸ªæ¥å£å°±æ˜¯ä¸€ä¸ª"),a("strong",[t._v("èµ„æº")]),t._v("ã€‚é»˜è®¤æƒ…å†µä¸‹ sentinel ä¼šç›‘æ§ Spring MVC çš„æ¯ä¸€ä¸ªç«¯ç‚¹ï¼ˆEndpointï¼‰ï¼Œå› æ­¤ Spring MVC çš„æ¯ä¸€ä¸ªç«¯ç‚¹å°±æ˜¯è°ƒç”¨é“¾è·¯ä¸­çš„ä¸€ä¸ªèµ„æºã€‚")]),t._v(" "),a("p",[t._v("ä¾‹å¦‚æˆ‘ä»¬åˆšåˆšè®¿é—®çš„ order-service ä¸­çš„ OrderController ä¸­çš„ç«¯ç‚¹ï¼š"),a("code",[t._v("/order/{orderId}")]),t._v("ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210715191757319.png",alt:"image-20210715191757319"}}),t._v(" "),a("p",[t._v("æµæ§ã€ç†”æ–­ç­‰éƒ½æ˜¯"),a("strong",[t._v("é’ˆå¯¹")]),t._v("ç°‡ç‚¹é“¾è·¯ä¸­çš„"),a("strong",[t._v("èµ„æºæ¥è®¾ç½®")]),t._v("çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç‚¹å‡»å¯¹åº”èµ„æºåé¢çš„æŒ‰é’®æ¥è®¾ç½®è§„åˆ™ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æµæ§ï¼šæµé‡æ§åˆ¶")]),t._v(" "),a("li",[t._v("é™çº§ï¼šé™çº§ç†”æ–­")]),t._v(" "),a("li",[t._v("çƒ­ç‚¹ï¼šçƒ­ç‚¹å‚æ•°é™æµï¼Œæ˜¯é™æµçš„ä¸€ç§")]),t._v(" "),a("li",[t._v("æˆæƒï¼šè¯·æ±‚çš„æƒé™æ§åˆ¶")])]),t._v(" "),a("h3",{attrs:{id:"_2-2-å¿«é€Ÿå…¥é—¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-å¿«é€Ÿå…¥é—¨"}},[t._v("#")]),t._v(" 2.2 å¿«é€Ÿå…¥é—¨")]),t._v(" "),a("p",[t._v("åœ¨ Sentinel æ§åˆ¶å°ä¸­ï¼Œç‚¹å‡»èµ„æº "),a("code",[t._v("/order/{orderId}")]),t._v(" åé¢çš„æµæ§æŒ‰é’®ï¼Œå°±å¯ä»¥å¼¹å‡ºè¡¨å•ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210715191757319.png",alt:"image-20210715191757319"}}),t._v(" "),a("p",[t._v("è¡¨å•ä¸­å¯ä»¥å¡«å†™é™æµè§„åˆ™ï¼Œå¦‚ä¸‹ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210715192010657.png",alt:"image-20210715192010657"}}),t._v(" "),a("ul",[a("li",[t._v("å…¶å«ä¹‰æ˜¯é™åˆ¶ "),a("code",[t._v("/order/{orderId}")]),t._v(" è¿™ä¸ªèµ„æºçš„å•æœº QPS ä¸º 1ï¼Œå³æ¯ç§’åªå…è®¸1æ¬¡è¯·æ±‚ï¼Œè¶…å‡ºçš„è¯·æ±‚ä¼šè¢«æ‹¦æˆªå¹¶æŠ¥é”™ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"_2-3-æµæ§æ¨¡å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-æµæ§æ¨¡å¼"}},[t._v("#")]),t._v(" 2.3 æµæ§æ¨¡å¼")]),t._v(" "),a("p",[t._v("åœ¨æ·»åŠ é™æµè§„åˆ™æ—¶ï¼Œç‚¹å‡»é«˜çº§é€‰é¡¹ï¼Œå¯ä»¥é€‰æ‹©ä¸‰ç§"),a("strong",[t._v("æµæ§æ¨¡å¼")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç›´æ¥ï¼ˆé»˜è®¤ï¼‰ï¼šç»Ÿè®¡å½“å‰èµ„æºçš„è¯·æ±‚ï¼Œè§¦å‘é˜ˆå€¼æ—¶å¯¹å½“å‰èµ„æºç›´æ¥é™æµï¼Œä¹Ÿæ˜¯é»˜è®¤çš„æ¨¡å¼")]),t._v(" "),a("li",[t._v("å…³è”ï¼šç»Ÿè®¡ä¸å½“å‰èµ„æºç›¸å…³çš„å¦ä¸€ä¸ªèµ„æºï¼Œè§¦å‘é˜ˆå€¼æ—¶ï¼Œå¯¹å½“å‰èµ„æºé™æµ")]),t._v(" "),a("li",[t._v("é“¾è·¯ï¼šç»Ÿè®¡ä»æŒ‡å®šé“¾è·¯è®¿é—®åˆ°æœ¬èµ„æºçš„è¯·æ±‚ï¼Œè§¦å‘é˜ˆå€¼æ—¶ï¼Œå¯¹æŒ‡å®šé“¾è·¯é™æµ")])]),t._v(" "),a("h4",{attrs:{id:"_2-3-1-å…³è”æ¨¡å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1-å…³è”æ¨¡å¼"}},[t._v("#")]),t._v(" 2.3.1 å…³è”æ¨¡å¼")]),t._v(" "),a("p",[a("strong",[t._v("å…³è”æ¨¡å¼")]),t._v("ï¼šç»Ÿè®¡ä¸å½“å‰èµ„æºç›¸å…³çš„å¦ä¸€ä¸ªèµ„æºï¼Œè§¦å‘é˜ˆå€¼æ—¶ï¼Œå¯¹å½“å‰èµ„æºé™æµ")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210715202540786.png",alt:"image-20210715202540786"}}),t._v(" "),a("ul",[a("li",[t._v("å½“ /write èµ„æºè®¿é—®é‡è§¦å‘é˜ˆå€¼æ—¶ï¼Œå°±ä¼šå¯¹ /read èµ„æºé™æµï¼Œé¿å…å½±å“ /write èµ„æºã€‚")])]),t._v(" "),a("p",[a("strong",[t._v("ä½¿ç”¨åœºæ™¯")]),t._v("ï¼šæ¯”å¦‚ç”¨æˆ·æ”¯ä»˜æ—¶éœ€è¦ä¿®æ”¹è®¢å•çŠ¶æ€ï¼ŒåŒæ—¶ç”¨æˆ·è¦æŸ¥è¯¢è®¢å•ã€‚æŸ¥è¯¢å’Œä¿®æ”¹æ“ä½œä¼šäº‰æŠ¢æ•°æ®åº“é”ï¼Œäº§ç”Ÿç«äº‰ã€‚ä¸šåŠ¡éœ€æ±‚æ˜¯ä¼˜å…ˆæ”¯ä»˜å’Œæ›´æ–°è®¢å•çš„ä¸šåŠ¡ï¼Œå› æ­¤å½“ä¿®æ”¹è®¢å•ä¸šåŠ¡è§¦å‘é˜ˆå€¼æ—¶ï¼Œéœ€è¦å¯¹æŸ¥è¯¢è®¢å•ä¸šåŠ¡é™æµã€‚")]),t._v(" "),a("p",[a("strong",[t._v("éœ€æ±‚è¯´æ˜")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("åœ¨ OrderController æ–°å»ºä¸¤ä¸ªç«¯ç‚¹ï¼š/order/query å’Œ /order/updateï¼Œæ— éœ€å®ç°ä¸šåŠ¡")])]),t._v(" "),a("li",[a("p",[t._v("é…ç½®æµæ§è§„åˆ™ï¼Œå½“ /order/update èµ„æºè¢«è®¿é—®çš„ QPS è¶…è¿‡ 5 æ—¶ï¼Œå¯¹ /order/query è¯·æ±‚é™æµ")])])]),t._v(" "),a("h5",{attrs:{id:"_1-å®šä¹‰ä¸¤ä¸ªç«¯ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-å®šä¹‰ä¸¤ä¸ªç«¯ç‚¹"}},[t._v("#")]),t._v(" 1ï¼‰å®šä¹‰ä¸¤ä¸ªç«¯ç‚¹")]),t._v(" "),a("p",[t._v("ä¸¤ä¸ªç«¯ç‚¹æ¨¡æ‹Ÿè®¢å•çš„æŸ¥è¯¢å’Œæ›´æ–°ä¸šåŠ¡ï¼š")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/query"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æŸ¥è¯¢è®¢å•æˆåŠŸ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/update"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ›´æ–°è®¢å•æˆåŠŸ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[t._v("é‡å¯æœåŠ¡åï¼Œå¯ä»¥åœ¨ Sentinel æ§åˆ¶å°çš„ç°‡ç‚¹é“¾è·¯ä¸­é…ç½®è§„åˆ™ã€‚")]),t._v(" "),a("h5",{attrs:{id:"_2-é…ç½®æµæ§è§„åˆ™"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-é…ç½®æµæ§è§„åˆ™"}},[t._v("#")]),t._v(" 2ï¼‰é…ç½®æµæ§è§„åˆ™")]),t._v(" "),a("p",[a("u",[t._v("å¯¹å“ªä¸ªç«¯ç‚¹é™æµï¼Œå°±ç‚¹å‡»å“ªä¸ªç«¯ç‚¹åé¢çš„æŒ‰é’®")]),t._v("ã€‚æˆ‘ä»¬æ˜¯å¯¹è®¢å•æŸ¥è¯¢ /order/query é™æµï¼Œå› æ­¤ç‚¹å‡»å®ƒåé¢çš„æŒ‰é’®ï¼Œå¹¶åœ¨è¡¨å•ä¸­å¡«å†™æµæ§è§„åˆ™ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716102103814.png",alt:"image-20210716102103814"}}),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("å°ç»“")]),t._v(" "),a("p",[t._v("æ»¡è¶³ä¸‹é¢çš„æ¡ä»¶å¯ä»¥ä½¿ç”¨å…³è”æ¨¡å¼ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä¸¤ä¸ªæœ‰ç«äº‰å…³ç³»çš„èµ„æº")]),t._v(" "),a("li",[t._v("ä¸€ä¸ªä¼˜å…ˆçº§è¾ƒé«˜ï¼Œå¦ä¸€ä¸ªä¼˜å…ˆçº§è¾ƒä½")])])]),t._v(" "),a("h4",{attrs:{id:"_2-3-2-é“¾è·¯æ¨¡å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-2-é“¾è·¯æ¨¡å¼"}},[t._v("#")]),t._v(" 2.3.2 é“¾è·¯æ¨¡å¼")]),t._v(" "),a("p",[a("strong",[t._v("é“¾è·¯æ¨¡å¼")]),t._v("ï¼šåªé’ˆå¯¹ä»æŒ‡å®šé“¾è·¯è®¿é—®åˆ°æœ¬èµ„æºçš„è¯·æ±‚åšç»Ÿè®¡ï¼Œåˆ¤æ–­æ˜¯å¦è¶…è¿‡é˜ˆå€¼ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("é…ç½®ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("p",[t._v("ä¾‹å¦‚æœ‰ä¸¤æ¡è¯·æ±‚é“¾è·¯ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("/test1 --\x3e /common")])]),t._v(" "),a("li",[a("p",[t._v("/test2 --\x3e /common")])])]),t._v(" "),a("p",[t._v("å¦‚æœåªå¸Œæœ›ç»Ÿè®¡ä» /test2 è¿›å…¥åˆ°/commonçš„è¯·æ±‚ï¼Œåˆ™å¯ä»¥è¿™æ ·é…ç½®ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716103536346.png",alt:"image-20210716103536346"}}),t._v(" "),a("p",[a("strong",[t._v("å®æˆ˜æ¡ˆä¾‹")]),t._v("ï¼šæœ‰æŸ¥è¯¢è®¢å•å’Œåˆ›å»ºè®¢å•ä¸šåŠ¡ï¼Œä¸¤è€…éƒ½éœ€è¦æŸ¥è¯¢å•†å“ã€‚é’ˆå¯¹ä»æŸ¥è¯¢è®¢å•è¿›å…¥åˆ°æŸ¥è¯¢å•†å“çš„è¯·æ±‚ç»Ÿè®¡ï¼Œå¹¶è®¾ç½®é™æµã€‚")]),t._v(" "),a("h5",{attrs:{id:"_1-æ·»åŠ æŸ¥è¯¢å•†å“æ–¹æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ·»åŠ æŸ¥è¯¢å•†å“æ–¹æ³•"}},[t._v("#")]),t._v(" 1ï¼‰æ·»åŠ æŸ¥è¯¢å•†å“æ–¹æ³•")]),t._v(" "),a("p",[t._v("åœ¨ order-service æœåŠ¡ä¸­ï¼Œç»™ OrderService ç±»æ·»åŠ ä¸€ä¸ª queryGoods æ–¹æ³•ï¼š")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryGoods")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æŸ¥è¯¢å•†å“"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h5",{attrs:{id:"_2-æŸ¥è¯¢è®¢å•æ—¶-æŸ¥è¯¢å•†å“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-æŸ¥è¯¢è®¢å•æ—¶-æŸ¥è¯¢å•†å“"}},[t._v("#")]),t._v(" 2ï¼‰æŸ¥è¯¢è®¢å•æ—¶ï¼ŒæŸ¥è¯¢å•†å“")]),t._v(" "),a("p",[t._v("åœ¨ order-service çš„ OrderController ä¸­ï¼Œä¿®æ”¹ /order/query ç«¯ç‚¹çš„ä¸šåŠ¡é€»è¾‘ï¼š")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/query"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŸ¥è¯¢å•†å“")]),t._v("\n    orderService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryGoods")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŸ¥è¯¢è®¢å•")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æŸ¥è¯¢è®¢å•"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æŸ¥è¯¢è®¢å•æˆåŠŸ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("h5",{attrs:{id:"_3-æ–°å¢è®¢å•-æŸ¥è¯¢å•†å“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ–°å¢è®¢å•-æŸ¥è¯¢å•†å“"}},[t._v("#")]),t._v(" 3ï¼‰æ–°å¢è®¢å•ï¼ŒæŸ¥è¯¢å•†å“")]),t._v(" "),a("p",[t._v("åœ¨ order-service çš„ OrderController ä¸­ï¼Œä¿®æ”¹ /order/save ç«¯ç‚¹ï¼Œæ¨¡æ‹Ÿæ–°å¢è®¢å•ï¼š")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/save"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("saveOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŸ¥è¯¢å•†å“")]),t._v("\n    orderService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryGoods")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŸ¥è¯¢è®¢å•")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ–°å¢è®¢å•"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ–°å¢è®¢å•æˆåŠŸ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("h5",{attrs:{id:"_4-ç»™æŸ¥è¯¢å•†å“æ·»åŠ èµ„æºæ ‡è®°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-ç»™æŸ¥è¯¢å•†å“æ·»åŠ èµ„æºæ ‡è®°"}},[t._v("#")]),t._v(" 4ï¼‰ç»™æŸ¥è¯¢å•†å“æ·»åŠ èµ„æºæ ‡è®°")]),t._v(" "),a("p",[t._v("é»˜è®¤æƒ…å†µä¸‹ï¼ŒOrderService ä¸­çš„æ–¹æ³•æ˜¯ä¸è¢« Sentinel ç›‘æ§çš„ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±é€šè¿‡æ³¨è§£æ¥æ ‡è®°è¦ç›‘æ§çš„æ–¹æ³•ã€‚")]),t._v(" "),a("p",[t._v("ç»™ OrderService çš„ queryGoods æ–¹æ³•æ·»åŠ  "),a("strong",[t._v("@SentinelResource")]),t._v(" æ³¨è§£ï¼š")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("div",{staticClass:"highlighted"},[t._v("Â ")]),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SentinelResource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"goods"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryGoods")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æŸ¥è¯¢å•†å“"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("é“¾è·¯æ¨¡å¼ä¸­ï¼Œæ˜¯å¯¹ä¸åŒæ¥æºçš„ä¸¤ä¸ªé“¾è·¯åšç›‘æ§ã€‚ä½†æ˜¯ sentinel é»˜è®¤ä¼šç»™è¿›å…¥ Spring MVC çš„æ‰€æœ‰è¯·æ±‚è®¾ç½®åŒä¸€ä¸ª root èµ„æºï¼Œä¼šå¯¼è‡´é“¾è·¯æ¨¡å¼å¤±æ•ˆã€‚æˆ‘ä»¬éœ€è¦å…³é—­è¿™ç§å¯¹ Spring MVC çš„èµ„æºèšåˆï¼Œä¿®æ”¹ order-service æœåŠ¡çš„ application.yml æ–‡ä»¶ï¼š")]),t._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("sentinel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("web-context-unify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å…³é—­contextæ•´åˆ")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("é‡å¯æœåŠ¡ï¼Œè®¿é—® /order/query å’Œ /order/saveï¼Œå¯ä»¥æŸ¥çœ‹åˆ° sentinel çš„ç°‡ç‚¹é“¾è·¯è§„åˆ™ä¸­ï¼Œå‡ºç°äº†æ–°çš„èµ„æºï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716105227163.png",alt:"image-20210716105227163"}}),t._v(" "),a("h5",{attrs:{id:"_5-æ·»åŠ æµæ§è§„åˆ™"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-æ·»åŠ æµæ§è§„åˆ™"}},[t._v("#")]),t._v(" 5ï¼‰æ·»åŠ æµæ§è§„åˆ™")]),t._v(" "),a("p",[t._v("ç‚¹å‡» goods èµ„æºåé¢çš„æµæ§æŒ‰é’®ï¼Œåœ¨å¼¹å‡ºçš„è¡¨å•ä¸­å¡«å†™ä¸‹é¢ä¿¡æ¯ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716105408723.png",alt:"image-20210716105408723"}}),t._v(" "),a("ul",[a("li",[t._v("åªç»Ÿè®¡ä» /order/query è¿›å…¥ /goods çš„èµ„æºï¼ŒQPSé˜ˆå€¼ä¸º 2ï¼Œè¶…å‡ºåˆ™è¢«é™æµã€‚")])]),t._v(" "),a("h3",{attrs:{id:"_2-4-æµæ§æ•ˆæœ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-æµæ§æ•ˆæœ"}},[t._v("#")]),t._v(" 2.4 æµæ§æ•ˆæœ")]),t._v(" "),a("p",[t._v("åœ¨æµæ§çš„é«˜çº§é€‰é¡¹ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªæµæ§æ•ˆæœé€‰é¡¹ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716110225104.png",alt:"image-20210716110225104"}}),t._v(" "),a("p",[a("strong",[t._v("æµæ§æ•ˆæœ")]),t._v("æ˜¯æŒ‡è¯·æ±‚è¾¾åˆ°æµæ§é˜ˆå€¼æ—¶åº”è¯¥é‡‡å–çš„æªæ–½ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("å¿«é€Ÿå¤±è´¥ï¼šè¾¾åˆ°é˜ˆå€¼åï¼Œæ–°çš„è¯·æ±‚ä¼šè¢«ç«‹å³æ‹’ç»å¹¶æŠ›å‡º FlowException å¼‚å¸¸ã€‚ã€é»˜è®¤ã€‘")])]),t._v(" "),a("li",[a("p",[t._v("warm upï¼šé¢„çƒ­æ¨¡å¼ï¼Œå¯¹è¶…å‡ºé˜ˆå€¼çš„è¯·æ±‚åŒæ ·æ˜¯æ‹’ç»å¹¶æŠ›å‡ºå¼‚å¸¸ã€‚ä½†è¿™ç§æ¨¡å¼é˜ˆå€¼ä¼šåŠ¨æ€å˜åŒ–ï¼Œä»ä¸€ä¸ªè¾ƒå°å€¼é€æ¸å¢åŠ åˆ°æœ€å¤§é˜ˆå€¼ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("æ’é˜Ÿç­‰å¾…ï¼šè®©æ‰€æœ‰çš„è¯·æ±‚æŒ‰ç…§å…ˆåæ¬¡åºæ’é˜Ÿæ‰§è¡Œï¼Œä¸¤ä¸ªè¯·æ±‚çš„é—´éš”ä¸èƒ½å°äºæŒ‡å®šæ—¶é•¿ã€‚")])])]),t._v(" "),a("h4",{attrs:{id:"_2-4-1-æµæ§æ•ˆæœ-warm-up"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-1-æµæ§æ•ˆæœ-warm-up"}},[t._v("#")]),t._v(" 2.4.1 æµæ§æ•ˆæœ - warm up")]),t._v(" "),a("blockquote",[a("p",[t._v("é˜ˆå€¼ä¸€èˆ¬æ˜¯ä¸€ä¸ªå¾®æœåŠ¡èƒ½æ‰¿æ‹…çš„æœ€å¤§QPSï¼Œä½†æ˜¯ä¸€ä¸ªæœåŠ¡åˆšåˆšå¯åŠ¨æ—¶ï¼Œä¸€åˆ‡èµ„æºå°šæœªåˆå§‹åŒ–ï¼ˆ"),a("strong",[t._v("å†·å¯åŠ¨")]),t._v("ï¼‰ï¼Œå¦‚æœç›´æ¥å°† QPS è·‘åˆ°æœ€å¤§å€¼ï¼Œå¯èƒ½å¯¼è‡´æœåŠ¡ç¬é—´å®•æœºã€‚")])]),t._v(" "),a("p",[t._v("warm up ä¹Ÿå«"),a("strong",[t._v("é¢„çƒ­æ¨¡å¼")]),t._v("ï¼Œæ˜¯åº”å¯¹æœåŠ¡å†·å¯åŠ¨çš„ä¸€ç§æ–¹æ¡ˆã€‚è¯·æ±‚é˜ˆå€¼åˆå§‹å€¼æ˜¯ maxThreshold / coldFactorï¼ŒæŒç»­æŒ‡å®šæ—¶é•¿åï¼Œé€æ¸æé«˜åˆ° maxThreshold å€¼ã€‚è€Œ coldFactor çš„é»˜è®¤å€¼æ˜¯3.")]),t._v(" "),a("h4",{attrs:{id:"_2-4-2-æµæ§æ•ˆæœ-æ’é˜Ÿç­‰å¾…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-2-æµæ§æ•ˆæœ-æ’é˜Ÿç­‰å¾…"}},[t._v("#")]),t._v(" 2.4.2 æµæ§æ•ˆæœ - æ’é˜Ÿç­‰å¾…")]),t._v(" "),a("p",[a("strong",[t._v("æ’é˜Ÿç­‰å¾…")]),t._v("æ˜¯è®©æ‰€æœ‰è¯·æ±‚è¿›å…¥ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œç„¶åæŒ‰ç…§é˜ˆå€¼å…è®¸çš„æ—¶é—´é—´éš”ä¾æ¬¡æ‰§è¡Œã€‚åæ¥çš„è¯·æ±‚å¿…é¡»ç­‰å¾…å‰é¢æ‰§è¡Œå®Œæˆï¼Œå¦‚æœè¯·æ±‚é¢„æœŸçš„ç­‰å¾…æ—¶é—´è¶…å‡ºæœ€å¤§æ—¶é•¿ï¼Œåˆ™ä¼šè¢«æ‹’ç»ã€‚")]),t._v(" "),a("p",[t._v("ä¾‹å¦‚ï¼šQPS = 5ï¼Œæ„å‘³ç€æ¯ 200ms å¤„ç†ä¸€ä¸ªé˜Ÿåˆ—ä¸­çš„è¯·æ±‚ï¼›timeout = 2000ï¼Œæ„å‘³ç€"),a("strong",[t._v("é¢„æœŸç­‰å¾…æ—¶é•¿")]),t._v("è¶…è¿‡2000msçš„è¯·æ±‚ä¼šè¢«æ‹’ç»å¹¶æŠ›å‡ºå¼‚å¸¸ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("é‚£ä»€ä¹ˆå«åšé¢„æœŸç­‰å¾…æ—¶é•¿å‘¢ï¼Ÿ")]),t._v(" "),a("p",[t._v("æ¯”å¦‚ç°åœ¨ä¸€ä¸‹å­æ¥äº†12 ä¸ªè¯·æ±‚ï¼Œå› ä¸ºæ¯ 200ms æ‰§è¡Œä¸€ä¸ªè¯·æ±‚ï¼Œé‚£ä¹ˆï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç¬¬6ä¸ªè¯·æ±‚çš„"),a("strong",[t._v("é¢„æœŸç­‰å¾…æ—¶é•¿")]),t._v(" =  200 * ï¼ˆ6 - 1ï¼‰ = 1000ms")]),t._v(" "),a("li",[t._v("ç¬¬12ä¸ªè¯·æ±‚çš„é¢„æœŸç­‰å¾…æ—¶é•¿ = 200 * ï¼ˆ12-1ï¼‰ = 2200ms")])])]),t._v(" "),a("p",[t._v("ä½¿ç”¨è¿™ç§æ¨¡å¼ï¼ŒQPS æ›²çº¿ä¼šå˜çš„å¾ˆå¹³æ»‘ï¼Œè¿™ä¹Ÿèƒ½èµ·åˆ°æµé‡æ•´å½¢çš„ä½œç”¨ï¼Œå¯¹äºæœåŠ¡å™¨æ¥è¯´æ˜¯æ›´å‹å¥½çš„ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_2-5-çƒ­ç‚¹å‚æ•°é™æµ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-çƒ­ç‚¹å‚æ•°é™æµ"}},[t._v("#")]),t._v(" 2.5 çƒ­ç‚¹å‚æ•°é™æµ")]),t._v(" "),a("p",[t._v("ä¹‹å‰çš„é™æµæ˜¯ç»Ÿè®¡è®¿é—®æŸä¸ªèµ„æºçš„æ‰€æœ‰è¯·æ±‚ï¼Œåˆ¤æ–­æ˜¯å¦è¶…è¿‡QPSé˜ˆå€¼ã€‚è€Œçƒ­ç‚¹å‚æ•°é™æµæ˜¯"),a("strong",[t._v("åˆ†åˆ«ç»Ÿè®¡å‚æ•°å€¼ç›¸åŒçš„è¯·æ±‚")]),t._v("ï¼Œåˆ¤æ–­æ˜¯å¦è¶…è¿‡QPSé˜ˆå€¼ã€‚"),a("strong",[t._v("å®ƒæ˜¯ä¸€ç§æ›´ç»†ç²’åº¦çš„é™æµ")]),t._v("ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_2-5-1-å…¨å±€å‚æ•°é™æµ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-1-å…¨å±€å‚æ•°é™æµ"}},[t._v("#")]),t._v(" 2.5.1 å…¨å±€å‚æ•°é™æµ")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716115131463.png",alt:"image-20210716115131463"}}),t._v(" "),a("ul",[a("li",[t._v("å½“ id=1 çš„è¯·æ±‚è§¦å‘é˜ˆå€¼è¢«é™æµæ—¶ï¼Œid å€¼ä¸ä¸º1çš„è¯·æ±‚ä¸å—å½±å“ã€‚")])]),t._v(" "),a("blockquote",[a("p",[t._v("é…ç½®ç¤ºä¾‹ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716115232426.png",alt:"image-20210716115232426"}}),t._v(" "),a("ul",[a("li",[t._v("å¯¹ hot è¿™ä¸ªèµ„æºçš„ 0 å·å‚æ•°ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ï¼‰åšç»Ÿè®¡ï¼Œæ¯ 1 ç§’"),a("strong",[t._v("ç›¸åŒå‚æ•°å€¼")]),t._v("çš„è¯·æ±‚æ•°ä¸èƒ½è¶…è¿‡ 5")])])]),t._v(" "),a("h4",{attrs:{id:"_2-5-2-çƒ­ç‚¹å‚æ•°é™æµ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-2-çƒ­ç‚¹å‚æ•°é™æµ"}},[t._v("#")]),t._v(" 2.5.2 çƒ­ç‚¹å‚æ•°é™æµ")]),t._v(" "),a("p",[t._v("åˆšæ‰çš„é…ç½®ä¸­ï¼Œå¯¹æŸ¥è¯¢å•†å“è¿™ä¸ªæ¥å£çš„æ‰€æœ‰å•†å“ä¸€è§†åŒä»ï¼ŒQPSéƒ½é™å®šä¸º5ã€‚è€Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œ"),a("strong",[t._v("å¯èƒ½éƒ¨åˆ†å•†å“æ˜¯çƒ­ç‚¹å•†å“")]),t._v("ï¼Œä¾‹å¦‚ç§’æ€å•†å“ï¼Œæˆ‘ä»¬å¸Œæœ›è¿™éƒ¨åˆ†å•†å“çš„ QPS é™åˆ¶ä¸å…¶å®ƒå•†å“ä¸ä¸€æ ·ï¼Œé«˜ä¸€äº›ã€‚é‚£å°±éœ€è¦é…ç½®çƒ­ç‚¹å‚æ•°é™æµçš„é«˜çº§é€‰é¡¹äº†ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716115717523.png",alt:"image-20210716115717523"}}),t._v(" "),a("ul",[a("li",[t._v("ç»“åˆä¸Šä¸€ä¸ªé…ç½®ï¼Œè¿™é‡Œçš„å«ä¹‰æ˜¯å¯¹ 0 å·çš„ long ç±»å‹å‚æ•°é™æµï¼Œæ¯ 1 ç§’ç›¸åŒå‚æ•°çš„ QPS ä¸èƒ½è¶…è¿‡ 5ï¼Œæœ‰ä¸¤ä¸ªä¾‹å¤–ï¼š\n"),a("ul",[a("li",[t._v("å¦‚æœå‚æ•°å€¼æ˜¯ 100ï¼Œåˆ™æ¯ 1 ç§’å…è®¸çš„ QPS ä¸º 10")]),t._v(" "),a("li",[t._v("å¦‚æœå‚æ•°å€¼æ˜¯ 101ï¼Œåˆ™æ¯ 1 ç§’å…è®¸çš„ QPS ä¸º 15")])])])]),t._v(" "),a("h4",{attrs:{id:"_2-5-3-æ¡ˆä¾‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-3-æ¡ˆä¾‹"}},[t._v("#")]),t._v(" 2.5.3 æ¡ˆä¾‹")]),t._v(" "),a("p",[a("strong",[t._v("éœ€æ±‚")]),t._v("ï¼šç»™ "),a("code",[t._v("/order/{orderId}")]),t._v(" è¿™ä¸ªèµ„æºæ·»åŠ çƒ­ç‚¹å‚æ•°é™æµï¼Œè§„åˆ™å¦‚ä¸‹ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("é»˜è®¤çš„çƒ­ç‚¹å‚æ•°è§„åˆ™æ˜¯æ¯1ç§’è¯·æ±‚é‡ä¸è¶…è¿‡2")]),t._v(" "),a("li",[t._v("ç»™102è¿™ä¸ªå‚æ•°è®¾ç½®ä¾‹å¤–ï¼šæ¯1ç§’è¯·æ±‚é‡ä¸è¶…è¿‡4")]),t._v(" "),a("li",[t._v("ç»™103è¿™ä¸ªå‚æ•°è®¾ç½®ä¾‹å¤–ï¼šæ¯1ç§’è¯·æ±‚é‡ä¸è¶…è¿‡10")])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("æ³¨æ„")]),t._v(" "),a("p",[t._v("çƒ­ç‚¹å‚æ•°é™æµå¯¹é»˜è®¤çš„ Spring MVC èµ„æºæ— æ•ˆï¼Œéœ€è¦åˆ©ç”¨ "),a("strong",[t._v("@SentinelResource")]),t._v(" æ³¨è§£æ ‡è®°èµ„æº")])]),t._v(" "),a("h5",{attrs:{id:"_1-æ ‡è®°èµ„æº"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ ‡è®°èµ„æº"}},[t._v("#")]),t._v(" 1ï¼‰æ ‡è®°èµ„æº")]),t._v(" "),a("p",[t._v("ç»™ order-service ä¸­çš„ OrderController ä¸­çš„ "),a("code",[t._v("/order/{orderId}")]),t._v(" èµ„æºæ·»åŠ æ³¨è§£ï¼š")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SentinelResource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hot"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{orderId}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryOrderByUserId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderId"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" orderId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ ¹æ®idæŸ¥è¯¢è®¢å•å¹¶è¿”å›")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" orderService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryOrderById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("orderId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h5",{attrs:{id:"_2-çƒ­ç‚¹å‚æ•°é™æµè§„åˆ™"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-çƒ­ç‚¹å‚æ•°é™æµè§„åˆ™"}},[t._v("#")]),t._v(" 2ï¼‰çƒ­ç‚¹å‚æ•°é™æµè§„åˆ™")]),t._v(" "),a("p",[t._v("åœ¨ Sentinel æ§åˆ¶å°å¯ä»¥çœ‹åˆ° hot èµ„æºå‡ºç°äº†ï¼Œç‚¹å‡»å·¦ä¾§èœå•ä¸­"),a("code",[t._v("çƒ­ç‚¹è§„åˆ™")]),t._v("èœå•ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716120319009.png",alt:"image-20210716120319009"}}),t._v(" "),a("p",[t._v("ç‚¹å‡»æ–°å¢ï¼Œå¡«å†™è¡¨å•ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716120536714.png",alt:"image-20210716120536714"}}),t._v(" "),a("h2",{attrs:{id:"_3-sentinel-çš„éš”ç¦»å’Œé™çº§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-sentinel-çš„éš”ç¦»å’Œé™çº§"}},[t._v("#")]),t._v(" 3. Sentinel çš„éš”ç¦»å’Œé™çº§")]),t._v(" "),a("p",[t._v("è™½ç„¶é™æµå¯ä»¥å°½é‡é¿å…å› é«˜å¹¶å‘è€Œå¼•èµ·çš„æœåŠ¡æ•…éšœï¼Œä½†æœåŠ¡è¿˜ä¼šå› ä¸ºå…¶å®ƒåŸå› è€Œæ•…éšœã€‚è€Œè¦å°†è¿™äº›æ•…éšœæ§åˆ¶åœ¨ä¸€å®šèŒƒå›´ï¼Œé¿å…é›ªå´©ï¼Œå°±è¦é "),a("strong",[t._v("çº¿ç¨‹éš”ç¦»")]),t._v("ï¼ˆèˆ±å£æ¨¡å¼ï¼‰å’Œ"),a("strong",[t._v("ç†”æ–­é™çº§")]),t._v("æ‰‹æ®µäº†ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("çº¿ç¨‹éš”ç¦»")]),t._v("ï¼šè°ƒç”¨è€…åœ¨è°ƒç”¨æœåŠ¡æä¾›è€…æ—¶ï¼Œç»™æ¯ä¸ªè°ƒç”¨çš„è¯·æ±‚åˆ†é…ç‹¬ç«‹çº¿ç¨‹æ± ï¼Œå‡ºç°æ•…éšœæ—¶ï¼Œæœ€å¤šæ¶ˆè€—è¿™ä¸ªçº¿ç¨‹æ± å†…èµ„æºï¼Œé¿å…æŠŠè°ƒç”¨è€…çš„æ‰€æœ‰èµ„æºè€—å°½ã€‚")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"upload/image-20220314150238006.png",alt:"image-20220314150238006"}}),t._v(" "),a("p",[a("strong",[t._v("ç†”æ–­é™çº§")]),t._v("ï¼šæ˜¯åœ¨è°ƒç”¨æ–¹è¿™è¾¹åŠ å…¥æ–­è·¯å™¨ï¼Œç»Ÿè®¡å¯¹æœåŠ¡æä¾›è€…çš„è°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨çš„å¤±è´¥æ¯”ä¾‹è¿‡é«˜ï¼Œåˆ™ç†”æ–­è¯¥ä¸šåŠ¡ï¼Œä¸å…è®¸è®¿é—®è¯¥æœåŠ¡çš„æä¾›è€…äº†ã€‚")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210715173428073.png",alt:"image-20210715173428073"}}),t._v(" "),a("blockquote",[a("p",[t._v("ä¸ç®¡æ˜¯çº¿ç¨‹éš”ç¦»è¿˜æ˜¯ç†”æ–­é™çº§ï¼Œéƒ½æ˜¯å¯¹"),a("strong",[t._v("å®¢æˆ·ç«¯")]),t._v("ï¼ˆè°ƒç”¨æ–¹ï¼‰çš„ä¿æŠ¤ã€‚")])]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çš„å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨éƒ½æ˜¯åŸºäº Feign æ¥å®Œæˆçš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°† Feign ä¸ Sentinel æ•´åˆï¼Œåœ¨ Feign é‡Œé¢å®ç°çº¿ç¨‹éš”ç¦»å’ŒæœåŠ¡ç†”æ–­ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_3-1-feignclient-æ•´åˆ-sentinel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-feignclient-æ•´åˆ-sentinel"}},[t._v("#")]),t._v(" 3.1 FeignClient æ•´åˆ Sentinel")]),t._v(" "),a("h4",{attrs:{id:"_1-ä¿®æ”¹é…ç½®-å¼€å¯-sentinel-åŠŸèƒ½"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä¿®æ”¹é…ç½®-å¼€å¯-sentinel-åŠŸèƒ½"}},[t._v("#")]),t._v(" 1ï¼‰ä¿®æ”¹é…ç½®ï¼Œå¼€å¯ sentinel åŠŸèƒ½")]),t._v(" "),a("p",[t._v("ä¿®æ”¹ OrderService çš„ application.yml æ–‡ä»¶ï¼Œå¼€å¯ Feign çš„ Sentinel åŠŸèƒ½ï¼š")]),t._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("feign")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("sentinel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¼€å¯feignå¯¹sentinelçš„æ”¯æŒ")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h4",{attrs:{id:"_2-ç¼–å†™å¤±è´¥é™çº§é€»è¾‘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-ç¼–å†™å¤±è´¥é™çº§é€»è¾‘"}},[t._v("#")]),t._v(" 2ï¼‰ç¼–å†™å¤±è´¥é™çº§é€»è¾‘")]),t._v(" "),a("p",[t._v("ä¸šåŠ¡å¤±è´¥åï¼Œä¸èƒ½ç›´æ¥æŠ¥é”™ï¼Œè€Œåº”è¯¥è¿”å›ç”¨æˆ·ä¸€ä¸ªå‹å¥½æç¤ºæˆ–è€…é»˜è®¤ç»“æœï¼Œè¿™ä¸ªå°±æ˜¯"),a("strong",[t._v("å¤±è´¥é™çº§é€»è¾‘")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("ç»™ FeignClient ç¼–å†™å¤±è´¥åçš„é™çº§é€»è¾‘ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ–¹å¼ 1ï¼š"),a("code",[t._v("FallbackClass")]),t._v("ï¼Œæ— æ³•å¯¹è¿œç¨‹è°ƒç”¨çš„å¼‚å¸¸åšå¤„ç†")]),t._v(" "),a("li",[t._v("æ–¹å¼ 2ï¼š"),a("code",[t._v("FallbackFactory")]),t._v("ï¼Œå¯ä»¥å¯¹è¿œç¨‹è°ƒç”¨çš„å¼‚å¸¸åšå¤„ç†")])]),t._v(" "),a("p",[t._v("è¿™é‡Œæˆ‘ä»¬æ¼”ç¤ºæ–¹å¼ 2 çš„å¤±è´¥é™çº§å¤„ç†ã€‚")]),t._v(" "),a("p",[t._v("ğŸ‘£ "),a("strong",[t._v("step 1")]),t._v("ï¼šåœ¨ feign-api é¡¹ç›®ä¸­å®šä¹‰ç±»ï¼Œå®ç° FallbackFactory")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"upload/image-20220314151245872.png",alt:"image-20220314151245872"}}),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("feign"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hystrix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FallbackFactory")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Slf4j")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserClientFallbackFactory")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FallbackFactory")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserClient")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Throwable")]),t._v(" throwable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æŸ¥è¯¢ç”¨æˆ·å¼‚å¸¸"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" throwable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br")])]),a("p",[t._v("ğŸ‘£ "),a("strong",[t._v("step 2")]),t._v("ï¼šåœ¨ DefaultFeignConfiguration ç±»ä¸­å°† UserClientFallbackFactory æ³¨å†Œä¸ºä¸€ä¸ªBeanï¼š")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserClientFallbackFactory")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("userClientFallbackFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserClientFallbackFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("ğŸ‘£ "),a("strong",[t._v("step 3")]),t._v("ï¼šåœ¨ UserClient æ¥å£ä¸­ä½¿ç”¨ UserClientFallbackFactoryï¼š")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@FeignClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userservice"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fallbackFactory "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserClientFallbackFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserClient")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/user/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("é‡å¯åï¼Œè®¿é—®ä¸€æ¬¡è®¢å•æŸ¥è¯¢ä¸šåŠ¡ï¼Œç„¶åæŸ¥çœ‹ sentinel æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°æ–°çš„ç°‡ç‚¹é“¾è·¯ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716123705780.png",alt:"image-20210716123705780"}}),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("æ€»ç»“")]),t._v(" "),a("p",[t._v("Feign æ•´åˆ Sentinel çš„æ­¥éª¤ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åœ¨ application.yml ä¸­é…ç½®ï¼š"),a("code",[t._v("feign.sentienl.enable=true")])]),t._v(" "),a("li",[t._v("ç»™ FeignClient ç¼–å†™ FallbackFactory å¹¶æ³¨å†Œä¸º Bean")]),t._v(" "),a("li",[t._v("å°† FallbackFactory é…ç½®åˆ° FeignClient")])])]),t._v(" "),a("h3",{attrs:{id:"_3-2-çº¿ç¨‹éš”ç¦»-èˆ±å£æ¨¡å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-çº¿ç¨‹éš”ç¦»-èˆ±å£æ¨¡å¼"}},[t._v("#")]),t._v(" 3.2 çº¿ç¨‹éš”ç¦»ï¼ˆèˆ±å£æ¨¡å¼ï¼‰")]),t._v(" "),a("h4",{attrs:{id:"_3-2-1-çº¿ç¨‹éš”ç¦»çš„å®ç°æ–¹å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-çº¿ç¨‹éš”ç¦»çš„å®ç°æ–¹å¼"}},[t._v("#")]),t._v(" 3.2.1 çº¿ç¨‹éš”ç¦»çš„å®ç°æ–¹å¼")]),t._v(" "),a("p",[t._v("çº¿ç¨‹éš”ç¦»æœ‰ä¸¤ç§æ–¹å¼å®ç°ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("çº¿ç¨‹æ± éš”ç¦»")])]),t._v(" "),a("li",[a("p",[t._v("ä¿¡å·é‡éš”ç¦»ï¼ˆSentinel é»˜è®¤é‡‡ç”¨ï¼‰")])])]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716123036937.png",alt:"image-20210716123036937"}}),t._v(" "),a("ul",[a("li",[t._v("å·¦è¾¹æ˜¯çº¿ç¨‹æ± éš”ç¦»ï¼Œå³è¾¹æ˜¯ä¿¡å·é‡éš”ç¦»")])]),t._v(" "),a("p",[a("strong",[t._v("çº¿ç¨‹æ± éš”ç¦»")]),t._v("ï¼šç»™æ¯ä¸ªæœåŠ¡è°ƒç”¨ä¸šåŠ¡åˆ†é…ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œåˆ©ç”¨çº¿ç¨‹æ± æœ¬èº«å®ç°éš”ç¦»æ•ˆæœã€‚")]),t._v(" "),a("p",[a("strong",[t._v("ä¿¡å·é‡éš”ç¦»")]),t._v("ï¼šä¸åˆ›å»ºçº¿ç¨‹æ± ï¼Œè€Œæ˜¯è®¡æ•°å™¨æ¨¡å¼ï¼Œè®°å½•ä¸šåŠ¡ä½¿ç”¨çš„çº¿ç¨‹æ•°é‡ï¼Œè¾¾åˆ°ä¿¡å·é‡ä¸Šé™æ—¶ï¼Œç¦æ­¢æ–°çš„è¯·æ±‚ã€‚")]),t._v(" "),a("p",[t._v("ä¸¤è€…çš„ä¼˜ç¼ºç‚¹ï¼š")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("çº¿ç¨‹æ± éš”ç¦»")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("ä¿¡å·é‡éš”ç¦»")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("strong",[t._v("ä¼˜")]),t._v("ï¼šæ”¯æŒä¸»åŠ¨è¶…æ—¶ã€å¼‚æ­¥è°ƒç”¨")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("è½»é‡çº§ï¼Œæ— é¢å¤–å¼€é”€")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("strong",[t._v("ç¼º")]),t._v("ï¼šçº¿ç¨‹çš„é¢å¤–å¼€é”€è¾ƒå¤§")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("ä¸æ”¯æŒä¸»åŠ¨è¶…æ—¶ã€å¼‚æ­¥è°ƒç”¨")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("strong",[t._v("åœºæ™¯")]),t._v("ï¼šä½æ‰‡å‡º")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("é«˜é¢‘è°ƒç”¨ã€é«˜æ‰‡å‡º")])])])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("æ‰‡å‡º")]),t._v("ï¼šæ˜¯æŒ‡è°ƒç”¨ A æœåŠ¡åï¼ŒA åˆä¼šè°ƒç”¨å¥½å‡ ä¸ªåˆ«çš„æœåŠ¡ï¼Œè¿™å°±åƒä¸€ä¸ªæ‰‡å­ä¸€æ ·ï¼Œä¸€ä¸‹å­æ‰‡å‡ºå¥½å‡ ä¸ªã€‚åƒç½‘å…³å°±æ˜¯ä¸€ä¸ªé«˜æ‰‡å‡ºçš„æœåŠ¡ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ä¸»åŠ¨è¶…æ—¶")]),t._v("ï¼šæ¯”å¦‚å½“æˆ‘ä»¬å‘ç°æŸä¸ªçº¿ç¨‹æ‰§è¡Œå¤ªä¹…äº†ï¼Œå¯ä»¥ä¸»åŠ¨å…³æ‰è¿™ä¸ªçº¿ç¨‹ï¼Œä»è€Œä¸»åŠ¨å…³é—­å®ƒã€‚")])]),t._v(" "),a("h4",{attrs:{id:"_3-2-2-sentinel-çš„çº¿ç¨‹éš”ç¦»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-sentinel-çš„çº¿ç¨‹éš”ç¦»"}},[t._v("#")]),t._v(" 3.2.2 sentinel çš„çº¿ç¨‹éš”ç¦»")]),t._v(" "),a("p",[t._v("åœ¨æ·»åŠ é™æµè§„åˆ™æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä¸¤ç§é˜ˆå€¼ç±»å‹ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716123411217.png",alt:"image-20210716123411217"}}),t._v(" "),a("ul",[a("li",[a("p",[t._v("QPSï¼šå°±æ˜¯æ¯ç§’çš„è¯·æ±‚æ•°ï¼Œ")])]),t._v(" "),a("li",[a("p",[t._v("çº¿ç¨‹æ•°ï¼šæ˜¯è¯¥èµ„æºèƒ½ä½¿ç”¨ç”¨çš„ tomcat çº¿ç¨‹æ•°çš„æœ€å¤§å€¼ã€‚ä¹Ÿå°±æ˜¯é€šè¿‡é™åˆ¶çº¿ç¨‹æ•°é‡ï¼Œå®ç°"),a("strong",[t._v("çº¿ç¨‹éš”ç¦»")]),t._v("ï¼ˆèˆ±å£æ¨¡å¼ï¼‰ã€‚")])])]),t._v(" "),a("h4",{attrs:{id:"_3-2-3-æ¡ˆä¾‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-3-æ¡ˆä¾‹"}},[t._v("#")]),t._v(" 3.2.3 æ¡ˆä¾‹")]),t._v(" "),a("p",[a("u",[t._v("éœ€æ±‚")]),t._v("ï¼šç»™ order-service æœåŠ¡ä¸­çš„ UserClient çš„æŸ¥è¯¢ç”¨æˆ·æ¥å£è®¾ç½®æµæ§è§„åˆ™ï¼Œçº¿ç¨‹æ•°ä¸èƒ½è¶…è¿‡ 2ã€‚")]),t._v(" "),a("p",[t._v("é€‰æ‹© feign æ¥å£åé¢çš„æµæ§æŒ‰é’®ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716123831992.png",alt:"image-20210716123831992"}})]),t._v(" "),a("p",[t._v("å¡«å†™è¡¨å•ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716123936844.png",alt:"image-20210716123936844"}}),t._v(" "),a("h3",{attrs:{id:"_3-3-ç†”æ–­é™çº§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-ç†”æ–­é™çº§"}},[t._v("#")]),t._v(" 3.3 ç†”æ–­é™çº§")]),t._v(" "),a("p",[t._v("ç†”æ–­é™çº§æ˜¯è§£å†³é›ªå´©é—®é¢˜çš„é‡è¦æ‰‹æ®µã€‚å…¶æ€è·¯æ˜¯ç”±"),a("strong",[t._v("æ–­è·¯å™¨")]),t._v("ç»Ÿè®¡æœåŠ¡è°ƒç”¨çš„å¼‚å¸¸æ¯”ä¾‹ã€æ…¢è¯·æ±‚æ¯”ä¾‹ï¼Œå¦‚æœè¶…å‡ºé˜ˆå€¼åˆ™ä¼š"),a("strong",[t._v("ç†”æ–­")]),t._v("è¯¥æœåŠ¡ã€‚å³æ‹¦æˆªè®¿é—®è¯¥æœåŠ¡çš„ä¸€åˆ‡è¯·æ±‚ï¼›è€Œ"),a("strong",[t._v("å½“æœåŠ¡æ¢å¤æ—¶ï¼Œæ–­è·¯å™¨ä¼šæ”¾è¡Œè®¿é—®è¯¥æœåŠ¡çš„è¯·æ±‚")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("æ–­è·¯å™¨æ§åˆ¶ç†”æ–­å’Œæ”¾è¡Œæ˜¯é€šè¿‡"),a("strong",[t._v("çŠ¶æ€æœº")]),t._v("æ¥å®ç°çš„ã€‚çŠ¶æ€æœºåŒ…æ‹¬ä¸‰ä¸ªçŠ¶æ€ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("closedï¼šå…³é—­çŠ¶æ€ï¼Œæ–­è·¯å™¨"),a("strong",[t._v("æ”¾è¡Œæ‰€æœ‰è¯·æ±‚")]),t._v("ï¼Œå¹¶å¼€å§‹ç»Ÿè®¡å¼‚å¸¸æ¯”ä¾‹ã€æ…¢è¯·æ±‚æ¯”ä¾‹ã€‚è¶…è¿‡é˜ˆå€¼åˆ™åˆ‡æ¢åˆ° open çŠ¶æ€")]),t._v(" "),a("li",[t._v("openï¼šæ‰“å¼€çŠ¶æ€ï¼ŒæœåŠ¡è°ƒç”¨è¢«"),a("strong",[t._v("ç†”æ–­")]),t._v("ï¼Œè®¿é—®è¢«ç†”æ–­æœåŠ¡çš„è¯·æ±‚ä¼šè¢«æ‹’ç»ï¼Œå¿«é€Ÿå¤±è´¥ï¼Œç›´æ¥èµ°é™çº§é€»è¾‘ã€‚Open çŠ¶æ€ 5 ç§’åä¼šè¿›å…¥ half-open çŠ¶æ€")]),t._v(" "),a("li",[t._v("half-openï¼šåŠå¼€çŠ¶æ€ï¼Œæ”¾è¡Œä¸€æ¬¡è¯·æ±‚ï¼Œæ ¹æ®æ‰§è¡Œç»“æœæ¥åˆ¤æ–­æ¥ä¸‹æ¥çš„æ“ä½œã€‚\n"),a("ul",[a("li",[t._v("è¯·æ±‚æˆåŠŸï¼šåˆ™åˆ‡æ¢åˆ° closed çŠ¶æ€")]),t._v(" "),a("li",[t._v("è¯·æ±‚å¤±è´¥ï¼šåˆ™åˆ‡æ¢åˆ° open çŠ¶æ€")])])])]),t._v(" "),a("p",[t._v("ç†”æ–­æ¡ä»¶çš„åˆ¤æ–­æ˜¯ä¾æ®"),a("strong",[t._v("ç†”æ–­ç­–ç•¥")]),t._v("æ¥å®Œæˆçš„ã€‚æ–­è·¯å™¨ç†”æ–­ç­–ç•¥æœ‰ä¸‰ç§ï¼šæ…¢è°ƒç”¨ã€å¼‚å¸¸æ¯”ä¾‹ã€å¼‚å¸¸æ•°")]),t._v(" "),a("h4",{attrs:{id:"_3-3-1-æ…¢è°ƒç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-1-æ…¢è°ƒç”¨"}},[t._v("#")]),t._v(" 3.3.1 æ…¢è°ƒç”¨")]),t._v(" "),a("p",[a("strong",[t._v("æ…¢è°ƒç”¨")]),t._v("ï¼šä¸šåŠ¡çš„å“åº”æ—¶é•¿ï¼ˆRTï¼‰å¤§äºæŒ‡å®šæ—¶é•¿çš„è¯·æ±‚è®¤å®šä¸ºæ…¢è°ƒç”¨è¯·æ±‚ã€‚åœ¨æŒ‡å®šæ—¶é—´å†…ï¼Œå¦‚æœè¯·æ±‚æ•°é‡è¶…è¿‡è®¾å®šçš„æœ€å°æ•°é‡ï¼Œæ…¢è°ƒç”¨æ¯”ä¾‹å¤§äºè®¾å®šçš„é˜ˆå€¼ï¼Œåˆ™è§¦å‘ç†”æ–­ã€‚")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716145934347.png",alt:"image-20210716145934347"}}),t._v(" "),a("ul",[a("li",[t._v("è§£è¯»ï¼šRT è¶…è¿‡ 500ms çš„è°ƒç”¨æ˜¯æ…¢è°ƒç”¨ï¼Œç»Ÿè®¡æœ€è¿‘ 10000ms å†…çš„è¯·æ±‚ï¼Œå¦‚æœè¯·æ±‚é‡è¶…è¿‡ 10 æ¬¡ï¼Œå¹¶ä¸”æ…¢è°ƒç”¨æ¯”ä¾‹ä¸ä½äº 0.5ï¼Œåˆ™è§¦å‘ç†”æ–­ï¼Œç†”æ–­æ—¶é•¿ä¸º 5 ç§’ã€‚ç„¶åè¿›å…¥ half-open çŠ¶æ€ï¼Œæ”¾è¡Œä¸€æ¬¡è¯·æ±‚åšæµ‹è¯•ã€‚")])]),t._v(" "),a("p",[a("strong",[t._v("æ¡ˆä¾‹éœ€æ±‚")]),t._v("ï¼šç»™ UserClient çš„æŸ¥è¯¢ç”¨æˆ·æ¥å£è®¾ç½®é™çº§è§„åˆ™ï¼Œæ…¢è°ƒç”¨çš„ RT é˜ˆå€¼ä¸º 50ms ï¼Œç»Ÿè®¡æ—¶é—´ä¸º 1 ç§’ï¼Œæœ€å°è¯·æ±‚æ•°é‡ä¸º 5ï¼Œå¤±è´¥é˜ˆå€¼æ¯”ä¾‹ä¸º 0.4ï¼Œç†”æ–­æ—¶é•¿ä¸º 5")]),t._v(" "),a("h5",{attrs:{id:"_1-è®¾ç½®æ…¢è°ƒç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-è®¾ç½®æ…¢è°ƒç”¨"}},[t._v("#")]),t._v(" ğŸ‘£ 1ï¼‰è®¾ç½®æ…¢è°ƒç”¨")]),t._v(" "),a("p",[t._v("ä¿®æ”¹ user-service ä¸­çš„ "),a("code",[t._v("/user/{id}")]),t._v(" è¿™ä¸ªæ¥å£çš„ä¸šåŠ¡ã€‚é€šè¿‡ä¼‘çœ æ¨¡æ‹Ÿä¸€ä¸ªå»¶è¿Ÿæ—¶é—´ï¼š")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v("Â ")]),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Truth"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" truth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¼‘çœ ï¼Œè§¦å‘ç†”æ–­")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[t._v("æ­¤æ—¶ï¼Œ"),a("code",[t._v("orderId=101")]),t._v(" çš„è®¢å•ï¼Œå…³è”çš„æ˜¯ id ä¸º 1 çš„ç”¨æˆ·ï¼Œè°ƒç”¨æ—¶é•¿ä¸º 60msï¼Œå…¶ä»–è°ƒç”¨åˆ™å¾ˆå¿«ã€‚")]),t._v(" "),a("h5",{attrs:{id:"_2-è®¾ç½®ç†”æ–­è§„åˆ™"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-è®¾ç½®ç†”æ–­è§„åˆ™"}},[t._v("#")]),t._v(" ğŸ‘£ 2ï¼‰è®¾ç½®ç†”æ–­è§„åˆ™")]),t._v(" "),a("p",[t._v("ä¸‹é¢ï¼Œç»™ feign æ¥å£è®¾ç½®é™çº§è§„åˆ™ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716150654094.png",alt:"image-20210716150654094"}})]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716150740434.png",alt:"image-20210716150740434"}}),t._v(" "),a("ul",[a("li",[t._v("è¶…è¿‡ 50ms çš„è¯·æ±‚éƒ½ä¼šè¢«è®¤ä¸ºæ˜¯æ…¢è¯·æ±‚")])]),t._v(" "),a("h5",{attrs:{id:"_3-æµ‹è¯•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-æµ‹è¯•"}},[t._v("#")]),t._v(" ğŸ‘£ 3ï¼‰æµ‹è¯•")]),t._v(" "),a("p",[t._v("åœ¨æµè§ˆå™¨è®¿é—®ï¼š"),a("code",[t._v("http://localhost:8088/order/101")]),t._v("ï¼Œå¿«é€Ÿåˆ·æ–°5æ¬¡ï¼Œå¯ä»¥å‘ç°è§¦å‘äº†ç†”æ–­ï¼Œå¿«é€Ÿå¤±è´¥äº†ï¼Œå¹¶ä¸”èµ°é™çº§é€»è¾‘ï¼Œè¿”å›çš„é»˜è®¤ç»“æœã€‚æ­¤æ—¶åœ¨æµè§ˆå™¨è®¿é—®ï¼š"),a("code",[t._v("http://localhost:8088/order/102")]),t._v("ï¼Œç«Ÿç„¶ä¹Ÿè¢«ç†”æ–­äº†ï¼š")]),t._v(" "),a("h4",{attrs:{id:"_3-3-2-å¼‚å¸¸æ¯”ä¾‹ã€å¼‚å¸¸æ•°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-2-å¼‚å¸¸æ¯”ä¾‹ã€å¼‚å¸¸æ•°"}},[t._v("#")]),t._v(" 3.3.2 å¼‚å¸¸æ¯”ä¾‹ã€å¼‚å¸¸æ•°")]),t._v(" "),a("p",[a("strong",[t._v("å¼‚å¸¸æ¯”ä¾‹æˆ–å¼‚å¸¸æ•°")]),t._v("ï¼šç»Ÿè®¡æŒ‡å®šæ—¶é—´å†…çš„è°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨æ¬¡æ•°è¶…è¿‡æŒ‡å®šè¯·æ±‚æ•°ï¼Œå¹¶ä¸”å‡ºç°å¼‚å¸¸çš„æ¯”ä¾‹è¾¾åˆ°è®¾å®šçš„æ¯”ä¾‹é˜ˆå€¼ï¼ˆæˆ–è¶…è¿‡æŒ‡å®šå¼‚å¸¸æ•°ï¼‰ï¼Œåˆ™è§¦å‘ç†”æ–­ã€‚")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716131430682.png",alt:"image-20210716131430682"}}),t._v(" "),a("ul",[a("li",[t._v("è§£è¯»ï¼šç»Ÿè®¡æœ€è¿‘ 1000ms å†…çš„è¯·æ±‚ï¼Œå¦‚æœè¯·æ±‚é‡è¶…è¿‡ 10 æ¬¡ï¼Œå¹¶ä¸”å¼‚å¸¸æ¯”ä¾‹ä¸ä½äº 0.4ï¼Œåˆ™è§¦å‘ç†”æ–­ã€‚")])]),t._v(" "),a("p",[a("strong",[t._v("æ¡ˆä¾‹éœ€æ±‚")]),t._v("ï¼šç»™ UserClient çš„æŸ¥è¯¢ç”¨æˆ·æ¥å£è®¾ç½®é™çº§è§„åˆ™ï¼Œç»Ÿè®¡æ—¶é—´ä¸º 1 ç§’ï¼Œæœ€å°è¯·æ±‚æ•°é‡ä¸º 5ï¼Œå¤±è´¥é˜ˆå€¼æ¯”ä¾‹ä¸º 0.4ï¼Œç†”æ–­æ—¶é•¿ä¸º 5s")]),t._v(" "),a("h5",{attrs:{id:"_1-è®¾ç½®å¼‚å¸¸è¯·æ±‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-è®¾ç½®å¼‚å¸¸è¯·æ±‚"}},[t._v("#")]),t._v(" ğŸ‘£ 1ï¼‰è®¾ç½®å¼‚å¸¸è¯·æ±‚")]),t._v(" "),a("p",[t._v("é¦–å…ˆï¼Œä¿®æ”¹ user-service ä¸­çš„ "),a("code",[t._v("/user/{id}")]),t._v(" è¿™ä¸ªæ¥å£çš„ä¸šåŠ¡ã€‚æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸ï¼Œä»¥è§¦å‘å¼‚å¸¸æ¯”ä¾‹çš„ç†”æ–­ï¼š")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v("Â ")]),a("div",{staticClass:"highlighted"},[t._v("Â ")]),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Truth"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" truth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¼‘çœ ï¼Œè§¦å‘ç†”æ–­")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ•…æ„å‡ºé”™ï¼Œè§¦å‘ç†”æ–­"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("ul",[a("li",[t._v("ä¹Ÿå°±æ˜¯è¯´ï¼Œid ä¸º 2 æ—¶ï¼Œå°±ä¼šè§¦å‘å¼‚å¸¸")])]),t._v(" "),a("h5",{attrs:{id:"_2-è®¾ç½®ç†”æ–­è§„åˆ™-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-è®¾ç½®ç†”æ–­è§„åˆ™-2"}},[t._v("#")]),t._v(" ğŸ‘£ 2ï¼‰è®¾ç½®ç†”æ–­è§„åˆ™")]),t._v(" "),a("p",[t._v("ä¸‹é¢ï¼Œç»™ feign æ¥å£è®¾ç½®é™çº§è§„åˆ™ï¼š")]),t._v(" "),a("p",[a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716150654094.png",alt:"image-20210716150654094"}}),a("img",{attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716151538785.png",alt:"image-20210716151538785"}})]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716151538785.png",alt:"image-20210716151538785"}}),t._v(" "),a("p",[t._v("åœ¨ 5 æ¬¡è¯·æ±‚ä¸­ï¼Œåªè¦å¼‚å¸¸æ¯”ä¾‹è¶…è¿‡ 0.4ï¼Œä¹Ÿå°±æ˜¯æœ‰ 2 æ¬¡ä»¥ä¸Šçš„å¼‚å¸¸ï¼Œå°±ä¼šè§¦å‘ç†”æ–­ã€‚")]),t._v(" "),a("h5",{attrs:{id:"_3-æµ‹è¯•-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-æµ‹è¯•-2"}},[t._v("#")]),t._v(" ğŸ‘£ 3ï¼‰æµ‹è¯•")]),t._v(" "),a("p",[t._v("åœ¨æµè§ˆå™¨å¿«é€Ÿè®¿é—®ï¼š"),a("code",[t._v("http://localhost:8088/order/102")]),t._v("ï¼Œå¿«é€Ÿåˆ·æ–°5æ¬¡ï¼Œè§¦å‘ç†”æ–­ã€‚")]),t._v(" "),a("h2",{attrs:{id:"_4-sentinel-çš„æˆæƒè§„åˆ™"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-sentinel-çš„æˆæƒè§„åˆ™"}},[t._v("#")]),t._v(" 4. Sentinel çš„æˆæƒè§„åˆ™")]),t._v(" "),a("h3",{attrs:{id:"_4-1-æˆæƒè§„åˆ™"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-æˆæƒè§„åˆ™"}},[t._v("#")]),t._v(" 4.1 æˆæƒè§„åˆ™")]),t._v(" "),a("h4",{attrs:{id:"_4-1-1-åŸºæœ¬è§„åˆ™"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-1-åŸºæœ¬è§„åˆ™"}},[t._v("#")]),t._v(" 4.1.1 åŸºæœ¬è§„åˆ™")]),t._v(" "),a("p",[t._v("æˆæƒè§„åˆ™å¯ä»¥å¯¹è°ƒç”¨æ–¹çš„æ¥æºï¼ˆoriginï¼‰åšæ§åˆ¶ï¼Œæœ‰ç™½åå•å’Œé»‘åå•ä¸¤ç§æ–¹å¼ã€‚")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("ç™½åå•ï¼šæ¥æºåœ¨ç™½åå•å†…çš„è°ƒç”¨è€…å…è®¸è®¿é—®")])]),t._v(" "),a("li",[a("p",[t._v("é»‘åå•ï¼šæ¥æºåœ¨é»‘åå•å†…çš„è°ƒç”¨è€…ä¸å…è®¸è®¿é—®")])])]),t._v(" "),a("blockquote",[a("p",[t._v("ç½‘å…³å°±å¯ä»¥åšèº«ä»½éªŒè¯çš„å·¥ä½œäº†ï¼Œè¿™é‡Œçš„æˆæƒè§„åˆ™å¯ä»¥å°†å¾®æœåŠ¡çš„åœ°å€è¿›è¡Œä¿æŠ¤ï¼Œä½¿ä¹‹åªèƒ½é€šè¿‡ç½‘å…³æ¥è®¿é—®ï¼Œè€Œé˜²æ­¢äº†æœ‰äººç›´æ¥å¯¹å¾®æœåŠ¡çš„è®¿é—®ã€‚")])]),t._v(" "),a("p",[t._v("ç‚¹å‡»å·¦ä¾§èœå•çš„æˆæƒï¼Œå¯ä»¥çœ‹åˆ°æˆæƒè§„åˆ™ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716152010750.png",alt:"image-20210716152010750"}}),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("èµ„æºå")]),t._v("ï¼šå°±æ˜¯å—ä¿æŠ¤çš„èµ„æºï¼Œä¾‹å¦‚ "),a("code",[t._v("/order/{orderId}")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("æµæ§åº”ç”¨")]),t._v("ï¼šæ˜¯æ¥æºè€…çš„åå•ï¼Œ")])])]),t._v(" "),a("p",[t._v("æ¯”å¦‚æˆ‘ä»¬å…è®¸è¯·æ±‚ä» gateway åˆ° order-serviceï¼Œä¸å…è®¸æµè§ˆå™¨è®¿é—® order-serviceï¼Œé‚£ä¹ˆç™½åå•ä¸­å°±è¦å¡«å†™"),a("strong",[t._v("ç½‘å…³çš„æ¥æºåç§°ï¼ˆoriginï¼‰")]),t._v("ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_4-1-2-å¦‚ä½•è·å–-origin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-2-å¦‚ä½•è·å–-origin"}},[t._v("#")]),t._v(" 4.1.2 å¦‚ä½•è·å– origin")]),t._v(" "),a("p",[t._v("Sentinel æ˜¯é€šè¿‡ "),a("strong",[t._v("RequestOriginParser")]),t._v(" è¿™ä¸ªæ¥å£çš„ "),a("strong",[t._v("parseOrigin")]),t._v(" æ¥è·å–è¯·æ±‚çš„æ¥æºçš„ï¼š")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestOriginParser")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * ä»è¯·æ±‚ request å¯¹è±¡ä¸­è·å– originï¼Œè·å–æ–¹å¼è‡ªå®šä¹‰\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseOrigin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨å°±æ˜¯"),a("strong",[t._v("ä» request å¯¹è±¡ä¸­ï¼Œè·å–è¯·æ±‚è€…çš„ origin å€¼å¹¶è¿”å›")]),t._v("ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œsentinel ä¸ç®¡è¯·æ±‚è€…ä»å“ªé‡Œæ¥ï¼Œè¿”å›å€¼æ°¸è¿œæ˜¯ defaultï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€åˆ‡è¯·æ±‚çš„æ¥æºéƒ½è¢«è®¤ä¸ºæ˜¯ä¸€æ ·çš„å€¼ defaultã€‚")]),t._v(" "),a("p",[t._v("å› æ­¤ï¼Œæˆ‘ä»¬"),a("strong",[t._v("éœ€è¦è‡ªå®šä¹‰è¿™ä¸ªæ¥å£çš„å®ç°ï¼Œè®©ä¸åŒçš„è¯·æ±‚ï¼Œè¿”å›ä¸åŒçš„ origin")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("ä¾‹å¦‚ order-service æœåŠ¡ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª RequestOriginParser çš„å®ç°ç±»ï¼š")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("alibaba"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("csp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sentinel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("adapter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("spring"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webmvc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestOriginParser")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HeaderOriginParser")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestOriginParser")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseOrigin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.è·å–è¯·æ±‚å¤´")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" origin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"origin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.éç©ºåˆ¤æ–­")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isEmpty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("origin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            origin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blank"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" origin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br")])]),a("ul",[a("li",[t._v("æˆ‘ä»¬ä¼šå°è¯•ä» request-header ä¸­è·å– origin å€¼ã€‚æ€æ ·è·å–æ˜¯è‡ªå®šä¹‰çš„ã€‚")])]),t._v(" "),a("h4",{attrs:{id:"_4-1-3-ç»™ç½‘å…³æ·»åŠ è¯·æ±‚å¤´"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-3-ç»™ç½‘å…³æ·»åŠ è¯·æ±‚å¤´"}},[t._v("#")]),t._v(" 4.1.3 ç»™ç½‘å…³æ·»åŠ è¯·æ±‚å¤´")]),t._v(" "),a("p",[t._v("æ—¢ç„¶è·å–è¯·æ±‚ origin çš„æ–¹å¼æ˜¯ä» reques-header ä¸­è·å– origin å€¼ï¼Œæˆ‘ä»¬å¿…é¡»"),a("u",[t._v("è®©æ‰€æœ‰ä» gateway è·¯ç”±åˆ°å¾®æœåŠ¡çš„è¯·æ±‚éƒ½å¸¦ä¸Š origin å¤´")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("è¿™ä¸ªéœ€è¦åˆ©ç”¨ä¹‹å‰å­¦ä¹ çš„ä¸€ä¸ª GatewayFilter æ¥å®ç°ï¼š AddRequestHeaderGatewayFilterã€‚ä¿®æ”¹ gateway æœåŠ¡ä¸­çš„ application.ymlï¼Œæ·»åŠ ä¸€ä¸ª defaultFilterï¼š")]),t._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v("Â ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("default-filters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" AddRequestHeader=origin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("gateway\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...ç•¥")]),t._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[t._v("è¿™æ ·ï¼Œä» gateway è·¯ç”±çš„æ‰€æœ‰è¯·æ±‚éƒ½ä¼šå¸¦ä¸Š origin å¤´ï¼Œå€¼ä¸º gatewayã€‚è€Œä»å…¶å®ƒåœ°æ–¹åˆ°è¾¾å¾®æœåŠ¡çš„è¯·æ±‚åˆ™æ²¡æœ‰è¿™ä¸ªå¤´ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_4-1-5-é…ç½®æˆæƒè§„åˆ™"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-5-é…ç½®æˆæƒè§„åˆ™"}},[t._v("#")]),t._v(" 4.1.5 é…ç½®æˆæƒè§„åˆ™")]),t._v(" "),a("p",[t._v("æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæˆæƒè§„åˆ™ï¼Œæ”¾è¡Œ origin å€¼ä¸º gateway çš„è¯·æ±‚ã€‚")]),t._v(" "),a("p",[a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716153250134.png",alt:"image-20210716153250134"}}),a("img",{attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716153301069.png",alt:"image-20210716153301069"}})]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716153301069.png",alt:"image-20210716153301069"}}),t._v(" "),a("p",[t._v("ç°åœ¨ï¼Œæˆ‘ä»¬ç›´æ¥è·³è¿‡ç½‘å…³ï¼Œè®¿é—® order-service æœåŠ¡ï¼Œä¼šå‘ç°ç›´æ¥è®¿é—®å¾®æœåŠ¡ï¼Œè¯·æ±‚ä¼šè¢«æ‹¦æˆªï¼Œè€Œé€šè¿‡ç½‘å…³è®¿é—®åˆ™ä¸å—å½±å“ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_4-2-è‡ªå®šä¹‰å¼‚å¸¸ç»“æœ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-è‡ªå®šä¹‰å¼‚å¸¸ç»“æœ"}},[t._v("#")]),t._v(" 4.2 è‡ªå®šä¹‰å¼‚å¸¸ç»“æœ")]),t._v(" "),a("p",[t._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œå‘ç”Ÿé™æµã€é™çº§ã€æˆæƒæ‹¦æˆªæ—¶ï¼Œéƒ½ä¼šæŠ›å‡ºå¼‚å¸¸åˆ°è°ƒç”¨æ–¹ã€‚å¼‚å¸¸ç»“æœéƒ½æ˜¯ "),a("code",[t._v("flow limmitingï¼ˆé™æµï¼‰")]),t._v("ã€‚è¿™æ ·ä¸å¤Ÿå‹å¥½ï¼Œæ— æ³•å¾—çŸ¥æ˜¯é™æµè¿˜æ˜¯é™çº§è¿˜æ˜¯æˆæƒæ‹¦æˆªã€‚")]),t._v(" "),a("h4",{attrs:{id:"_4-2-1-å¼‚å¸¸ç±»å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-å¼‚å¸¸ç±»å‹"}},[t._v("#")]),t._v(" 4.2.1 å¼‚å¸¸ç±»å‹")]),t._v(" "),a("p",[t._v("å¦‚æœè¦è‡ªå®šä¹‰å¼‚å¸¸æ—¶çš„è¿”å›ç»“æœï¼Œéœ€è¦å®ç° "),a("strong",[t._v("BlockExceptionHandler æ¥å£")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlockExceptionHandler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * å¤„ç†è¯·æ±‚è¢«é™æµã€é™çº§ã€æˆæƒæ‹¦æˆªæ—¶æŠ›å‡ºçš„å¼‚å¸¸ï¼šBlockException\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlockException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("è¿™ä¸ªæ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("HttpServletRequest requestï¼šrequestå¯¹è±¡")]),t._v(" "),a("li",[t._v("HttpServletResponse responseï¼šresponseå¯¹è±¡")]),t._v(" "),a("li",[t._v("BlockException eï¼šè¢«sentinelæ‹¦æˆªæ—¶æŠ›å‡ºçš„å¼‚å¸¸")])]),t._v(" "),a("p",[t._v("è¿™é‡Œçš„ BlockException åŒ…å«å¤šä¸ªä¸åŒçš„å­ç±»ï¼š")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("strong",[t._v("å¼‚å¸¸")])]),t._v(" "),a("th",[a("strong",[t._v("è¯´æ˜")])])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("FlowException")]),t._v(" "),a("td",[t._v("é™æµå¼‚å¸¸")])]),t._v(" "),a("tr",[a("td",[t._v("ParamFlowException")]),t._v(" "),a("td",[t._v("çƒ­ç‚¹å‚æ•°é™æµçš„å¼‚å¸¸")])]),t._v(" "),a("tr",[a("td",[t._v("DegradeException")]),t._v(" "),a("td",[t._v("é™çº§å¼‚å¸¸")])]),t._v(" "),a("tr",[a("td",[t._v("AuthorityException")]),t._v(" "),a("td",[t._v("æˆæƒè§„åˆ™å¼‚å¸¸")])]),t._v(" "),a("tr",[a("td",[t._v("SystemBlockException")]),t._v(" "),a("td",[t._v("ç³»ç»Ÿè§„åˆ™å¼‚å¸¸")])])])]),t._v(" "),a("h4",{attrs:{id:"_4-2-2-è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†"}},[t._v("#")]),t._v(" 4.2.2 è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†")]),t._v(" "),a("p",[t._v("ä¸‹é¢ï¼Œæˆ‘ä»¬å°±åœ¨ order-service å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰å¼‚å¸¸å¤„ç†ç±»ï¼š")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SentinelExceptionHandler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlockExceptionHandler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlockException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœªçŸ¥å¼‚å¸¸"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("429")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FlowException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è¯·æ±‚è¢«é™æµäº†"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ParamFlowException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è¯·æ±‚è¢«çƒ­ç‚¹å‚æ•°é™æµ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DegradeException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è¯·æ±‚è¢«é™çº§äº†"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthorityException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ²¡æœ‰æƒé™è®¿é—®"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("401")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setContentType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/json;charset=utf-8"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWriter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{\\"msg\\": "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('", \\"status\\": "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br")])]),a("p",[t._v("é‡å¯æµ‹è¯•ï¼Œåœ¨ä¸åŒåœºæ™¯ä¸‹ï¼ˆé™æµã€æˆæƒæ‹¦æˆª...ï¼‰ï¼Œä¼šè¿”å›ä¸åŒçš„å¼‚å¸¸ä¿¡æ¯ã€‚")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("æ€»ç»“")]),t._v(" "),a("ul",[a("li",[t._v("è·å–è¯·æ±‚æ¥æºçš„æ¥å£ï¼š"),a("code",[t._v("RequestOriginParser")])]),t._v(" "),a("li",[t._v("å¤„ç† BlockException çš„æ¥å£ï¼š"),a("code",[t._v("BlockExceptionHandler")])])])]),t._v(" "),a("h2",{attrs:{id:"_5-è§„åˆ™æŒä¹…åŒ–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-è§„åˆ™æŒä¹…åŒ–"}},[t._v("#")]),t._v(" 5. è§„åˆ™æŒä¹…åŒ–")]),t._v(" "),a("p",[t._v("ç°åœ¨ï¼Œsentinel çš„æ‰€æœ‰è§„åˆ™éƒ½æ˜¯å†…å­˜å­˜å‚¨ï¼Œé‡å¯åæ‰€æœ‰è§„åˆ™éƒ½ä¼šä¸¢å¤±ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®ä¿è¿™äº›"),a("strong",[t._v("è§„åˆ™çš„æŒä¹…åŒ–")]),t._v("ï¼Œé¿å…ä¸¢å¤±ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_5-1-è§„åˆ™ç®¡ç†æ¨¡å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-è§„åˆ™ç®¡ç†æ¨¡å¼"}},[t._v("#")]),t._v(" 5.1 è§„åˆ™ç®¡ç†æ¨¡å¼")]),t._v(" "),a("p",[t._v("è§„åˆ™æ˜¯å¦èƒ½æŒä¹…åŒ–ï¼Œå–å†³äºè§„åˆ™ç®¡ç†æ¨¡å¼ï¼Œsentinelæ”¯æŒä¸‰ç§è§„åˆ™ç®¡ç†æ¨¡å¼ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("åŸå§‹æ¨¡å¼")]),t._v("ï¼šSentinel çš„é»˜è®¤æ¨¡å¼ï¼Œå°†è§„åˆ™"),a("strong",[t._v("ä¿å­˜åœ¨å†…å­˜")]),t._v("ï¼Œé‡å¯æœåŠ¡ä¼šä¸¢å¤±ã€‚")]),t._v(" "),a("li",[t._v("pull æ¨¡å¼å’Œ push æ¨¡å¼")])]),t._v(" "),a("h4",{attrs:{id:"_5-1-1-pull-æ¨¡å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-1-pull-æ¨¡å¼"}},[t._v("#")]),t._v(" 5.1.1 pull æ¨¡å¼")]),t._v(" "),a("p",[a("strong",[t._v("pull æ¨¡å¼")]),t._v("ï¼šæ§åˆ¶å°å°†é…ç½®çš„è§„åˆ™æ¨é€åˆ°Sentinelå®¢æˆ·ç«¯ï¼Œè€Œå®¢æˆ·ç«¯ä¼šå°†é…ç½®è§„åˆ™ä¿å­˜åœ¨æœ¬åœ°æ–‡ä»¶æˆ–æ•°æ®åº“ä¸­ã€‚ä»¥åä¼šå®šæ—¶å»æœ¬åœ°æ–‡ä»¶æˆ–æ•°æ®åº“ä¸­æŸ¥è¯¢ï¼Œæ›´æ–°æœ¬åœ°è§„åˆ™ã€‚")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716154155238.png",alt:"image-20210716154155238"}}),t._v(" "),a("blockquote",[a("p",[t._v("è¿™ç§æ–¹å¼"),a("strong",[t._v("å­˜åœ¨æ—¶æ•ˆæ€§é—®é¢˜")]),t._v("ã€‚æ¯”å¦‚å½“æ¨é€è§„åˆ™å†™å…¥æœ¬åœ°æ–‡ä»¶ä¸­åï¼Œå®¢æˆ·ç«¯ä¸ä¼šç«‹åˆ»å»æŸ¥è¯¢å¹¶æ›´æ–°ï¼Œè¿™ä¼šå¯¼è‡´ä¸åŒçš„æœåŠ¡ä¹‹é—´å…·æœ‰ä¸åŒçš„è§„åˆ™ï¼Œä»è€Œäº§ç”Ÿä¸ä¸€è‡´æ€§é—®é¢˜ã€‚")])]),t._v(" "),a("h4",{attrs:{id:"_5-1-2-push-æ¨¡å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-2-push-æ¨¡å¼"}},[t._v("#")]),t._v(" 5.1.2 push æ¨¡å¼ â­ï¸")]),t._v(" "),a("p",[a("strong",[t._v("push æ¨¡å¼")]),t._v("ï¼šæ§åˆ¶å°å°†é…ç½®è§„åˆ™æ¨é€åˆ°è¿œç¨‹é…ç½®ä¸­å¿ƒï¼Œä¾‹å¦‚ Nacosã€‚Sentinel å®¢æˆ·ç«¯ç›‘å¬ Nacosï¼Œè·å–é…ç½®å˜æ›´çš„æ¨é€æ¶ˆæ¯ï¼Œå®Œæˆæœ¬åœ°é…ç½®æ›´æ–°ã€‚ã€"),a("u",[t._v("æ¨èä½¿ç”¨è¿™ç§æ–¹å¼")]),t._v("ã€‘")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20210716154215456.png",alt:"image-20210716154215456"}}),t._v(" "),a("blockquote",[a("p",[t._v("å…·ä½“é…ç½®æ–¹å¼å¯è‡ªè¡Œæœç´¢")])])])}),[],!1,null,null,null);s.default=e.exports}}]);