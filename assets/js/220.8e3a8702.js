(window.webpackJsonp=window.webpackJsonp||[]).push([[220],{972:function(t,s,a){"use strict";a.r(s);var n=a(22),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("blockquote",[a("p",[t._v("FROM "),a("a",{attrs:{href:"https://www.bilibili.com/video/BV1ov41187bq",target:"_blank",rel:"noopener noreferrer"}},[t._v("é»‘é©¬ç¨‹åºå‘˜Nginxæ•™ç¨‹ï¼ŒJavaè¿›é˜¶ä»0åˆ°1å­¦ä¼šNginxåˆ†å¸ƒå¼æ¡†æ¶_å“”å“©å“”å“©_bilibili"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"_1-nginx-ç®€ä»‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-nginx-ç®€ä»‹"}},[t._v("#")]),t._v(" 1. Nginx ç®€ä»‹")]),t._v(" "),a("h3",{attrs:{id:"_1-1-èƒŒæ™¯ä»‹ç»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-èƒŒæ™¯ä»‹ç»"}},[t._v("#")]),t._v(" 1.1 èƒŒæ™¯ä»‹ç»")]),t._v(" "),a("p",[t._v("Nginxï¼ˆâ€œengine xâ€ï¼‰ä¸€ä¸ªå…·æœ‰é«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç†çš„ Web æœåŠ¡å™¨ï¼Œç”±ä¼Šæˆˆå°”Â·èµ›ç´¢è€¶å¤«ç”¨ C è¯­è¨€ç¼–å†™ï¼Œå¼€æºã€‚")]),t._v(" "),a("h3",{attrs:{id:"_1-2-ä»€ä¹ˆæ˜¯åå‘ä»£ç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-ä»€ä¹ˆæ˜¯åå‘ä»£ç†"}},[t._v("#")]),t._v(" 1.2 ä»€ä¹ˆæ˜¯åå‘ä»£ç†ï¼Ÿ")]),t._v(" "),a("p",[t._v("æ²¡æœ‰ä½¿ç”¨ä»£ç†å‰ï¼Œå®¢æˆ·ç«¯å°†è¯·æ±‚å‘ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯å†å°†å“åº”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚")]),t._v(" "),a("p",[t._v("ä½†æœ‰ä¸€ç§æƒ…å†µæ˜¯æœåŠ¡ç«¯å¯èƒ½ç¦æ‰æŸä¸€ç±»å®¢æˆ·ç«¯çš„è®¿é—®ï¼Œè¿™æ—¶å®¢æˆ·ç«¯å°±å¯ä»¥ç”¨ä¸€ä¸ªä»£ç†æ¥å®ç°è®¿é—®æœåŠ¡ç«¯ã€æ­£å‘ä»£ç†ã€‘ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/1573489359728.png",alt:"1573489359728"}}),t._v(" "),a("p",[t._v("åå‘ä»£ç†åˆ™æ˜¯ï¼Œå®¢æˆ·ç«¯å°†è¯·æ±‚å‘ç»™ proxyï¼Œç„¶å proxy å°†å…¶è½¬å‘ç»™æŸä¸€ä¸ªæœåŠ¡ç«¯ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/1573489653799.png",alt:"1573489653799"}}),t._v(" "),a("blockquote",[a("p",[t._v("æ­£å‘ä»£ç†ä¸»è¦æœåŠ¡çš„æ˜¯ clientï¼Œè€Œåå‘ä»£ç†åˆ™ä¸»è¦æœåŠ¡çš„æ˜¯ serverã€‚")])]),t._v(" "),a("h3",{attrs:{id:"_1-3-å¸¸è§æœåŠ¡å™¨å¯¹æ¯”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-å¸¸è§æœåŠ¡å™¨å¯¹æ¯”"}},[t._v("#")]),t._v(" 1.3 å¸¸è§æœåŠ¡å™¨å¯¹æ¯”")]),t._v(" "),a("h4",{attrs:{id:"_1-iis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-iis"}},[t._v("#")]),t._v(" 1ï¼‰IIS")]),t._v(" "),a("p",[t._v("å…¨ç§° Internet Information Servicesï¼Œå³äº’è”ç½‘ä¿¡æ¯æœåŠ¡ï¼Œæ˜¯ç”±å¾®è½¯å…¬å¸æä¾›çš„åŸºäº Windows ç³»ç»Ÿçš„äº’è”ç½‘åŸºæœ¬æœåŠ¡ï¼Œä½† Windows ä¸é€‚åˆåšæœåŠ¡å™¨ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_2-tomcat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-tomcat"}},[t._v("#")]),t._v(" 2ï¼‰Tomcat")]),t._v(" "),a("p",[t._v("Tomcat æ˜¯ä¸€ä¸ªè¿è¡Œ Servlet å’Œ JSP çš„ Web åº”ç”¨è½¯ä»¶ï¼Œæ·±å— Java çˆ±å¥½è€…çš„å–œçˆ±ï¼Œè¾ƒä¸ºæµè¡Œï¼Œä½†æ˜¯ Tomcat å¤©ç”Ÿæ˜¯ä¸€ä¸ªé‡é‡çº§çš„ Web æœåŠ¡å™¨ï¼Œå¯¹é™æ€æ–‡ä»¶å’Œé«˜å¹¶å‘çš„å¤„ç†æ¯”è¾ƒå¼±ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_3-apache"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-apache"}},[t._v("#")]),t._v(" 3ï¼‰Apache")]),t._v(" "),a("p",[t._v("å®ƒå‡ºç°çš„æ—¶é—´å¤ªä¹…äº†ï¼Œåœ¨å…¶å…´èµ·çš„å¹´ä»£äº’è”ç½‘äº§ä¸šè§„æ¨¡è¿œä¸å¦‚ä»Šå¤©ï¼Œå®ƒè¢«è®¾è®¡æˆä¸€ä¸ªé‡é‡çº§çš„ã€ä¸æ”¯æŒé«˜å¹¶å‘çš„ Web æœåŠ¡å™¨ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_4-lighttpd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-lighttpd"}},[t._v("#")]),t._v(" 4ï¼‰Lighttpd")]),t._v(" "),a("p",[t._v("å®ƒå’Œ Nginx ä¸€æ ·ï¼Œéƒ½æ˜¯è½»é‡çº§ã€é«˜æ€§èƒ½çš„ Web æœåŠ¡å™¨ï¼Œæ¬§ç¾çš„ä¸šç•Œå¼€å‘è€…æ¯”è¾ƒé’Ÿçˆ± Lighttpdï¼Œè€Œå›½å†…çš„å…¬å¸æ›´å¤šçš„é’ç Nginxã€‚")]),t._v(" "),a("p",[t._v("å…¶ä»–çš„æœåŠ¡å™¨è¿˜æœ‰ Google Serversï¼ŒWeblogic, Webshpere(IBM)...")]),t._v(" "),a("h4",{attrs:{id:"_5-nginx-ä¼˜ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-nginx-ä¼˜ç‚¹"}},[t._v("#")]),t._v(" 5ï¼‰Nginx ä¼˜ç‚¹")]),t._v(" "),a("ul",[a("li",[t._v("é€Ÿåº¦å¿«ï¼Œå¹¶å‘é«˜ï¼šNginx é‡‡ç”¨äº†å¤šè¿›ç¨‹å’Œ I/O å¤šè·¯å¤ç”¨(epoll)çš„åº•å±‚å®ç°")]),t._v(" "),a("li",[t._v("é…ç½®ç®€å•ï¼Œæ‰©å±•æ€§å¼º")]),t._v(" "),a("li",[t._v("é«˜å¯é æ€§ï¼šé‡‡ç”¨å¤šè¿›ç¨‹æ¨¡å¼è¿è¡Œï¼Œæœ‰ä¸€ä¸ª master ä¸»è¿›ç¨‹å’Œ N å¤šä¸ª worker è¿›ç¨‹")]),t._v(" "),a("li",[t._v("çƒ­éƒ¨ç½²ï¼šå¯ä»¥åœ¨ Nginx ä¸åœæ­¢çš„æƒ…å†µä¸‹ï¼Œå¯¹ Nginx è¿›è¡Œæ–‡ä»¶å‡çº§ã€æ›´æ–°é…ç½®å’Œæ›´æ¢æ—¥å¿—æ–‡ä»¶ç­‰åŠŸèƒ½")]),t._v(" "),a("li",[t._v("æˆæœ¬ä½ï¼ŒBSD è®¸å¯è¯")])]),t._v(" "),a("h3",{attrs:{id:"_1-4-nginx-åŠŸèƒ½ç‰¹æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-nginx-åŠŸèƒ½ç‰¹æ€§"}},[t._v("#")]),t._v(" 1.4 Nginx åŠŸèƒ½ç‰¹æ€§")]),t._v(" "),a("p",[t._v('å…¶åŸºæœ¬åŠŸèƒ½æœåŠ¡ä»å¤§ä½“ä¸Šå½’çº³ä¸º"åŸºæœ¬HTTPæœåŠ¡"ã€â€œé«˜çº§HTTPæœåŠ¡â€å’Œ"é‚®ä»¶æœåŠ¡"ç­‰ä¸‰å¤§ç±»ã€‚')]),t._v(" "),a("h4",{attrs:{id:"_1-4-1-nginx-å¸¸ç”¨çš„åŠŸèƒ½æ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-1-nginx-å¸¸ç”¨çš„åŠŸèƒ½æ¨¡å—"}},[t._v("#")]),t._v(" 1.4.1 Nginx å¸¸ç”¨çš„åŠŸèƒ½æ¨¡å—")]),t._v(" "),a("ul",[a("li",[t._v("é™æ€èµ„æºéƒ¨ç½²")]),t._v(" "),a("li",[t._v("Rewriteåœ°å€é‡å†™")]),t._v(" "),a("li",[t._v("åå‘ä»£ç†")]),t._v(" "),a("li",[t._v("è´Ÿè½½å‡è¡¡ï¼šè½®è¯¢ã€åŠ æƒè½®è¯¢ã€ip_hashã€url_hashã€fair")]),t._v(" "),a("li",[t._v("Web ç¼“å­˜")]),t._v(" "),a("li",[t._v("ç¯å¢ƒéƒ¨ç½²ï¼šé«˜å¯ç”¨çš„ç¯å¢ƒ")]),t._v(" "),a("li",[t._v("ç”¨æˆ·è®¤è¯æ¨¡å—")])]),t._v(" "),a("blockquote",[a("p",[t._v("è¿™äº›æ¨¡å—éœ€è¦é‡ç‚¹å­¦ä¹ ")])]),t._v(" "),a("h4",{attrs:{id:"_1-4-2-nginx-æ ¸å¿ƒç»„æˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-2-nginx-æ ¸å¿ƒç»„æˆ"}},[t._v("#")]),t._v(" 1.4.2 Nginx æ ¸å¿ƒç»„æˆ")]),t._v(" "),a("ul",[a("li",[t._v("nginx äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶")]),t._v(" "),a("li",[t._v("nginx.conf é…ç½®æ–‡ä»¶")]),t._v(" "),a("li",[t._v("error.log é”™è¯¯çš„æ—¥å¿—è®°å½•")]),t._v(" "),a("li",[t._v("access.log è®¿é—®æ—¥å¿—è®°å½•")])]),t._v(" "),a("h2",{attrs:{id:"_2-nginx-ç¯å¢ƒå‡†å¤‡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-nginx-ç¯å¢ƒå‡†å¤‡"}},[t._v("#")]),t._v(" 2. Nginx ç¯å¢ƒå‡†å¤‡")]),t._v(" "),a("h3",{attrs:{id:"_2-1-æºç å®‰è£…æ‰€éœ€çš„ç¯å¢ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-æºç å®‰è£…æ‰€éœ€çš„ç¯å¢ƒ"}},[t._v("#")]),t._v(" 2.1 æºç å®‰è£…æ‰€éœ€çš„ç¯å¢ƒ")]),t._v(" "),a("ul",[a("li",[t._v("gccï¼š"),a("code",[t._v("yum install -y gcc")])]),t._v(" "),a("li",[t._v("PCREï¼šæ­£åˆ™è¡¨è¾¾å¼åº“ï¼Œ"),a("code",[t._v("yum install -y pcre pcre-devel")])]),t._v(" "),a("li",[t._v("zlibï¼šæä¾›äº†å‹ç¼©ç®—æ³•ï¼Œ"),a("code",[t._v("yum install -y zlib zlib-devel")])]),t._v(" "),a("li",[t._v("OpenSSLï¼šç”¨äºå®‰å…¨é€šä¿¡ï¼Œ"),a("code",[t._v("yum install -y openssl openssl-devel")])])]),t._v(" "),a("p",[t._v("å»ºè®®å…³é—­é˜²ç«å¢™ï¼š")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("systemctl stop firewalld      å…³é—­è¿è¡Œçš„é˜²ç«å¢™ï¼Œç³»ç»Ÿé‡æ–°å¯åŠ¨åï¼Œé˜²ç«å¢™å°†é‡æ–°æ‰“å¼€\nsystemctl disable firewalld   æ°¸ä¹…å…³é—­é˜²ç«å¢™ï¼Œï¼Œç³»ç»Ÿé‡æ–°å¯åŠ¨åï¼Œé˜²ç«å¢™ä¾ç„¶å…³é—­\nsystemctl status firewalld\t æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("ç¡®è®¤åœç”¨ selinuxï¼š")]),t._v(" "),a("p",[t._v("è™½ç„¶ selinux ä¼šè®©ç³»ç»Ÿè·Ÿå®‰å…¨ï¼Œä½†å­¦ä¹  nginx ä¼šæœ‰å¾ˆå¤šè®¾ç½®ï¼Œå…³é—­å®ƒå¯ä»¥é˜²æ­¢è¶Ÿå‘ã€‚å¯ä»¥é€šè¿‡ "),a("code",[t._v("sestatus")]),t._v(" æŸ¥çœ‹çŠ¶æ€ï¼Œå¦‚æœä¸æ˜¯ disabled çŠ¶æ€çš„è¯ä»¬å¯ä»¥è®¾ç½® "),a("code",[t._v("SELINUX=disabled")]),t._v(" å¹¶é‡å¯ï¼š")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/selinux/config\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/1581419902873.png",alt:"1581419902873"}}),t._v(" "),a("h3",{attrs:{id:"_2-2-nginx-çš„æºç ç®€å•å®‰è£…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-nginx-çš„æºç ç®€å•å®‰è£…"}},[t._v("#")]),t._v(" 2.2 Nginx çš„æºç ç®€å•å®‰è£…")]),t._v(" "),a("ol",[a("li",[t._v("åœ¨å®˜ç½‘æ‰¾åˆ°æŸä¸ªç‰ˆæœ¬çš„ä¸‹è½½åœ°å€ï¼š")])]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" http://nginx.org/download/nginx-1.16.1.tar.gz\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("å»ºè®®å°†ä¸‹è½½çš„èµ„æºè¿›è¡ŒåŒ…ç®¡ç†")])]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p nginx/core\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" nginx-1.16.1.tar.gz nginx/core\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("è§£å‹ç¼©")])]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -xzf nginx-1.16.1.tar.gz\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("è¿›å…¥èµ„æºæ–‡ä»¶ï¼Œå‘ç° configure å¹¶æ‰§è¡Œ")])]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("./configure\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[t._v("ç¼–è¯‘å¹¶å®‰è£…")])]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("é»˜è®¤çš„å®‰è£…åœ°å€æ˜¯ "),a("code",[t._v("/usr/local/nginx")]),t._v("ï¼Œè¿›å…¥åæœ‰ä¸€ä¸ª "),a("code",[t._v("sbin")]),t._v(" æ–‡ä»¶å¤¹ï¼Œè¿›å…¥åå¯åŠ¨é‡Œé¢çš„ "),a("code",[t._v("nginx")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("./nginx\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("æ­¤æ—¶åœ¨æµè§ˆå™¨ä¸­è¾“å…¥æœåŠ¡å™¨çš„ URL ä¾¿å¯ä»¥çœ‹åˆ° Nginx çš„æ¬¢è¿é¡µé¢ã€‚å¦‚æœçœ‹ä¸åˆ°ï¼Œçœ‹ä¸€ä¸‹é˜²ç«å¢™å…³äº†æ²¡ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_2-3-yum-å®‰è£…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-yum-å®‰è£…"}},[t._v("#")]),t._v(" 2.3 yum å®‰è£…")]),t._v(" "),a("p",[t._v("è¿™é‡Œä¸å†ä»‹ç»")]),t._v(" "),a("h3",{attrs:{id:"_2-4-nginx-çš„æºç å¤æ‚å®‰è£…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-nginx-çš„æºç å¤æ‚å®‰è£…"}},[t._v("#")]),t._v(" 2.4 Nginx çš„æºç å¤æ‚å®‰è£…")]),t._v(" "),a("p",[t._v("ä¸ç®€å•å®‰è£…ä¸åŒçš„åœ°æ–¹åœ¨äºç¬¬ä¸€æ­¥çš„ "),a("code",[t._v("./configure")]),t._v("ï¼Œå®ƒå¯ä»¥æ‰‹åŠ¨åŠ ä¸Šç¼–è¯‘å‚æ•°æ¥è¿›è¡Œè®¾ç½®ï¼Œè¿™é‡Œè®²ä¸€ä¸‹æœ‰å“ªäº›å‚æ•°å¯ä»¥è¿›è¡Œè®¾ç½®")]),t._v(" "),a("p",[t._v("è¿™äº›é…ç½®å¤§è‡´åˆ†æˆä¸‰å¤§ç±»ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("PATHï¼Œæ˜¯å’Œè·¯å¾„ç›¸å…³çš„é…ç½®ä¿¡æ¯")]),t._v(" "),a("li",[t._v("withï¼Œæ˜¯å¯åŠ¨æ¨¡å—ï¼Œé€šå¸¸ç”¨äºæ·»åŠ ç¬¬ä¸‰æ–¹æ¨¡å—çš„æ”¯æŒï¼Œé»˜è®¤æ˜¯å…³é—­çš„")]),t._v(" "),a("li",[t._v("withoutï¼Œæ˜¯å…³é—­æ¨¡å—ï¼Œç”¨äºæ’é™¤æ‰ä¸€äº›æˆ‘ä»¬ä¸æƒ³ç”¨çš„æ¨¡å—ï¼Œé»˜è®¤æ˜¯å¼€å¯çš„")])]),t._v(" "),a("h4",{attrs:{id:"_2-4-1-ä¸€äº›ç®€å•çš„è·¯å¾„é…ç½®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-1-ä¸€äº›ç®€å•çš„è·¯å¾„é…ç½®"}},[t._v("#")]),t._v(" 2.4.1 ä¸€äº›ç®€å•çš„è·¯å¾„é…ç½®")]),t._v(" "),a("ul",[a("li",[t._v("â€“prefix=PATHï¼šæŒ‡å‘ Nginx çš„å®‰è£…ç›®å½•ï¼Œé»˜è®¤å€¼ä¸º/usr/local/nginx")]),t._v(" "),a("li",[t._v("--sbin-path=PATHï¼šæŒ‡å‘(æ‰§è¡Œ)ç¨‹åºæ–‡ä»¶(nginx)çš„è·¯å¾„,é»˜è®¤å€¼ä¸º"),a("code",[t._v("<prefix>/sbin/nginx")])]),t._v(" "),a("li",[t._v("--modules-path=PATHï¼šæŒ‡å‘ Nginx åŠ¨æ€æ¨¡å—å®‰è£…ç›®å½•ï¼Œé»˜è®¤å€¼ä¸º"),a("code",[t._v("<prefix>/modules")])]),t._v(" "),a("li",[t._v("--conf-path=PATHğŸ”¥ï¼šæŒ‡å‘é…ç½®æ–‡ä»¶(nginx.conf)çš„è·¯å¾„,é»˜è®¤å€¼ä¸º"),a("code",[t._v("<prefix>/conf/nginx.conf")])]),t._v(" "),a("li",[t._v("--error-log-path=PATHï¼šæŒ‡å‘é”™è¯¯æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„,é»˜è®¤å€¼ä¸º"),a("code",[t._v("prefix>/logs/error.log")])]),t._v(" "),a("li",[t._v("--http-log-path=PATHï¼šæŒ‡å‘è®¿é—®æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„,é»˜è®¤å€¼ä¸º"),a("code",[t._v("<prefix>/logs/access.log")])]),t._v(" "),a("li",[t._v("--pid-path=PATHï¼šæŒ‡å‘ Nginx å¯åŠ¨åè¿›è¡ŒIDçš„æ–‡ä»¶è·¯å¾„ï¼Œé»˜è®¤å€¼ä¸º"),a("code",[t._v("<prefix>/logs/nginx.pid")])]),t._v(" "),a("li",[t._v("--lock-path=PATHï¼šæŒ‡å‘ Nginx é”æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„,é»˜è®¤å€¼ä¸º"),a("code",[t._v("<prefix>/logs/nginx.lock")])])]),t._v(" "),a("p",[t._v("è¦æƒ³ä½¿ç”¨å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤ï¼š")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("./configure --prefix"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/nginx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--sbin-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/nginx/sbin/nginx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--modules-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/nginx/modules "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--conf-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/nginx/conf/nginx.conf "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--error-log-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/nginx/logs/error.log "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--http-log-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/nginx/logs/access.log "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--pid-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/nginx/logs/nginx.pid "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--lock-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/nginx/logs/nginx.lock\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("h4",{attrs:{id:"_2-4-2-å¸è½½ä¹‹å‰å®‰è£…çš„-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-2-å¸è½½ä¹‹å‰å®‰è£…çš„-nginx"}},[t._v("#")]),t._v(" 2.4.2 å¸è½½ä¹‹å‰å®‰è£…çš„ nginx")]),t._v(" "),a("ol",[a("li",[t._v("å°† nginx è¿›ç¨‹å…³é—­ï¼š"),a("code",[t._v("./nginx -s stop")])]),t._v(" "),a("li",[t._v("å°†å®‰è£…çš„ nginx è¿›è¡Œåˆ é™¤ï¼š"),a("code",[t._v("rm -rf /usr/local/nginx")])]),t._v(" "),a("li",[t._v("å°†å®‰è£…åŒ…ä¹‹å‰ç¼–è¯‘çš„ç¯å¢ƒæ¸…é™¤æ‰ï¼š")])]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~/nginx/core/nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å›åˆ°è§£å‹çš„å®‰è£…åŒ…é‡Œé¢")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" clean\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"_2-4-3-å¸è½½åé‡æ–°å®‰è£…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-3-å¸è½½åé‡æ–°å®‰è£…"}},[t._v("#")]),t._v(" 2.4.3 å¸è½½åé‡æ–°å®‰è£…")]),t._v(" "),a("p",[t._v("ä¸ç®€å•å®‰è£…çš„è¿‡ç¨‹ä¸€æ ·ï¼Œåªæ˜¯åœ¨è¿è¡Œ "),a("code",[t._v("configure")]),t._v(" æ­¥éª¤ä¸­åŠ å…¥ 2.4.1 èŠ‚çš„å‚æ•°é…ç½®ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_2-5-nginx-ç›®å½•ç»“æ„åˆ†æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-nginx-ç›®å½•ç»“æ„åˆ†æ"}},[t._v("#")]),t._v(" 2.5 Nginx ç›®å½•ç»“æ„åˆ†æ")]),t._v(" "),a("blockquote",[a("p",[t._v("tree å·¥å…·å¯ä»¥æ–¹ä¾¿æŸ¥çœ‹ Centos ç³»ç»Ÿä¸Šçš„ç›®å½•ç»“æ„ï¼Œå¯ä»¥é€šè¿‡ "),a("code",[t._v("yum install -y tree")]),t._v(" æ¥å®‰è£…ã€‚")])]),t._v(" "),a("p",[a("code",[t._v("tree /usr/local/nginx")]),t._v(" æŸ¥çœ‹ç›®å½•ç»“æ„ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/1581439634265.png",alt:"1581439634265"}}),t._v(" "),a("ul",[a("li",[t._v("confï¼šå­˜æ”¾ nginx æ‰€æœ‰é…ç½®æ–‡ä»¶çš„ç›®å½•")])]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("CGI")]),t._v(" "),a("p",[t._v("CGIï¼ˆCommon Gateway Interfaceï¼‰é€šç”¨ç½‘å…³"),a("strong",[t._v("æ¥å£")]),t._v("ï¼Œä¸»è¦è§£å†³çš„é—®é¢˜æ˜¯ä»å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªè¯·æ±‚å’Œæ•°æ®ï¼ŒæœåŠ¡ç«¯è·å–åˆ°è¯·æ±‚å’Œæ•°æ®åå¯ä»¥è°ƒç”¨è°ƒç”¨ CGI "),a("strong",[t._v("ç¨‹åº")]),t._v("å¤„ç†åŠç›¸åº”ç»“æœç»™å®¢æˆ·ç«¯çš„ä¸€ç§æ ‡å‡†è§„èŒƒã€‚CGI ç¨‹åºå®ç°äº† CGI æ¥å£ã€‚")])]),t._v(" "),a("p",[t._v("ç”±äº CGI æ•ˆç‡è¾ƒä½ï¼Œå› æ­¤åˆæœ‰äº† fastcgiã€uwcgi ç­‰ã€‚åœ¨ conf é‡Œé¢æœ‰å¾ˆå¤šä»¥ "),a("code",[t._v(".default")]),t._v(" ç»“å°¾çš„æ–‡ä»¶ï¼Œå®ƒæ˜¯ä¸å¸¦ default çš„æ–‡ä»¶çš„ä¸€ä¸ªå¤‡ä»½ã€‚")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("koi-utfã€koi-winã€win-utf æ˜¯ä¸ç¼–ç è½¬æ¢ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®ç°ä»ä¸€ç§ç¼–ç è½¬æ¢åˆ°å¦ä¸€ç§ç¼–ç ")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("mime.types")]),t._v("ï¼šè®°å½•çš„æ˜¯ HTTP åè®®ä¸­çš„ Content-Type çš„å€¼å’Œæ–‡ä»¶åç¼€åçš„å¯¹åº”å…³ç³»")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("nginx.conf")]),t._v("ï¼šNginx çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œéå¸¸é‡è¦ï¼Œä¹Ÿæ˜¯å­¦ä¹ é‡ç‚¹ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("html é‡Œé¢æœ‰è‡ªå¸¦çš„ä¸¤ä¸ªé™æ€çš„ html é¡µé¢ï¼Œindex.html æ˜¯æˆåŠŸè®¿é—®çš„é»˜è®¤é¦–é¡µï¼Œ50x.html æ˜¯è®¿é—®å¤±è´¥åçš„å¤±è´¥é¡µé¢ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("logs ç›®å½•ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("access.logï¼šè®¿é—®æ—¥å¿—")]),t._v(" "),a("li",[t._v("error.logï¼šé”™è¯¯æ—¥å¿—")]),t._v(" "),a("li",[t._v("nginx.pidï¼šnginx è¿›ç¨‹çš„ PID")])])]),t._v(" "),a("li",[a("p",[t._v("sbinï¼šå­˜æ”¾æ‰§è¡Œç¨‹åºæ–‡ä»¶ nginxï¼Œä»–å¯ä»¥ç”¨æ¥æ§åˆ¶ nginx çš„å¯åŠ¨å’Œåœæ­¢ç­‰ç›¸å…³çš„å‘½ä»¤ã€‚")])])]),t._v(" "),a("h3",{attrs:{id:"_2-6-nginx-æœåŠ¡å™¨å¯åœå‘½ä»¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-nginx-æœåŠ¡å™¨å¯åœå‘½ä»¤"}},[t._v("#")]),t._v(" 2.6 Nginx æœåŠ¡å™¨å¯åœå‘½ä»¤")]),t._v(" "),a("p",[t._v("æ¥ä¸‹æ¥æˆ‘ä»¬è¦å­¦ä¹ çš„æ˜¯å¦‚ä½•å¯åŠ¨ã€é‡å¯å’Œåœæ­¢ Nginx çš„æœåŠ¡ã€‚æœ‰å¤šç§æ–¹å¼ï¼Œæˆ‘ä»¬åªå­¦ä¹ ä¸¤ç§ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Nginx æœåŠ¡çš„ä¿¡å·æ§åˆ¶")]),t._v(" "),a("li",[t._v("Nginx çš„å‘½ä»¤è¡Œæ§åˆ¶ã€æ—¥å¸¸å¼€å‘å¸¸ç”¨ã€‘")])]),t._v(" "),a("h4",{attrs:{id:"_2-6-1-nginx-æœåŠ¡çš„ä¿¡å·æ§åˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-1-nginx-æœåŠ¡çš„ä¿¡å·æ§åˆ¶"}},[t._v("#")]),t._v(" 2.6.1 Nginx æœåŠ¡çš„ä¿¡å·æ§åˆ¶")]),t._v(" "),a("p",[t._v("Nginx "),a("strong",[t._v("é»˜è®¤é‡‡ç”¨çš„æ˜¯å¤šè¿›ç¨‹çš„æ–¹å¼æ¥å·¥ä½œ")]),t._v("çš„ï¼Œå¯ä»¥é€šè¿‡ "),a("code",[t._v("ps -ef | grep nginx")]),t._v(" æ¥æŸ¥çœ‹å®ƒçš„è¿›ç¨‹ï¼š")]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20220427124058332.png",alt:"image-20220427124058332"}}),t._v(" "),a("p",[t._v("å¯ä»¥çœ‹åˆ° nginx è¿›ç¨‹"),a("strong",[t._v("åŒ…å«ä¸€ä¸ª master è¿›ç¨‹ä¸å¤šä¸ª worker è¿›ç¨‹")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("master è¿›ç¨‹ä¸»è¦ç”¨æ¥ç®¡ç†workerè¿›ç¨‹ï¼ŒåŒ…å«æ¥æ”¶å¤–ç•Œçš„ä¿¡æ¯ï¼Œå¹¶å°†æ¥æ”¶åˆ°çš„ä¿¡å·å‘é€ç»™å„ä¸ªworkerè¿›ç¨‹ï¼Œç›‘æ§workerè¿›ç¨‹çš„çŠ¶æ€ï¼Œå½“workerè¿›ç¨‹å‡ºç°å¼‚å¸¸é€€å‡ºåï¼Œä¼šè‡ªåŠ¨é‡æ–°å¯åŠ¨æ–°çš„workerè¿›ç¨‹ã€‚")]),t._v(" "),a("li",[t._v("workerè¿›ç¨‹åˆ™æ˜¯ä¸“é—¨ç”¨æ¥å¤„ç†ç”¨æˆ·è¯·æ±‚çš„ï¼Œå„ä¸ªworkerè¿›ç¨‹ä¹‹é—´æ˜¯å¹³ç­‰çš„å¹¶ä¸”ç›¸äº’ç‹¬ç«‹ï¼Œå¤„ç†è¯·æ±‚çš„æœºä¼šä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚")])]),t._v(" "),a("img",{staticStyle:{zoom:"60%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/1581444603231.png",alt:"1581444603231"}}),t._v(" "),a("p",[t._v("æˆ‘ä»¬ä½œä¸ºç®¡ç†å‘˜ï¼Œåªéœ€ç»™ master å‘é€ä¿¡å·å°±èƒ½æ§åˆ¶ nginxã€‚è¿™éœ€è¦ master çš„è¿›ç¨‹ pid å’Œä¿¡å·ã€‚")]),t._v(" "),a("h5",{attrs:{id:"å¦‚ä½•å¾—çŸ¥-master-çš„-pid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•å¾—çŸ¥-master-çš„-pid"}},[t._v("#")]),t._v(" å¦‚ä½•å¾—çŸ¥ master çš„ pidï¼Ÿ")]),t._v(" "),a("ul",[a("li",[t._v("æ–¹å¼ 1ï¼š"),a("code",[t._v("ps -ef | grep nginx")])]),t._v(" "),a("li",[t._v("æ–¹å¼ 2ï¼šæŸ¥çœ‹ nginx ç›®å½•ä¸‹çš„ nginx.pid æ–‡ä»¶")])]),t._v(" "),a("h5",{attrs:{id:"æœ‰å“ªäº›ä¿¡å·"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æœ‰å“ªäº›ä¿¡å·"}},[t._v("#")]),t._v(" æœ‰å“ªäº›ä¿¡å·ï¼Ÿ")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("ä¿¡å·")]),t._v(" "),a("th",[t._v("ä½œç”¨")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("TERM/INT")]),t._v(" "),a("td",[t._v("ç«‹å³å…³é—­æ•´ä¸ªæœåŠ¡")])]),t._v(" "),a("tr",[a("td",[t._v("QUIT")]),t._v(" "),a("td",[t._v('"ä¼˜é›…"åœ°å…³é—­æ•´ä¸ªæœåŠ¡')])]),t._v(" "),a("tr",[a("td",[t._v("HUP")]),t._v(" "),a("td",[t._v("é‡è¯»é…ç½®æ–‡ä»¶å¹¶ä½¿ç”¨æœåŠ¡å¯¹æ–°é…ç½®é¡¹ç”Ÿæ•ˆ")])]),t._v(" "),a("tr",[a("td",[t._v("USR1")]),t._v(" "),a("td",[t._v("é‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ¥è¿›è¡Œæ—¥å¿—åˆ‡å‰²")])]),t._v(" "),a("tr",[a("td",[t._v("USR2")]),t._v(" "),a("td",[t._v("å¹³æ»‘å‡çº§åˆ°æœ€æ–°ç‰ˆçš„ nginxï¼Œä¼šé‡å¯ master å’Œ workerã€‚"),a("strong",[t._v("ç”¨äºåœ¨ä¿æŒ nginx æœåŠ¡å™¨ä¸é‡æ–°å¯åŠ¨çš„æƒ…å†µä¸‹å‡çº§ nginx")]),t._v("ã€‚")])]),t._v(" "),a("tr",[a("td",[t._v("WINCH")]),t._v(" "),a("td",[t._v("è®©æ‰€æœ‰ work è¿›ç¨‹ä¸å†æ¥æ”¶å¤„ç†æ–°è¿æ¥ï¼Œç›¸å½“äºç»™ work è¿›ç¨‹å‘é€ QUIT æŒ‡ä»¤ã€‚æ³¨æ„ master ä¸ä¼šè¢«å…³æ‰ã€‚")])])])]),t._v(" "),a("p",[t._v("è°ƒç”¨å‘½ä»¤ä¸º "),a("code",[t._v("kill -signal PID")])]),t._v(" "),a("h4",{attrs:{id:"_2-6-2-nginx-çš„å‘½ä»¤è¡Œæ§åˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-2-nginx-çš„å‘½ä»¤è¡Œæ§åˆ¶"}},[t._v("#")]),t._v(" 2.6.2 Nginx çš„å‘½ä»¤è¡Œæ§åˆ¶")]),t._v(" "),a("p",[t._v("æ­¤æ–¹å¼æ˜¯é€šè¿‡ "),a("code",[t._v("sbin")]),t._v(" ä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶ "),a("code",[t._v("nginx")]),t._v(" æ¥è¿›è¡Œ Nginx çŠ¶æ€çš„æ§åˆ¶ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ "),a("code",[t._v("nginx -h")]),t._v(" æ¥æŸ¥çœ‹éƒ½æœ‰å“ªäº›å‚æ•°å¯ä»¥ç”¨ï¼š")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@hspEdu01 sbin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./nginx -h")]),t._v("\nnginx version: nginx/1.16.1\nUsage: nginx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-?hvVtTq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-s signal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-c filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-p prefix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-g directives"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nOptions:\n  -?,-h         "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" this "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v("\n  -v            "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" show version and "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n  -V            "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" show version and configure options "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n  -t            "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" configuration and "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n  -T            "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" configuration, dump it and "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n  -q            "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" suppress non-error messages during configuration testing\n  -s signal     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" send signal to a master process: stop, quit, reopen, reload\n  -p prefix     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" prefix path "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default: /usr/local/nginx/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  -c filename   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" configuration "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default: /usr/local/nginx/conf/nginx.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  -g directives "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" global directives out of configuration "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("ul",[a("li",[t._v("-sï¼šsignal ä¿¡å·ï¼Œåé¢å¯ä»¥è·Ÿï¼š\n"),a("ul",[a("li",[t._v("stopï¼šå¿«é€Ÿå…³é—­ï¼Œç±»ä¼¼äº TERM/INT ä¿¡å·çš„ä½œç”¨")]),t._v(" "),a("li",[t._v("quitï¼šä¼˜é›…çš„å…³é—­ï¼Œç±»ä¼¼äº QUIT ä¿¡å·çš„ä½œç”¨")]),t._v(" "),a("li",[t._v("reopenï¼šé‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ç±»ä¼¼äº USR1 ä¿¡å·çš„ä½œç”¨")]),t._v(" "),a("li",[t._v("reloadï¼šç±»ä¼¼äºHUPä¿¡å·çš„ä½œç”¨")])])]),t._v(" "),a("li",[t._v("-tï¼šæµ‹è¯• nginx çš„é…ç½®æ–‡ä»¶è¯­æ³•æ˜¯å¦æ­£ç¡®å¹¶é€€å‡º")])]),t._v(" "),a("h3",{attrs:{id:"_2-7-nginx-æœåŠ¡å™¨ç‰ˆæœ¬å‡çº§å’Œæ–°å¢æ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-nginx-æœåŠ¡å™¨ç‰ˆæœ¬å‡çº§å’Œæ–°å¢æ¨¡å—"}},[t._v("#")]),t._v(" 2.7 Nginx æœåŠ¡å™¨ç‰ˆæœ¬å‡çº§å’Œæ–°å¢æ¨¡å—")]),t._v(" "),a("p",[t._v("æœ€ç®€å•çš„åšæ³•æ˜¯åœæ‰å½“å‰ nginx æœåŠ¡ï¼Œç„¶åå¼€ä¸€ä¸ªæ–°çš„ã€‚ä½†è¿™æ ·ä¼šå¯¼è‡´ä¸€æ®µæ—¶é—´å†…ç”¨æˆ·æ— æ³•è®¿é—®æœåŠ¡å™¨ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦ç”¨åˆ° nginx æœåŠ¡å™¨æä¾›çš„å¹³æ»‘å‡çº§åŠŸèƒ½ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("éœ€æ±‚")]),t._v("ï¼šNginx çš„ç‰ˆæœ¬æœ€å¼€å§‹ä½¿ç”¨çš„æ˜¯ Nginx-1.14.2ï¼Œç”±äºæœåŠ¡å‡çº§ï¼Œéœ€è¦å°† Nginx çš„ç‰ˆæœ¬å‡çº§åˆ° Nginx-1.16.1,è¦æ±‚ Nginx ä¸èƒ½ä¸­æ–­æä¾›æœåŠ¡ã€‚")]),t._v(" "),a("p",[t._v("æœ‰ä¸¤ç§å‡çº§æ–¹å¼ï¼šä½¿ç”¨ nginx æœåŠ¡ä¿¡å·å®Œæˆ nginx å‡çº§ï¼›ä½¿ç”¨ nginx å®‰è£…ç›®å½•çš„ make å‘½ä»¤å®Œæˆå‡çº§ã€‚è¿™é‡Œä¸å†è¯¦ç»†ä»‹ç»ã€‚")]),t._v(" "),a("h2",{attrs:{id:"_3-nginx-æ ¸å¿ƒé…ç½®æ–‡ä»¶ç»“æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-nginx-æ ¸å¿ƒé…ç½®æ–‡ä»¶ç»“æ„"}},[t._v("#")]),t._v(" 3. Nginx æ ¸å¿ƒé…ç½®æ–‡ä»¶ç»“æ„")]),t._v(" "),a("p",[t._v("é»˜è®¤åœ¨ "),a("code",[t._v("/usr/local/nginx/conf/nginx.conf")]),t._v("ï¼Œè¿™ä¸€èŠ‚æˆ‘ä»¬å­¦ä¹ ä¸€ä¸‹ nginx.conf çš„å†…å®¹å’ŒåŸºæœ¬é…ç½®æ–¹æ³•ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹å®ƒé‡Œé¢çš„å†…å®¹ï¼ˆåˆ æ‰äº†æ³¨é‡Šä¿¡æ¯ï¼‰ï¼š")]),t._v(" "),a("div",{staticClass:"language-nginx line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("worker_processes")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("events")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("worker_connections")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("http")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("include")]),t._v("       mime.types")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default_type")]),t._v("  application/octet-stream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sendfile")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("on")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("keepalive_timeout")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("65")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("listen")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server_name")]),t._v("  localhost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" /")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("root")]),t._v("   html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("index")]),t._v("  index.html index.htm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("error_page")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("502")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("503")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("504")]),t._v("  /50x.html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" = /50x.html")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("root")]),t._v("   html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br")])]),a("ul",[a("li",[t._v("æ ¼å¼å¤§éƒ½æ˜¯ "),a("code",[t._v("æŒ‡ä»¤å æŒ‡ä»¤å€¼")])]),t._v(" "),a("li",[t._v("æœ€å¤–å±‚æ˜¯"),a("strong",[t._v("å…¨å±€å—")]),t._v("ï¼Œä¸»è¦è®¾ç½® Nginx æœåŠ¡å™¨æ•´ä½“è¿è¡Œçš„é…ç½®æŒ‡ä»¤")]),t._v(" "),a("li",[a("strong",[t._v("events å—")]),t._v("ï¼Œç”¨äºé…ç½®ä¸ç”¨æˆ·çš„ç½‘ç»œè¿æ¥ï¼Œè¿™ä¸€éƒ¨åˆ†å¯¹ Nginx æœåŠ¡å™¨çš„æ€§èƒ½å½±å“è¾ƒå¤§")]),t._v(" "),a("li",[a("strong",[t._v("http å—")]),t._v("ï¼Œæ˜¯ Nginx æœåŠ¡å™¨é…ç½®ä¸­çš„é‡è¦éƒ¨åˆ†ã€‚é‡Œé¢å¯ä»¥é…ç½®å¤šä¸ª server  å—ï¼Œå®ƒæ˜¯ Nginx é…ç½®å’Œè™šæ‹Ÿä¸»æœºç›¸å…³çš„å†…å®¹ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("server å—")]),t._v("ï¼Œæœ‰ä¸€ä¸ª "),a("code",[t._v("listen")]),t._v(" å’Œ "),a("code",[t._v("server_name")]),t._v(" æŒ‡ä»¤ï¼Œè¡¨ç¤ºè¿™ä¸ª server å—æ‰€è¦æ‹¦æˆªçš„è¯·æ±‚ã€‚å½“è¯·æ±‚è¿‡æ¥åï¼Œå¤„ç†æ˜¯çœ‹ location å—ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("location å—")]),t._v("ï¼ŒåŸºäº Nginx æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚å­—ç¬¦ä¸²ä¸ location åé¢çš„å€¼è¿›è¡ŒåŒ¹é…ï¼Œå¯¹ç‰¹å®šè¯·æ±‚è¿›è¡Œå¤„ç†ã€‚")])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("nginx.conf å°ç»“")]),t._v(" "),a("ul",[a("li",[t._v("nginx.conf é…ç½®æ–‡ä»¶ä¸­é»˜è®¤æœ‰ä¸‰å¤§å—ï¼šå…¨å±€å—ã€events å—ã€http å—")]),t._v(" "),a("li",[t._v("http å—ä¸­å¯ä»¥é…ç½®å¤šä¸ª server å—ï¼Œæ¯ä¸ª server å—åˆå¯ä»¥é…ç½®å¤šä¸ª location å—")])])]),t._v(" "),a("h3",{attrs:{id:"_3-1-å…¨å±€å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-å…¨å±€å—"}},[t._v("#")]),t._v(" 3.1 å…¨å±€å—")]),t._v(" "),a("h4",{attrs:{id:"_1-user-æŒ‡ä»¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-user-æŒ‡ä»¤"}},[t._v("#")]),t._v(" 1ï¼‰user æŒ‡ä»¤")]),t._v(" "),a("p",[t._v("ç”¨äºé…ç½®è¿è¡Œ Nginx æœåŠ¡å™¨çš„ worker è¿›ç¨‹çš„ç”¨æˆ·å’Œç”¨æˆ·ç»„ã€‚")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("è¯­æ³•")]),t._v(" "),a("th",[t._v("user user [group]")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("é»˜è®¤å€¼")]),t._v(" "),a("td",[t._v("nobody")])]),t._v(" "),a("tr",[a("td",[t._v("ä½ç½®")]),t._v(" "),a("td",[t._v("å…¨å±€å—")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("è¯¥å±æ€§ä¹Ÿå¯ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™æŒ‡å®šï¼Œè¯­æ³•å¦‚ä¸‹ "),a("code",[t._v("./configure --user=user --group=group")]),t._v("ï¼Œå¦‚æœä¸¤ä¸ªåœ°æ–¹éƒ½è¿›è¡Œäº†è®¾ç½®ï¼Œæœ€ç»ˆç”Ÿæ•ˆçš„æ˜¯é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®ã€‚")])]),t._v(" "),a("p",[t._v("æŒ‡ä»¤çš„ä½¿ç”¨æ­¥éª¤ï¼š")]),t._v(" "),a("p",[t._v("å…ˆé€šè¿‡ "),a("code",[t._v("useradd www")]),t._v(" æ–°åŠ ä¸€ä¸ªåä¸º www çš„ç”¨æˆ·ï¼Œç„¶ååœ¨ nginx.conf ä¸­åŠ ä¸Šï¼š")]),t._v(" "),a("div",{staticClass:"language-nginx line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[t._v("user www\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("å®Œæˆä¹‹ååœ¨ "),a("code",[t._v("./nginx -t")]),t._v(" æ£€æŸ¥ä¸€ä¸‹ï¼ŒæˆåŠŸåå¯ä»¥ "),a("code",[t._v("./nginx -s reload")]),t._v(" é‡æ–°åŠ è½½ã€‚")]),t._v(" "),a("p",[t._v("ä½¿ç”¨ user æŒ‡ä»¤å¯ä»¥æŒ‡å®šå¯åŠ¨è¿è¡Œå·¥ä½œè¿›ç¨‹çš„ç”¨æˆ·åŠç”¨æˆ·ç»„ï¼Œè¿™æ ·å¯¹äºç³»ç»Ÿçš„æƒé™è®¿é—®æ§åˆ¶çš„æ›´åŠ ç²¾ç»†ï¼Œä¹Ÿæ›´åŠ å®‰å…¨ã€‚æ¯”å¦‚ www çš„ nginx å·¥ä½œè¿›ç¨‹æ— æ³•è®¿é—® root çš„æ–‡ä»¶ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_2-work-process-æŒ‡ä»¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-work-process-æŒ‡ä»¤"}},[t._v("#")]),t._v(" 2ï¼‰work process æŒ‡ä»¤")]),t._v(" "),a("p",[a("strong",[t._v("master_process")]),t._v(" æŒ‡ä»¤ç”¨æ¥æŒ‡å®šæ˜¯å¦å¼€å¯å·¥ä½œè¿›ç¨‹ï¼ŒæŒ‡ä»¤å€¼ä¸º on/offï¼Œé»˜è®¤ onã€‚è¿™ä¸ªæŒ‡ä»¤ä¿®æ”¹åéœ€è¦é‡æ–°å¯åŠ¨ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("worker_processes")]),t._v(" æŒ‡ä»¤ç”¨äºé…ç½® Nginx ç”Ÿæˆå·¥ä½œè¿›ç¨‹çš„æ•°é‡ï¼Œè¿™ä¸ªæ˜¯ Nginx æœåŠ¡å™¨å®ç°å¹¶å‘å¤„ç†æœåŠ¡çš„å…³é”®æ‰€åœ¨ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("ç†è®ºä¸Šæ¥è¯´ workder process çš„å€¼è¶Šå¤§ï¼Œå¯ä»¥æ”¯æŒçš„å¹¶å‘å¤„ç†é‡ä¹Ÿè¶Šå¤šï¼Œä½†äº‹å®ä¸Šè¿™ä¸ªå€¼çš„è®¾å®šæ˜¯éœ€è¦å—åˆ°æ¥è‡ªæœåŠ¡å™¨è‡ªèº«çš„é™åˆ¶ï¼Œ"),a("strong",[t._v("å»ºè®®å°†è¯¥å€¼å’ŒæœåŠ¡å™¨ CPU çš„å†…æ ¸æ•°ä¿å­˜ä¸€è‡´")]),t._v("ã€‚")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("è¯­æ³•")]),t._v(" "),a("th",[t._v("worker_processes     num/auto;")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("é»˜è®¤å€¼")]),t._v(" "),a("td",[t._v("1")])]),t._v(" "),a("tr",[a("td",[t._v("ä½ç½®")]),t._v(" "),a("td",[t._v("å…¨å±€å—")])])])]),t._v(" "),a("h4",{attrs:{id:"_3-å…¶ä»–æŒ‡ä»¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-å…¶ä»–æŒ‡ä»¤"}},[t._v("#")]),t._v(" 3ï¼‰å…¶ä»–æŒ‡ä»¤")]),t._v(" "),a("p",[t._v("ğŸ–Š "),a("strong",[t._v("daemon")]),t._v("ï¼šè®¾å®š Nginx æ˜¯å¦ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼å¯åŠ¨ã€‚")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("è¯­æ³•")]),t._v(" "),a("th",[t._v("daemon on|off;")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("é»˜è®¤å€¼")]),t._v(" "),a("td",[t._v("daemon on;")])]),t._v(" "),a("tr",[a("td",[t._v("ä½ç½®")]),t._v(" "),a("td",[t._v("å…¨å±€å—")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("å®ˆæŠ¤å¼è¿›ç¨‹æ˜¯linuxåå°æ‰§è¡Œçš„ä¸€ç§æœåŠ¡è¿›ç¨‹ï¼Œç‰¹ç‚¹æ˜¯"),a("strong",[t._v("ç‹¬ç«‹äºæ§åˆ¶ç»ˆç«¯ï¼Œä¸ä¼šéšç€ç»ˆç«¯å…³é—­è€Œåœæ­¢")]),t._v("ã€‚")])]),t._v(" "),a("p",[t._v("ğŸ–Š "),a("strong",[t._v("pid")]),t._v("ï¼šç”¨æ¥é…ç½® Nginx å½“å‰ master è¿›ç¨‹çš„ pid å­˜å‚¨çš„æ–‡ä»¶è·¯å¾„ã€‚")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("è¯­æ³•")]),t._v(" "),a("th",[t._v("pid file;")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("é»˜è®¤å€¼")]),t._v(" "),a("td",[t._v("é»˜è®¤ä¸º /usr/local/nginx/logs/nginx.pid")])]),t._v(" "),a("tr",[a("td",[t._v("ä½ç½®")]),t._v(" "),a("td",[t._v("å…¨å±€å—")])])])]),t._v(" "),a("p",[t._v("è¯¥å±æ€§å¯ä»¥é€šè¿‡ "),a("code",[t._v("./configure --pid-path=PATH")]),t._v(" æ¥æŒ‡å®š")]),t._v(" "),a("p",[t._v("ğŸ–Š "),a("strong",[t._v("error_log")]),t._v("ï¼šç”¨æ¥é…ç½® Nginx çš„é”™è¯¯æ—¥å¿—å­˜æ”¾è·¯å¾„")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("è¯­æ³•")]),t._v(" "),a("th",[t._v("error_log  file [æ—¥å¿—çº§åˆ«];")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("é»˜è®¤å€¼")]),t._v(" "),a("td",[t._v("error_log logs/error.log error;")])]),t._v(" "),a("tr",[a("td",[t._v("ä½ç½®")]),t._v(" "),a("td",[t._v("å…¨å±€å—ã€httpã€serverã€location")])])])]),t._v(" "),a("p",[t._v("è¯¥å±æ€§å¯ä»¥é€šè¿‡ "),a("code",[t._v("./configure --error-log-path=PATH")]),t._v(" æ¥æŒ‡å®šã€‚")]),t._v(" "),a("p",[t._v("å…¶ä¸­æ—¥å¿—çº§åˆ«çš„å€¼æœ‰ debug|info|notice|warn|error|crit|alert|emergï¼Œå»ºè®®å¤§å®¶è®¾ç½®çš„æ—¶å€™ä¸è¦è®¾ç½®æˆ info ä»¥ä¸‹çš„ç­‰çº§ï¼Œå¦åˆ™ä¼šå¸¦æ¥å¤§é‡çš„ç£ç›˜ I/O æ¶ˆè€—ã€‚")]),t._v(" "),a("p",[t._v("ğŸ–Š "),a("strong",[t._v("include")]),t._v("ï¼šç”¨æ¥å¼•å…¥å…¶ä»–é…ç½®æ–‡ä»¶ï¼Œä½¿ Nginx çš„é…ç½®æ›´åŠ çµæ´»")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("è¯­æ³•")]),t._v(" "),a("th",[t._v("include file;")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("é»˜è®¤å€¼")]),t._v(" "),a("td",[t._v("æ— ")])]),t._v(" "),a("tr",[a("td",[t._v("ä½ç½®")]),t._v(" "),a("td",[t._v("any")])])])]),t._v(" "),a("h3",{attrs:{id:"_3-2-events-å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-events-å—"}},[t._v("#")]),t._v(" 3.2 events å—")]),t._v(" "),a("h4",{attrs:{id:"_1-accept-mutex"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-accept-mutex"}},[t._v("#")]),t._v(" 1ï¼‰accept_mutex")]),t._v(" "),a("p",[t._v("ç”¨æ¥è®¾ç½® Nginx ç½‘ç»œè¿æ¥åºåˆ—åŒ–")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("è¯­æ³•")]),t._v(" "),a("th",[t._v("accept_mutex on|off;")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("é»˜è®¤å€¼")]),t._v(" "),a("td",[t._v("accept_mutex on;")])]),t._v(" "),a("tr",[a("td",[t._v("ä½ç½®")]),t._v(" "),a("td",[t._v("events")])])])]),t._v(" "),a("p",[t._v('è¿™ä¸ªé…ç½®ä¸»è¦å¯ä»¥ç”¨æ¥è§£å†³å¸¸è¯´çš„"'),a("strong",[t._v("æƒŠç¾¤")]),t._v('"é—®é¢˜ã€‚å¤§è‡´æ˜¯è¯´ï¼Œå¦‚æœè®¾ç½®ä¸º offï¼Œå½“å®¢æˆ·ç«¯å‘æ¥ä¸€ä¸ªè¯·æ±‚ï¼Œé‚£æ‰€æœ‰ worker åŒæ—¶è¢«æƒŠé†’å¹¶ç«äº‰ï¼Œæœ€ç»ˆåªä¼šæœ‰ä¸€ä¸ªè¿›ç¨‹å¯ä»¥è·å–åˆ°è¿æ¥ï¼Œå¦‚æœæ¯æ¬¡å”¤é†’çš„è¿›ç¨‹æ•°ç›®å¤ªå¤šï¼Œå°±ä¼šå½±å“åˆ° nginx çš„æ•´ä½“æ€§èƒ½ã€‚å¦‚æœè®¾ç½®ä¸º onï¼Œå°†ä¼šå¯¹å¤šä¸ª nginx è¿›ç¨‹æ¥æ”¶è¿æ¥è¿›è¡Œåºåˆ—å·ï¼Œä¸€ä¸ªä¸ªæ¥å”¤é†’æ¥æ”¶ï¼Œé˜²æ­¢äº†å¤šä¸ªè¿›ç¨‹å¯¹è¿æ¥çš„äº‰æŠ¢ã€‚')]),t._v(" "),a("img",{staticStyle:{zoom:"33%"},attrs:{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/1581566971955.png",alt:"1581566971955"}}),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("å…·ä½“é€‰ on è¿˜æ˜¯ off å–å†³äºå…·ä½“çš„ç”Ÿäº§ç¯å¢ƒ")]),t._v("ï¼Œå½“å¤šä¸ªéª¨å¤´ä¸¢è¿‡æ¥æ—¶ï¼Œè®¾ç½®ä¸º off ä»è€ŒåŒæ—¶æƒŠé†’æ‰€æœ‰ç‹—æ¥ç«äº‰åè€Œæ•ˆç‡ä¼šé«˜ã€‚")])]),t._v(" "),a("h4",{attrs:{id:"_2-multi-accept"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-multi-accept"}},[t._v("#")]),t._v(" 2ï¼‰multi_accept")]),t._v(" "),a("p",[t._v("ç”¨æ¥è®¾ç½®æ˜¯å¦å…è®¸åŒæ—¶æ¥æ”¶å¤šä¸ªç½‘ç»œè¿æ¥")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("è¯­æ³•")]),t._v(" "),a("th",[t._v("multi_accept on|off;")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("é»˜è®¤å€¼")]),t._v(" "),a("td",[t._v("multi_accept off;")])]),t._v(" "),a("tr",[a("td",[t._v("ä½ç½®")]),t._v(" "),a("td",[t._v("events")])])])]),t._v(" "),a("p",[t._v("å¦‚æœ multi_accept è¢«ç¦æ­¢äº†ï¼Œnginx ä¸€ä¸ªå·¥ä½œè¿›ç¨‹åªèƒ½åŒæ—¶æ¥å—ä¸€ä¸ªæ–°çš„è¿æ¥ã€‚å¦åˆ™ï¼Œä¸€ä¸ªå·¥ä½œè¿›ç¨‹å¯ä»¥åŒæ—¶æ¥å—æ‰€æœ‰çš„æ–°è¿æ¥ã€‚"),a("strong",[t._v("å»ºè®®è®¾ä¸º on")]),t._v("ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_3-worker-connections"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-worker-connections"}},[t._v("#")]),t._v(" 3ï¼‰worker_connections")]),t._v(" "),a("p",[t._v("ç”¨æ¥é…ç½®å•ä¸ª worker è¿›ç¨‹æœ€å¤§çš„è¿æ¥æ•°")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("è¯­æ³•")]),t._v(" "),a("th",[t._v("worker_connections number;")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("é»˜è®¤å€¼")]),t._v(" "),a("td",[t._v("worker_commections 512;")])]),t._v(" "),a("tr",[a("td",[t._v("ä½ç½®")]),t._v(" "),a("td",[t._v("events")])])])]),t._v(" "),a("p",[t._v("è¿™é‡Œçš„è¿æ¥æ•°ä¸ä»…ä»…åŒ…æ‹¬å’Œå‰ç«¯ç”¨æˆ·å»ºç«‹çš„è¿æ¥æ•°ï¼Œè€Œæ˜¯åŒ…æ‹¬æ‰€æœ‰å¯èƒ½çš„è¿æ¥æ•°ã€‚å¦å¤–ï¼Œnumber å€¼ä¸èƒ½å¤§äºæ“ä½œç³»ç»Ÿæ”¯æŒæ‰“å¼€çš„æœ€å¤§æ–‡ä»¶å¥æŸ„æ•°é‡ã€‚")]),t._v(" "),a("h4",{attrs:{id:"_4-use"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-use"}},[t._v("#")]),t._v(" 4ï¼‰use")]),t._v(" "),a("p",[t._v("è®¾ç½® Nginx é€‰æ‹©å“ªç§äº‹ä»¶é©±åŠ¨æ¥å¤„ç†ç½‘ç»œæ¶ˆæ¯")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("è¯­æ³•")]),t._v(" "),a("th",[t._v("use  method;")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("é»˜è®¤å€¼")]),t._v(" "),a("td",[t._v("æ ¹æ®æ“ä½œç³»ç»Ÿå®š")])]),t._v(" "),a("tr",[a("td",[t._v("ä½ç½®")]),t._v(" "),a("td",[t._v("events")])])])]),t._v(" "),a("p",[t._v("æ³¨æ„ï¼šæ­¤å¤„æ‰€é€‰æ‹©äº‹ä»¶å¤„ç†æ¨¡å‹æ˜¯ Nginx ä¼˜åŒ–éƒ¨åˆ†çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œmethodçš„å¯é€‰å€¼æœ‰ select/poll/epoll/kqueue ç­‰ã€‚"),a("strong",[t._v("å»ºè®®è®¾ç½®ä¸º epoll")]),t._v("ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("Linux kernel åœ¨ 2.6 ä»¥ä¸Šæ‰æ”¯æŒ epoll å‡½æ•°ã€‚")])]),t._v(" "),a("h4",{attrs:{id:"_5-events-å—é…ç½®å®ä¾‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-events-å—é…ç½®å®ä¾‹"}},[t._v("#")]),t._v(" 5ï¼‰events å—é…ç½®å®ä¾‹")]),t._v(" "),a("p",[t._v("åœ¨ nginx.conf ä¸­é…ç½®ï¼š")]),t._v(" "),a("div",{staticClass:"language-nginx line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("events")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("accept_mutex")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("on")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("multi_accept")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("on")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("worker_commections")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" epoll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("å¯åŠ¨æµ‹è¯•ï¼š")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("./nginx -t\n./nginx -s reload\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"_3-3-http-å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-http-å—"}},[t._v("#")]),t._v(" 3.3 http å—")]),t._v(" "),a("h4",{attrs:{id:"_1-å®šä¹‰-mime-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-å®šä¹‰-mime-type"}},[t._v("#")]),t._v(" 1ï¼‰å®šä¹‰ MIME-Type")]),t._v(" "),a("p",[t._v("æµè§ˆå™¨ä¸­å¯ä»¥æ˜¾ç¤ºçš„å†…å®¹æœ‰ HTMLã€XMLã€GIF ç­‰ç§ç±»ç¹å¤šçš„æ–‡ä»¶ã€åª’ä½“ç­‰èµ„æºï¼Œ"),a("strong",[t._v("æµè§ˆå™¨ä¸ºäº†åŒºåˆ†è¿™äº›èµ„æºï¼Œå°±éœ€è¦ä½¿ç”¨ MIME Type")]),t._v("ã€‚æ‰€ä»¥è¯´ MIME Type æ˜¯ç½‘ç»œèµ„æºçš„åª’ä½“ç±»å‹ã€‚Nginx ä½œä¸ºwebæœåŠ¡å™¨ï¼Œä¹Ÿéœ€è¦èƒ½å¤Ÿè¯†åˆ«å‰ç«¯è¯·æ±‚çš„èµ„æºç±»å‹ã€‚")]),t._v(" "),a("p",[t._v("åœ¨ Nginx çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œé»˜è®¤æœ‰ä¸¤è¡Œé…ç½®ï¼š")]),t._v(" "),a("div",{staticClass:"language-nginx line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("include")]),t._v(" mime.types")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default_type")]),t._v(" application/octet-stream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("ul",[a("li",[t._v("mime.types æ–‡ä»¶è®°å½•äº†ä¸åŒçš„ MIME Type å’Œæ–‡ä»¶ç±»å‹çš„å¯¹åº”å…³ç³»")]),t._v(" "),a("li",[a("strong",[t._v("default_type")]),t._v(" æŒ‡ä»¤ç”¨æ¥é…ç½® Nginx å“åº”å‰ç«¯è¯·æ±‚é»˜è®¤çš„ MIME ç±»å‹ï¼š")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("è¯­æ³•")]),t._v(" "),a("th",[t._v("default_type mime-type;")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("é»˜è®¤å€¼")]),t._v(" "),a("td",[t._v("default_type text/plainï¼›")])]),t._v(" "),a("tr",[a("td",[t._v("ä½ç½®")]),t._v(" "),a("td",[t._v("httpã€serverã€location")])])])]),t._v(" "),a("p",[a("strong",[t._v("ç¤ºä¾‹")]),t._v("ï¼šæœ‰äº›æ—¶å€™è¯·æ±‚æŸäº›æ¥å£éœ€è¦è¿”å›æŒ‡å®šçš„æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œå¦‚æœé€»è¾‘éå¸¸ç®€å•æˆ–è€…å›ºå®šçš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ nginx å¿«é€Ÿå®ç°ï¼Œè¿™æ ·å°±ä¸ç”¨ç¼–å†™ç¨‹åºå“åº”è¯·æ±‚äº†ï¼š")]),t._v(" "),a("div",{staticClass:"language-nginx line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" /get_text")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è¿™é‡Œä¹Ÿå¯ä»¥è®¾ç½®æˆ text/plain")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default_type")]),t._v(" text/html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"This is nginx\'s text"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" /get_json")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default_type")]),t._v(" application/json")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{"name":"TOM","age":18}\'')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("h4",{attrs:{id:"_2-è‡ªå®šä¹‰æœåŠ¡æ—¥å¿—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-è‡ªå®šä¹‰æœåŠ¡æ—¥å¿—"}},[t._v("#")]),t._v(" 2ï¼‰è‡ªå®šä¹‰æœåŠ¡æ—¥å¿—")]),t._v(" "),a("p",[t._v("Nginx ä¸­æ—¥å¿—çš„ç±»å‹åˆ† access.logã€error.log")]),t._v(" "),a("ul",[a("li",[t._v("access.logï¼šç”¨æ¥è®°å½•ç”¨æˆ·æ‰€æœ‰çš„è®¿é—®è¯·æ±‚")]),t._v(" "),a("li",[t._v("error.logï¼šè®°å½• nginx æœ¬èº«è¿è¡Œæ—¶çš„é”™è¯¯ä¿¡æ¯ï¼Œä¸ä¼šè®°å½•ç”¨æˆ·çš„è®¿é—®è¯·æ±‚")])]),t._v(" "),a("p",[t._v("Nginx æœåŠ¡å™¨"),a("strong",[t._v("æ”¯æŒå¯¹æœåŠ¡æ—¥å¿—çš„æ ¼å¼ã€å¤§å°ã€è¾“å‡ºç­‰è¿›è¡Œè®¾ç½®")]),t._v("ï¼Œéœ€è¦ä½¿ç”¨åˆ°ä¸¤ä¸ªæŒ‡ä»¤ï¼Œåˆ†åˆ«æ˜¯ access_log å’Œ log_format æŒ‡ä»¤ã€‚")]),t._v(" "),a("p",[t._v("ğŸ–Š "),a("strong",[t._v("access_log æŒ‡ä»¤")]),t._v("ç”¨æ¥è®¾ç½®ç”¨æˆ·è®¿é—®æ—¥å¿—çš„ç›¸å…³å±æ€§")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("è¯­æ³•")]),t._v(" "),a("th",[t._v("access_log path[format[buffer=size]]")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("é»˜è®¤å€¼")]),t._v(" "),a("td",[t._v("access_log logs/access.log combined;")])]),t._v(" "),a("tr",[a("td",[t._v("ä½ç½®")]),t._v(" "),a("td",[a("code",[t._v("http")]),t._v(", "),a("code",[t._v("server")]),t._v(", "),a("code",[t._v("location")])])])])]),t._v(" "),a("p",[t._v("ğŸ–Š "),a("strong",[t._v("log_format æŒ‡ä»¤")]),t._v("ç”¨æ¥æŒ‡å®šæ—¥å¿—çš„è¾“å‡ºæ ¼å¼")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("è¯­æ³•")]),t._v(" "),a("th",[t._v("log_format name [escape=default|json|none] string....;")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("é»˜è®¤å€¼")]),t._v(" "),a("td",[t._v('log_format combined "...";')])]),t._v(" "),a("tr",[a("td",[t._v("ä½ç½®")]),t._v(" "),a("td",[t._v("http")])])])]),t._v(" "),a("h4",{attrs:{id:"_3-å…¶ä»–é…ç½®æŒ‡ä»¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-å…¶ä»–é…ç½®æŒ‡ä»¤"}},[t._v("#")]),t._v(" 3ï¼‰å…¶ä»–é…ç½®æŒ‡ä»¤")]),t._v(" "),a("p",[t._v("ğŸ–Š "),a("strong",[t._v("sendfile")]),t._v("ï¼šè®¾ç½® Nginx æœåŠ¡å™¨æ˜¯å¦ä½¿ç”¨ Linux å‡½æ•° "),a("code",[t._v("sendfile()")]),t._v(" ä¼ è¾“æ–‡ä»¶ï¼Œè¯¥å±æ€§å¯ä»¥å¤§å¤§æé«˜ Nginx å¤„ç†é™æ€èµ„æºçš„æ€§èƒ½ï¼Œ"),a("strong",[t._v("å»ºè®®ä¸º on")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("è¯­æ³•")]),t._v(" "),a("th",[t._v("sendfile on|offï¼›")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("é»˜è®¤å€¼")]),t._v(" "),a("td",[t._v("sendfile off;")])]),t._v(" "),a("tr",[a("td",[t._v("ä½ç½®")]),t._v(" "),a("td",[t._v("httpã€serverã€location")])])])]),t._v(" "),a("p",[t._v("ğŸ–Š "),a("strong",[t._v("keepalive_timeout")]),t._v("ï¼šè®¾ç½®é•¿è¿æ¥çš„è¶…æ—¶æ—¶é—´")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("è¯­æ³•")]),t._v(" "),a("th",[t._v("keepalive_timeout time;")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("é»˜è®¤å€¼")]),t._v(" "),a("td",[t._v("keepalive_timeout 75s;")])]),t._v(" "),a("tr",[a("td",[t._v("ä½ç½®")]),t._v(" "),a("td",[t._v("httpã€serverã€location")])])])]),t._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[t._v("ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ keepaliveï¼Ÿ")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬éƒ½çŸ¥é“ HTTP æ˜¯ä¸€ç§æ— çŠ¶æ€åè®®ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¸€ä¸ª TCP è¯·æ±‚ï¼ŒæœåŠ¡ç«¯å“åº”å®Œæ¯•åæ–­å¼€è¿æ¥ã€‚")]),t._v(" "),a("p",[t._v("å¦‚ä½•å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€å¤šä¸ªè¯·æ±‚ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦é‡æ–°åˆ›å»ºä¸€æ¬¡è¿æ¥ï¼Œæ•ˆç‡ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¤šï¼Œä½¿ç”¨ keepalive æ¨¡å¼ï¼Œå¯ä»¥å‘Šè¯‰æœåŠ¡å™¨ç«¯åœ¨å¤„ç†å®Œä¸€ä¸ªè¯·æ±‚åä¿æŒè¿™ä¸ª TCP è¿æ¥çš„æ‰“å¼€çŠ¶æ€ï¼Œè‹¥æ¥æ”¶åˆ°æ¥è‡ªè¿™ä¸ªå®¢æˆ·ç«¯çš„å…¶ä»–è¯·æ±‚ï¼ŒæœåŠ¡ç«¯å°±ä¼šåˆ©ç”¨è¿™ä¸ªæœªè¢«å…³é—­çš„è¿æ¥ï¼Œè€Œä¸éœ€è¦é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°è¿æ¥ï¼Œæå‡æ•ˆç‡ï¼Œä½†æ˜¯è¿™ä¸ªè¿æ¥ä¹Ÿä¸èƒ½ä¸€ç›´ä¿æŒï¼Œè¿™æ ·çš„è¯ï¼Œè¿æ¥å¦‚æœè¿‡å¤šï¼Œä¹Ÿä¼šæ˜¯æœåŠ¡ç«¯çš„æ€§èƒ½ä¸‹é™ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æˆ‘ä»¬è¿›è¡Œè®¾ç½®å…¶çš„è¶…æ—¶æ—¶é—´ã€‚")])]),t._v(" "),a("p",[t._v("ğŸ–Š "),a("strong",[t._v("keepalive_requests")]),t._v("ï¼šè®¾ç½®ä¸€ä¸ª keep-alive è¿æ¥ä½¿ç”¨çš„æ¬¡æ•°")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("è¯­æ³•")]),t._v(" "),a("th",[t._v("keepalive_requests number;")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("é»˜è®¤å€¼")]),t._v(" "),a("td",[t._v("keepalive_requests 100;")])]),t._v(" "),a("tr",[a("td",[t._v("ä½ç½®")]),t._v(" "),a("td",[t._v("httpã€serverã€location")])])])]),t._v(" "),a("h3",{attrs:{id:"_3-4-server-å—å’Œ-location-å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-server-å—å’Œ-location-å—"}},[t._v("#")]),t._v(" 3.4 server å—å’Œ location å—")]),t._v(" "),a("blockquote",[a("p",[t._v("è¿™éƒ¨åˆ†ä¼šåœ¨åé¢å¯¹ Nginx çš„åŠŸèƒ½è¿›è¡Œè¯¦ç»†è®²è§£æ—¶ä¼šç»§ç»­å­¦ä¹ ã€‚æœ¬èŠ‚æˆ‘ä»¬ä¸»è¦æ¥è®¤è¯†ä¸‹ Nginx é»˜è®¤çš„ nginx.conf ä¸­çš„ç›¸å…³å†…å®¹ï¼Œä»¥åŠ server å—ä¸ location å—åœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦æ³¨æ„çš„ä¸€äº›å†…å®¹ã€‚")])]),t._v(" "),a("div",{staticClass:"language-nginx line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("listen")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server_name")]),t._v("  localhost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" /")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("root")]),t._v("   html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("index")]),t._v("  index.html index.htm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n       \n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("error_page")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("502")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("503")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("504")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),t._v("  /50x.html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" = /50x.html")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("root")]),t._v("   html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("ul",[a("li",[t._v("location ä¸‹é¢çš„ "),a("code",[t._v("root")]),t._v(" æŒ‡ä»¤ä»£è¡¨èµ„æºæ‰€åœ¨çš„ç›®å½•ï¼Œ"),a("code",[t._v("index")]),t._v(" æŒ‡ä»¤å¯ä»¥è®¾ç½®å¤šä¸ªå€¼ï¼Œå®ƒä¼šä»å‰å¾€åç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªä¸ºæ­¢ã€‚")])])])}),[],!1,null,null,null);s.default=e.exports}}]);