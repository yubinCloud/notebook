<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>传输层 | notebook</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/notebook/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="学习笔记">
    <meta name="keywords" content="全栈学习笔记">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/notebook/assets/css/0.styles.1b58b254.css" as="style"><link rel="preload" href="/notebook/assets/js/app.2bf3b6c1.js" as="script"><link rel="preload" href="/notebook/assets/js/2.0ad58009.js" as="script"><link rel="preload" href="/notebook/assets/js/3.a80649d1.js" as="script"><link rel="preload" href="/notebook/assets/js/25.b12f24fe.js" as="script"><link rel="prefetch" href="/notebook/assets/js/10.99522837.js"><link rel="prefetch" href="/notebook/assets/js/100.e3b56889.js"><link rel="prefetch" href="/notebook/assets/js/101.6ea1d00b.js"><link rel="prefetch" href="/notebook/assets/js/102.eca9dfbd.js"><link rel="prefetch" href="/notebook/assets/js/103.6ea477d4.js"><link rel="prefetch" href="/notebook/assets/js/104.ac820d2b.js"><link rel="prefetch" href="/notebook/assets/js/105.58b259a8.js"><link rel="prefetch" href="/notebook/assets/js/106.a86005d0.js"><link rel="prefetch" href="/notebook/assets/js/107.7a79d36f.js"><link rel="prefetch" href="/notebook/assets/js/108.64404e25.js"><link rel="prefetch" href="/notebook/assets/js/109.75f12c0a.js"><link rel="prefetch" href="/notebook/assets/js/11.d26d59e4.js"><link rel="prefetch" href="/notebook/assets/js/110.1155fe36.js"><link rel="prefetch" href="/notebook/assets/js/111.bf8b5871.js"><link rel="prefetch" href="/notebook/assets/js/112.22833ceb.js"><link rel="prefetch" href="/notebook/assets/js/113.6a080233.js"><link rel="prefetch" href="/notebook/assets/js/114.35de9701.js"><link rel="prefetch" href="/notebook/assets/js/115.f598d8c2.js"><link rel="prefetch" href="/notebook/assets/js/116.e3bd29ce.js"><link rel="prefetch" href="/notebook/assets/js/117.c3c02abc.js"><link rel="prefetch" href="/notebook/assets/js/118.136a552a.js"><link rel="prefetch" href="/notebook/assets/js/119.c124f3f8.js"><link rel="prefetch" href="/notebook/assets/js/12.dc66c4f2.js"><link rel="prefetch" href="/notebook/assets/js/120.f835d124.js"><link rel="prefetch" href="/notebook/assets/js/121.367716ae.js"><link rel="prefetch" href="/notebook/assets/js/122.752b0493.js"><link rel="prefetch" href="/notebook/assets/js/123.9f8d6026.js"><link rel="prefetch" href="/notebook/assets/js/124.e8eb61b6.js"><link rel="prefetch" href="/notebook/assets/js/125.cb081200.js"><link rel="prefetch" href="/notebook/assets/js/126.ab87d911.js"><link rel="prefetch" href="/notebook/assets/js/127.ffdbe74d.js"><link rel="prefetch" href="/notebook/assets/js/128.ec526e42.js"><link rel="prefetch" href="/notebook/assets/js/129.71839012.js"><link rel="prefetch" href="/notebook/assets/js/13.32e95b42.js"><link rel="prefetch" href="/notebook/assets/js/130.2bc0bb4d.js"><link rel="prefetch" href="/notebook/assets/js/131.5595b49b.js"><link rel="prefetch" href="/notebook/assets/js/132.4963c5c4.js"><link rel="prefetch" href="/notebook/assets/js/133.44f48cfd.js"><link rel="prefetch" href="/notebook/assets/js/134.cf25626c.js"><link rel="prefetch" href="/notebook/assets/js/135.5ee30fa9.js"><link rel="prefetch" href="/notebook/assets/js/136.bc43f8e6.js"><link rel="prefetch" href="/notebook/assets/js/137.9ab5beac.js"><link rel="prefetch" href="/notebook/assets/js/138.692a33e6.js"><link rel="prefetch" href="/notebook/assets/js/139.08e7c98d.js"><link rel="prefetch" href="/notebook/assets/js/14.c418d170.js"><link rel="prefetch" href="/notebook/assets/js/140.39a861db.js"><link rel="prefetch" href="/notebook/assets/js/141.46678413.js"><link rel="prefetch" href="/notebook/assets/js/142.f7ef5eac.js"><link rel="prefetch" href="/notebook/assets/js/143.c92cbac1.js"><link rel="prefetch" href="/notebook/assets/js/144.d9c61437.js"><link rel="prefetch" href="/notebook/assets/js/145.9f603b31.js"><link rel="prefetch" href="/notebook/assets/js/146.b875f045.js"><link rel="prefetch" href="/notebook/assets/js/147.55e7c4f8.js"><link rel="prefetch" href="/notebook/assets/js/148.4410c365.js"><link rel="prefetch" href="/notebook/assets/js/149.6096ed98.js"><link rel="prefetch" href="/notebook/assets/js/15.e0e7392a.js"><link rel="prefetch" href="/notebook/assets/js/150.24451f07.js"><link rel="prefetch" href="/notebook/assets/js/151.7cff301c.js"><link rel="prefetch" href="/notebook/assets/js/152.035fee1f.js"><link rel="prefetch" href="/notebook/assets/js/153.c61f8ec3.js"><link rel="prefetch" href="/notebook/assets/js/154.7bb549d0.js"><link rel="prefetch" href="/notebook/assets/js/155.1dc494db.js"><link rel="prefetch" href="/notebook/assets/js/156.b87eaf39.js"><link rel="prefetch" href="/notebook/assets/js/157.e3f5a5c0.js"><link rel="prefetch" href="/notebook/assets/js/158.c565c699.js"><link rel="prefetch" href="/notebook/assets/js/159.a22609ef.js"><link rel="prefetch" href="/notebook/assets/js/16.d1aef4ee.js"><link rel="prefetch" href="/notebook/assets/js/160.b29e761c.js"><link rel="prefetch" href="/notebook/assets/js/161.bee1e522.js"><link rel="prefetch" href="/notebook/assets/js/162.c49fca62.js"><link rel="prefetch" href="/notebook/assets/js/163.2cb4d37d.js"><link rel="prefetch" href="/notebook/assets/js/164.4a0dbc64.js"><link rel="prefetch" href="/notebook/assets/js/165.490d05b3.js"><link rel="prefetch" href="/notebook/assets/js/166.df5d2527.js"><link rel="prefetch" href="/notebook/assets/js/167.89a81814.js"><link rel="prefetch" href="/notebook/assets/js/168.9991702e.js"><link rel="prefetch" href="/notebook/assets/js/169.2f9a5dce.js"><link rel="prefetch" href="/notebook/assets/js/17.88ae5445.js"><link rel="prefetch" href="/notebook/assets/js/170.5f23eb3c.js"><link rel="prefetch" href="/notebook/assets/js/171.c521aaa8.js"><link rel="prefetch" href="/notebook/assets/js/172.42110b0a.js"><link rel="prefetch" href="/notebook/assets/js/173.5e36f1bf.js"><link rel="prefetch" href="/notebook/assets/js/174.f48e078a.js"><link rel="prefetch" href="/notebook/assets/js/175.775da6a5.js"><link rel="prefetch" href="/notebook/assets/js/176.9c3c55ea.js"><link rel="prefetch" href="/notebook/assets/js/177.b54d1cff.js"><link rel="prefetch" href="/notebook/assets/js/178.ff08b7f5.js"><link rel="prefetch" href="/notebook/assets/js/179.c6a1af32.js"><link rel="prefetch" href="/notebook/assets/js/18.dcb78196.js"><link rel="prefetch" href="/notebook/assets/js/180.25dd9eba.js"><link rel="prefetch" href="/notebook/assets/js/181.13e6ec84.js"><link rel="prefetch" href="/notebook/assets/js/182.f6849f0d.js"><link rel="prefetch" href="/notebook/assets/js/183.7e664874.js"><link rel="prefetch" href="/notebook/assets/js/184.e6aba86f.js"><link rel="prefetch" href="/notebook/assets/js/185.df07b919.js"><link rel="prefetch" href="/notebook/assets/js/186.02c77e75.js"><link rel="prefetch" href="/notebook/assets/js/187.e8380ed4.js"><link rel="prefetch" href="/notebook/assets/js/188.eddc8bee.js"><link rel="prefetch" href="/notebook/assets/js/189.fbc1840f.js"><link rel="prefetch" href="/notebook/assets/js/19.5997a514.js"><link rel="prefetch" href="/notebook/assets/js/190.a37bfe4c.js"><link rel="prefetch" href="/notebook/assets/js/191.e53a3d4b.js"><link rel="prefetch" href="/notebook/assets/js/192.2f5be408.js"><link rel="prefetch" href="/notebook/assets/js/193.4ca6de49.js"><link rel="prefetch" href="/notebook/assets/js/194.b8e51d9d.js"><link rel="prefetch" href="/notebook/assets/js/195.70e6b23a.js"><link rel="prefetch" href="/notebook/assets/js/196.5d5fbf2d.js"><link rel="prefetch" href="/notebook/assets/js/197.78456dab.js"><link rel="prefetch" href="/notebook/assets/js/198.4308331c.js"><link rel="prefetch" href="/notebook/assets/js/199.2e537849.js"><link rel="prefetch" href="/notebook/assets/js/20.fc057fd7.js"><link rel="prefetch" href="/notebook/assets/js/200.b3309bbf.js"><link rel="prefetch" href="/notebook/assets/js/201.4723461c.js"><link rel="prefetch" href="/notebook/assets/js/202.b15b5177.js"><link rel="prefetch" href="/notebook/assets/js/203.22c50e61.js"><link rel="prefetch" href="/notebook/assets/js/204.5b8b3b00.js"><link rel="prefetch" href="/notebook/assets/js/205.54ee7630.js"><link rel="prefetch" href="/notebook/assets/js/206.f3f20f94.js"><link rel="prefetch" href="/notebook/assets/js/207.a9608973.js"><link rel="prefetch" href="/notebook/assets/js/208.1a80a593.js"><link rel="prefetch" href="/notebook/assets/js/209.586fd293.js"><link rel="prefetch" href="/notebook/assets/js/21.cb4205ee.js"><link rel="prefetch" href="/notebook/assets/js/210.7829dd53.js"><link rel="prefetch" href="/notebook/assets/js/211.3ce139ab.js"><link rel="prefetch" href="/notebook/assets/js/212.84738a64.js"><link rel="prefetch" href="/notebook/assets/js/213.a631830d.js"><link rel="prefetch" href="/notebook/assets/js/214.9d64cf85.js"><link rel="prefetch" href="/notebook/assets/js/215.87030b6b.js"><link rel="prefetch" href="/notebook/assets/js/216.ddbe1944.js"><link rel="prefetch" href="/notebook/assets/js/217.16ae7e40.js"><link rel="prefetch" href="/notebook/assets/js/218.e7780d65.js"><link rel="prefetch" href="/notebook/assets/js/219.abae5e09.js"><link rel="prefetch" href="/notebook/assets/js/22.256014b4.js"><link rel="prefetch" href="/notebook/assets/js/220.8e3a8702.js"><link rel="prefetch" href="/notebook/assets/js/221.4c279d74.js"><link rel="prefetch" href="/notebook/assets/js/222.6c9b2595.js"><link rel="prefetch" href="/notebook/assets/js/223.cc072424.js"><link rel="prefetch" href="/notebook/assets/js/224.c663b40f.js"><link rel="prefetch" href="/notebook/assets/js/225.f3e52654.js"><link rel="prefetch" href="/notebook/assets/js/226.5e00402c.js"><link rel="prefetch" href="/notebook/assets/js/227.1c28ce97.js"><link rel="prefetch" href="/notebook/assets/js/228.42b8c305.js"><link rel="prefetch" href="/notebook/assets/js/229.df9760ec.js"><link rel="prefetch" href="/notebook/assets/js/23.a3d7d66a.js"><link rel="prefetch" href="/notebook/assets/js/230.cfe18f05.js"><link rel="prefetch" href="/notebook/assets/js/231.3a664a46.js"><link rel="prefetch" href="/notebook/assets/js/232.966ce9dc.js"><link rel="prefetch" href="/notebook/assets/js/233.fc06cb57.js"><link rel="prefetch" href="/notebook/assets/js/234.7bb9b7d4.js"><link rel="prefetch" href="/notebook/assets/js/235.b336116e.js"><link rel="prefetch" href="/notebook/assets/js/236.03a38f77.js"><link rel="prefetch" href="/notebook/assets/js/237.0dbda856.js"><link rel="prefetch" href="/notebook/assets/js/238.c1c19749.js"><link rel="prefetch" href="/notebook/assets/js/239.046875c1.js"><link rel="prefetch" href="/notebook/assets/js/24.8e5e267e.js"><link rel="prefetch" href="/notebook/assets/js/240.4bd9cdc0.js"><link rel="prefetch" href="/notebook/assets/js/241.c3dc5804.js"><link rel="prefetch" href="/notebook/assets/js/242.db0b1a91.js"><link rel="prefetch" href="/notebook/assets/js/243.4d9bd61d.js"><link rel="prefetch" href="/notebook/assets/js/244.ee57770b.js"><link rel="prefetch" href="/notebook/assets/js/245.02aab1c1.js"><link rel="prefetch" href="/notebook/assets/js/246.b76a18bb.js"><link rel="prefetch" href="/notebook/assets/js/247.75a673db.js"><link rel="prefetch" href="/notebook/assets/js/248.ad93f81d.js"><link rel="prefetch" href="/notebook/assets/js/249.fb75a938.js"><link rel="prefetch" href="/notebook/assets/js/250.8395c0b6.js"><link rel="prefetch" href="/notebook/assets/js/251.16a6d2a4.js"><link rel="prefetch" href="/notebook/assets/js/252.ef3ee05e.js"><link rel="prefetch" href="/notebook/assets/js/253.78e3471e.js"><link rel="prefetch" href="/notebook/assets/js/254.a5783e07.js"><link rel="prefetch" href="/notebook/assets/js/255.2ab853f6.js"><link rel="prefetch" href="/notebook/assets/js/256.5430831b.js"><link rel="prefetch" href="/notebook/assets/js/257.99c8a0a4.js"><link rel="prefetch" href="/notebook/assets/js/258.4496955b.js"><link rel="prefetch" href="/notebook/assets/js/259.9152b1d2.js"><link rel="prefetch" href="/notebook/assets/js/26.0fce5172.js"><link rel="prefetch" href="/notebook/assets/js/260.072f65e6.js"><link rel="prefetch" href="/notebook/assets/js/261.0bca81af.js"><link rel="prefetch" href="/notebook/assets/js/262.9c9c5337.js"><link rel="prefetch" href="/notebook/assets/js/263.42470957.js"><link rel="prefetch" href="/notebook/assets/js/264.64b5f4fb.js"><link rel="prefetch" href="/notebook/assets/js/265.836a69c5.js"><link rel="prefetch" href="/notebook/assets/js/266.a00cdeb1.js"><link rel="prefetch" href="/notebook/assets/js/267.09dc5ae4.js"><link rel="prefetch" href="/notebook/assets/js/268.6fa6603e.js"><link rel="prefetch" href="/notebook/assets/js/269.3963ce5e.js"><link rel="prefetch" href="/notebook/assets/js/27.47ba3886.js"><link rel="prefetch" href="/notebook/assets/js/270.2826382d.js"><link rel="prefetch" href="/notebook/assets/js/271.3c746c23.js"><link rel="prefetch" href="/notebook/assets/js/272.30698dda.js"><link rel="prefetch" href="/notebook/assets/js/273.b06e3fd2.js"><link rel="prefetch" href="/notebook/assets/js/274.2016c7fa.js"><link rel="prefetch" href="/notebook/assets/js/275.f4aff624.js"><link rel="prefetch" href="/notebook/assets/js/276.e682aa74.js"><link rel="prefetch" href="/notebook/assets/js/277.0c3f41db.js"><link rel="prefetch" href="/notebook/assets/js/278.3c2d5251.js"><link rel="prefetch" href="/notebook/assets/js/279.a9af5703.js"><link rel="prefetch" href="/notebook/assets/js/28.6bac56c6.js"><link rel="prefetch" href="/notebook/assets/js/280.a5da28a3.js"><link rel="prefetch" href="/notebook/assets/js/281.8cc5a3ba.js"><link rel="prefetch" href="/notebook/assets/js/282.55227ff2.js"><link rel="prefetch" href="/notebook/assets/js/283.13f54ae9.js"><link rel="prefetch" href="/notebook/assets/js/284.88644dec.js"><link rel="prefetch" href="/notebook/assets/js/285.0670211f.js"><link rel="prefetch" href="/notebook/assets/js/286.afa43d34.js"><link rel="prefetch" href="/notebook/assets/js/287.9e98e933.js"><link rel="prefetch" href="/notebook/assets/js/288.175a8a9b.js"><link rel="prefetch" href="/notebook/assets/js/289.0d712953.js"><link rel="prefetch" href="/notebook/assets/js/29.3476ca1f.js"><link rel="prefetch" href="/notebook/assets/js/290.4b258761.js"><link rel="prefetch" href="/notebook/assets/js/291.e7ded33e.js"><link rel="prefetch" href="/notebook/assets/js/292.fcfca63e.js"><link rel="prefetch" href="/notebook/assets/js/293.4d6c0f7d.js"><link rel="prefetch" href="/notebook/assets/js/294.59b7e2de.js"><link rel="prefetch" href="/notebook/assets/js/295.0b8dc8f3.js"><link rel="prefetch" href="/notebook/assets/js/296.65434eb0.js"><link rel="prefetch" href="/notebook/assets/js/297.957ba4a7.js"><link rel="prefetch" href="/notebook/assets/js/298.dd81e487.js"><link rel="prefetch" href="/notebook/assets/js/299.eba0d36a.js"><link rel="prefetch" href="/notebook/assets/js/30.51a26022.js"><link rel="prefetch" href="/notebook/assets/js/300.23a6a024.js"><link rel="prefetch" href="/notebook/assets/js/301.eb4276c9.js"><link rel="prefetch" href="/notebook/assets/js/302.2c696c44.js"><link rel="prefetch" href="/notebook/assets/js/303.a748a576.js"><link rel="prefetch" href="/notebook/assets/js/304.95020a99.js"><link rel="prefetch" href="/notebook/assets/js/305.c4bc6072.js"><link rel="prefetch" href="/notebook/assets/js/306.74133b05.js"><link rel="prefetch" href="/notebook/assets/js/307.6ea724f3.js"><link rel="prefetch" href="/notebook/assets/js/308.fc7b065c.js"><link rel="prefetch" href="/notebook/assets/js/309.56497801.js"><link rel="prefetch" href="/notebook/assets/js/31.c351e10d.js"><link rel="prefetch" href="/notebook/assets/js/310.692379f9.js"><link rel="prefetch" href="/notebook/assets/js/311.b7393f95.js"><link rel="prefetch" href="/notebook/assets/js/312.f3eec1e1.js"><link rel="prefetch" href="/notebook/assets/js/313.9227351c.js"><link rel="prefetch" href="/notebook/assets/js/314.6960877d.js"><link rel="prefetch" href="/notebook/assets/js/315.f55a1979.js"><link rel="prefetch" href="/notebook/assets/js/316.6121039c.js"><link rel="prefetch" href="/notebook/assets/js/317.7ba118c8.js"><link rel="prefetch" href="/notebook/assets/js/318.2b71444c.js"><link rel="prefetch" href="/notebook/assets/js/319.bc0d5ccf.js"><link rel="prefetch" href="/notebook/assets/js/32.8a802a22.js"><link rel="prefetch" href="/notebook/assets/js/320.79f13ae1.js"><link rel="prefetch" href="/notebook/assets/js/321.21d3b0cf.js"><link rel="prefetch" href="/notebook/assets/js/322.87e4c143.js"><link rel="prefetch" href="/notebook/assets/js/323.4dee2eb7.js"><link rel="prefetch" href="/notebook/assets/js/324.f8c64322.js"><link rel="prefetch" href="/notebook/assets/js/325.c82057d6.js"><link rel="prefetch" href="/notebook/assets/js/326.3ea0d22b.js"><link rel="prefetch" href="/notebook/assets/js/327.90b878d9.js"><link rel="prefetch" href="/notebook/assets/js/328.59e55f0a.js"><link rel="prefetch" href="/notebook/assets/js/329.95fb2ef0.js"><link rel="prefetch" href="/notebook/assets/js/33.18cd7b09.js"><link rel="prefetch" href="/notebook/assets/js/330.ed1fb0e9.js"><link rel="prefetch" href="/notebook/assets/js/331.b84d88a9.js"><link rel="prefetch" href="/notebook/assets/js/332.20dffd14.js"><link rel="prefetch" href="/notebook/assets/js/333.d625fbd2.js"><link rel="prefetch" href="/notebook/assets/js/334.4fedc08a.js"><link rel="prefetch" href="/notebook/assets/js/335.c3b6c886.js"><link rel="prefetch" href="/notebook/assets/js/336.cf000555.js"><link rel="prefetch" href="/notebook/assets/js/337.891a7e6c.js"><link rel="prefetch" href="/notebook/assets/js/338.23da071e.js"><link rel="prefetch" href="/notebook/assets/js/339.92d07729.js"><link rel="prefetch" href="/notebook/assets/js/34.f39f39b2.js"><link rel="prefetch" href="/notebook/assets/js/340.09cb4417.js"><link rel="prefetch" href="/notebook/assets/js/341.3591e649.js"><link rel="prefetch" href="/notebook/assets/js/342.568a9320.js"><link rel="prefetch" href="/notebook/assets/js/343.e61b523f.js"><link rel="prefetch" href="/notebook/assets/js/344.61bb135b.js"><link rel="prefetch" href="/notebook/assets/js/345.f861e5aa.js"><link rel="prefetch" href="/notebook/assets/js/346.c5c70e0f.js"><link rel="prefetch" href="/notebook/assets/js/347.9b389847.js"><link rel="prefetch" href="/notebook/assets/js/348.eb62b86e.js"><link rel="prefetch" href="/notebook/assets/js/349.d4852195.js"><link rel="prefetch" href="/notebook/assets/js/35.c31fd7ed.js"><link rel="prefetch" href="/notebook/assets/js/350.f1db6bfd.js"><link rel="prefetch" href="/notebook/assets/js/351.4d86adaf.js"><link rel="prefetch" href="/notebook/assets/js/36.624192b1.js"><link rel="prefetch" href="/notebook/assets/js/37.680f8e12.js"><link rel="prefetch" href="/notebook/assets/js/38.f9ecec66.js"><link rel="prefetch" href="/notebook/assets/js/39.afab4ce6.js"><link rel="prefetch" href="/notebook/assets/js/4.03ba6111.js"><link rel="prefetch" href="/notebook/assets/js/40.f66ecac0.js"><link rel="prefetch" href="/notebook/assets/js/41.87cdca0e.js"><link rel="prefetch" href="/notebook/assets/js/42.08461558.js"><link rel="prefetch" href="/notebook/assets/js/43.ad5cf182.js"><link rel="prefetch" href="/notebook/assets/js/44.0bb6ad3f.js"><link rel="prefetch" href="/notebook/assets/js/45.5d2af6d4.js"><link rel="prefetch" href="/notebook/assets/js/46.8a06257e.js"><link rel="prefetch" href="/notebook/assets/js/47.3e37541c.js"><link rel="prefetch" href="/notebook/assets/js/48.024eda4c.js"><link rel="prefetch" href="/notebook/assets/js/49.a0685cf7.js"><link rel="prefetch" href="/notebook/assets/js/5.1071c8dd.js"><link rel="prefetch" href="/notebook/assets/js/50.130eaac4.js"><link rel="prefetch" href="/notebook/assets/js/51.0fe4dbd0.js"><link rel="prefetch" href="/notebook/assets/js/52.9d0ae64a.js"><link rel="prefetch" href="/notebook/assets/js/53.1ca09933.js"><link rel="prefetch" href="/notebook/assets/js/54.679cd78c.js"><link rel="prefetch" href="/notebook/assets/js/55.95cbe3a2.js"><link rel="prefetch" href="/notebook/assets/js/56.a58ec2af.js"><link rel="prefetch" href="/notebook/assets/js/57.0e59339a.js"><link rel="prefetch" href="/notebook/assets/js/58.487f643f.js"><link rel="prefetch" href="/notebook/assets/js/59.a8e9a1e3.js"><link rel="prefetch" href="/notebook/assets/js/6.707a1f11.js"><link rel="prefetch" href="/notebook/assets/js/60.c3080f7a.js"><link rel="prefetch" href="/notebook/assets/js/61.7f77e449.js"><link rel="prefetch" href="/notebook/assets/js/62.a5528e33.js"><link rel="prefetch" href="/notebook/assets/js/63.a787a8ee.js"><link rel="prefetch" href="/notebook/assets/js/64.7d3edfda.js"><link rel="prefetch" href="/notebook/assets/js/65.80e083e6.js"><link rel="prefetch" href="/notebook/assets/js/66.4076f29c.js"><link rel="prefetch" href="/notebook/assets/js/67.cf46f254.js"><link rel="prefetch" href="/notebook/assets/js/68.6fc8b1fd.js"><link rel="prefetch" href="/notebook/assets/js/69.4a344d72.js"><link rel="prefetch" href="/notebook/assets/js/7.c507c0e3.js"><link rel="prefetch" href="/notebook/assets/js/70.b13eef1a.js"><link rel="prefetch" href="/notebook/assets/js/71.20ad9776.js"><link rel="prefetch" href="/notebook/assets/js/72.30f44ef6.js"><link rel="prefetch" href="/notebook/assets/js/73.857a629d.js"><link rel="prefetch" href="/notebook/assets/js/74.a2b5a703.js"><link rel="prefetch" href="/notebook/assets/js/75.252e6fc0.js"><link rel="prefetch" href="/notebook/assets/js/76.d64e4a53.js"><link rel="prefetch" href="/notebook/assets/js/77.40db9cc6.js"><link rel="prefetch" href="/notebook/assets/js/78.7a635d12.js"><link rel="prefetch" href="/notebook/assets/js/79.b2249421.js"><link rel="prefetch" href="/notebook/assets/js/8.a5f34392.js"><link rel="prefetch" href="/notebook/assets/js/80.d325f684.js"><link rel="prefetch" href="/notebook/assets/js/81.2e8d667e.js"><link rel="prefetch" href="/notebook/assets/js/82.885af8d1.js"><link rel="prefetch" href="/notebook/assets/js/83.b601bf2e.js"><link rel="prefetch" href="/notebook/assets/js/84.758d5dba.js"><link rel="prefetch" href="/notebook/assets/js/85.2e75fb85.js"><link rel="prefetch" href="/notebook/assets/js/86.6c68d815.js"><link rel="prefetch" href="/notebook/assets/js/87.8fba1553.js"><link rel="prefetch" href="/notebook/assets/js/88.e30608d9.js"><link rel="prefetch" href="/notebook/assets/js/89.be2f87c8.js"><link rel="prefetch" href="/notebook/assets/js/9.1c775f56.js"><link rel="prefetch" href="/notebook/assets/js/90.88dd69c4.js"><link rel="prefetch" href="/notebook/assets/js/91.59a69041.js"><link rel="prefetch" href="/notebook/assets/js/92.b46ca339.js"><link rel="prefetch" href="/notebook/assets/js/93.aeaec51d.js"><link rel="prefetch" href="/notebook/assets/js/94.5a852633.js"><link rel="prefetch" href="/notebook/assets/js/95.4f445663.js"><link rel="prefetch" href="/notebook/assets/js/96.6299f802.js"><link rel="prefetch" href="/notebook/assets/js/97.6cf3ba23.js"><link rel="prefetch" href="/notebook/assets/js/98.b48d73e6.js"><link rel="prefetch" href="/notebook/assets/js/99.f61a2e23.js">
    <link rel="stylesheet" href="/notebook/assets/css/0.styles.1b58b254.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notebook/" class="home-link router-link-active"><img src="/notebook/img/logo.png" alt="notebook" class="logo"> <span class="site-name can-hide">notebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notebook/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><!----> <span class="title" style="display:;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/network/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/notebook/computer-system/" class="nav-link">计算机系统</a></li><li class="dropdown-item"><!----> <a href="/notebook/data-structure/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/notebook/major/" class="nav-link">计算机专业课</a></li><li class="dropdown-item"><!----> <a href="/notebook/design-pattern/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><!----> <span class="title" style="display:;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://yubincloud.github.io/notebook-front/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/notebook/java/" class="nav-link">Java 开发</a></li><li class="dropdown-item"><!----> <a href="/notebook/python/" class="nav-link">Python 开发</a></li><li class="dropdown-item"><!----> <a href="/notebook/golang/" class="nav-link">Golang 开发</a></li><li class="dropdown-item"><!----> <a href="/notebook/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/notebook/software-architecture/" class="nav-link">软件设计与架构</a></li><li class="dropdown-item"><!----> <a href="/notebook/distributed-system/" class="nav-link">大数据与分布式系统</a></li><li class="dropdown-item"><h4>常见开发工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notebook/nginx/" class="nav-link">Nginx</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据科学" class="dropdown-title"><!----> <span class="title" style="display:;">数据科学</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/data-science/spider/" class="nav-link">爬虫</a></li><li class="dropdown-item"><!----> <a href="/notebook/data-science/py-data-analysis/" class="nav-link">Python 数据分析</a></li><li class="dropdown-item"><!----> <a href="/notebook/data-warehouse/" class="nav-link">数据仓库</a></li><li class="dropdown-item"><h4>中间件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notebook/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/notebook/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/notebook/elasticsearch/" class="nav-link">Elasticsearch</a></li><li class="dropdown-subitem"><a href="/notebook/kafka/" class="nav-link">Kafka</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AI" class="dropdown-title"><!----> <span class="title" style="display:;">AI</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/deep-learning/" class="nav-link">深度学习</a></li><li class="dropdown-item"><!----> <a href="/notebook/machine-learning/" class="nav-link">机器学习</a></li><li class="dropdown-item"><!----> <a href="/notebook/kg/" class="nav-link">知识图谱</a></li><li class="dropdown-item"><!----> <a href="/notebook/gnn/" class="nav-link">图神经网络</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="安全" class="dropdown-title"><!----> <span class="title" style="display:;">安全</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/security/application-security/" class="nav-link">应用安全</a></li><li class="dropdown-item"><!----> <a href="/notebook/security/penetration/" class="nav-link">渗透测试</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><!----> <span class="title" style="display:;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/ops/linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/notebook/ops/cloud-native/" class="nav-link">云原生</a></li></ul></div></div><div class="nav-item"><a href="/notebook/pages/interview/index/" class="nav-link">面试</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="我的" class="dropdown-title"><!----> <span class="title" style="display:;">我的</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/pages/my/favorite/" class="nav-link">收藏</a></li><li class="dropdown-item"><!----> <a href="/notebook/pages/my/good-sentence/" class="nav-link">paper 好句</a></li></ul></div></div> <a href="https://github.com/yubincloud/notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/head.jpg"> <div class="blogger-info"><h3>学习笔记</h3> <span>啦啦啦，向太阳~</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/notebook/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><!----> <span class="title" style="display:;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/network/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/notebook/computer-system/" class="nav-link">计算机系统</a></li><li class="dropdown-item"><!----> <a href="/notebook/data-structure/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/notebook/major/" class="nav-link">计算机专业课</a></li><li class="dropdown-item"><!----> <a href="/notebook/design-pattern/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><!----> <span class="title" style="display:;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://yubincloud.github.io/notebook-front/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/notebook/java/" class="nav-link">Java 开发</a></li><li class="dropdown-item"><!----> <a href="/notebook/python/" class="nav-link">Python 开发</a></li><li class="dropdown-item"><!----> <a href="/notebook/golang/" class="nav-link">Golang 开发</a></li><li class="dropdown-item"><!----> <a href="/notebook/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/notebook/software-architecture/" class="nav-link">软件设计与架构</a></li><li class="dropdown-item"><!----> <a href="/notebook/distributed-system/" class="nav-link">大数据与分布式系统</a></li><li class="dropdown-item"><h4>常见开发工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notebook/nginx/" class="nav-link">Nginx</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据科学" class="dropdown-title"><!----> <span class="title" style="display:;">数据科学</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/data-science/spider/" class="nav-link">爬虫</a></li><li class="dropdown-item"><!----> <a href="/notebook/data-science/py-data-analysis/" class="nav-link">Python 数据分析</a></li><li class="dropdown-item"><!----> <a href="/notebook/data-warehouse/" class="nav-link">数据仓库</a></li><li class="dropdown-item"><h4>中间件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notebook/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/notebook/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/notebook/elasticsearch/" class="nav-link">Elasticsearch</a></li><li class="dropdown-subitem"><a href="/notebook/kafka/" class="nav-link">Kafka</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AI" class="dropdown-title"><!----> <span class="title" style="display:;">AI</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/deep-learning/" class="nav-link">深度学习</a></li><li class="dropdown-item"><!----> <a href="/notebook/machine-learning/" class="nav-link">机器学习</a></li><li class="dropdown-item"><!----> <a href="/notebook/kg/" class="nav-link">知识图谱</a></li><li class="dropdown-item"><!----> <a href="/notebook/gnn/" class="nav-link">图神经网络</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="安全" class="dropdown-title"><!----> <span class="title" style="display:;">安全</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/security/application-security/" class="nav-link">应用安全</a></li><li class="dropdown-item"><!----> <a href="/notebook/security/penetration/" class="nav-link">渗透测试</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><!----> <span class="title" style="display:;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/ops/linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/notebook/ops/cloud-native/" class="nav-link">云原生</a></li></ul></div></div><div class="nav-item"><a href="/notebook/pages/interview/index/" class="nav-link">面试</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="我的" class="dropdown-title"><!----> <span class="title" style="display:;">我的</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/pages/my/favorite/" class="nav-link">收藏</a></li><li class="dropdown-item"><!----> <a href="/notebook/pages/my/good-sentence/" class="nav-link">paper 好句</a></li></ul></div></div> <a href="https://github.com/yubincloud/notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>自顶向下方法</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notebook/pages/b1c082/" class="sidebar-link">计算机网络概述</a></li><li><a href="/notebook/pages/e36560/" class="sidebar-link">应用层</a></li><li><a href="/notebook/pages/6750bc/" aria-current="page" class="active sidebar-link">传输层</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/notebook/pages/6750bc/#_1-概述与传输层服务" class="sidebar-link">1. 概述与传输层服务</a></li><li class="sidebar-sub-header level2"><a href="/notebook/pages/6750bc/#_2-多路复用和多路分解" class="sidebar-link">2. 多路复用和多路分解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/notebook/pages/6750bc/#_2-1-无连接的多路复用与多路分解" class="sidebar-link">2.1 无连接的多路复用与多路分解</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/6750bc/#_2-2-面向连接的多路复用与多路分解" class="sidebar-link">2.2 面向连接的多路复用与多路分解</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/notebook/pages/6750bc/#_3-udp" class="sidebar-link">3. UDP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/notebook/pages/6750bc/#_3-1-udp-报文段结构" class="sidebar-link">3.1 UDP 报文段结构</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/6750bc/#_3-2-udp-检验和" class="sidebar-link">3.2 UDP 检验和</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/notebook/pages/6750bc/#_4-可靠数据传输的原理" class="sidebar-link">4. 可靠数据传输的原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/notebook/pages/6750bc/#_4-1-构造可靠数据传输协议" class="sidebar-link">4.1 构造可靠数据传输协议</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/6750bc/#_4-2-信道利用率分析" class="sidebar-link">4.2 信道利用率分析</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/6750bc/#_4-3-流水线可靠数据传输" class="sidebar-link">4.3 流水线可靠数据传输</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/notebook/pages/6750bc/#_5-tcp" class="sidebar-link">5. TCP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/notebook/pages/6750bc/#_5-1-tcp-连接" class="sidebar-link">5.1 TCP 连接</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/6750bc/#_5-2-tcp-报文段结构" class="sidebar-link">5.2 TCP 报文段结构</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/6750bc/#_5-3-往返时间的估计与超时" class="sidebar-link">5.3 往返时间的估计与超时</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/6750bc/#_5-4-可靠数据传输" class="sidebar-link">5.4 可靠数据传输</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/6750bc/#_5-5-流量控制" class="sidebar-link">5.5 流量控制</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/6750bc/#_5-6-tcp-连接管理" class="sidebar-link">5.6 TCP 连接管理</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/6750bc/#_5-7-拥塞控制原理" class="sidebar-link">5.7 拥塞控制原理</a></li><li class="sidebar-sub-header level3"><a href="/notebook/pages/6750bc/#_5-8-tcp-拥塞控制" class="sidebar-link">5.8 TCP 拥塞控制</a></li></ul></li></ul></li><li><a href="/notebook/pages/02d821/" class="sidebar-link">网络层（数据平面）</a></li><li><a href="/notebook/pages/b67d3c/" class="sidebar-link">网络层（控制平面）</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TCP IP 网络编程</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-6"><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/notebook/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/notebook/network/#计算机网络" data-v-06225672>计算机网络</a></li><li data-v-06225672><a href="/notebook/network/#自顶向下方法" data-v-06225672>自顶向下方法</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/yubincloud" target="_blank" title="作者" class="beLink" data-v-06225672>yubin</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2021-10-19</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">传输层<!----></h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#_1-概述与传输层服务">1. 概述与传输层服务</a></li><li><a href="#_2-多路复用和多路分解">2. 多路复用和多路分解</a><ul><li><a href="#_2-1-无连接的多路复用与多路分解">2.1 无连接的多路复用与多路分解</a></li><li><a href="#_2-2-面向连接的多路复用与多路分解">2.2 面向连接的多路复用与多路分解</a></li></ul></li><li><a href="#_3-udp">3. UDP</a><ul><li><a href="#_3-1-udp-报文段结构">3.1 UDP 报文段结构</a></li><li><a href="#_3-2-udp-检验和">3.2 UDP 检验和</a></li></ul></li><li><a href="#_4-可靠数据传输的原理-badge-text-★">4. 可靠数据传输的原理 <span class="badge tip" style="vertical-align:top;" data-v-d5affa18>★</span></a><ul><li><a href="#_4-1-构造可靠数据传输协议">4.1 构造可靠数据传输协议</a></li><li><a href="#_4-2-信道利用率分析">4.2 信道利用率分析</a></li><li><a href="#_4-3-流水线可靠数据传输">4.3 流水线可靠数据传输</a></li></ul></li><li><a href="#_5-tcp">5. TCP</a><ul><li><a href="#_5-1-tcp-连接">5.1 TCP 连接</a></li><li><a href="#_5-2-tcp-报文段结构">5.2 TCP 报文段结构</a></li><li><a href="#_5-3-往返时间的估计与超时">5.3 往返时间的估计与超时</a></li><li><a href="#_5-4-可靠数据传输">5.4 可靠数据传输</a></li><li><a href="#_5-5-流量控制">5.5 流量控制</a></li><li><a href="#_5-6-tcp-连接管理">5.6 TCP 连接管理</a></li><li><a href="#_5-7-拥塞控制原理">5.7 拥塞控制原理</a></li><li><a href="#_5-8-tcp-拥塞控制">5.8 TCP 拥塞控制</a></li></ul></li></ul></div><p></p> <div class="custom-block tip"><p class="custom-block-title">考试大纲</p> <ol><li>传输层的功能</li> <li>复用与分解</li> <li>传输层寻址与端口号、无连接服务与面向连接服务</li> <li>流量控制与拥塞控制</li> <li>可靠数据传输、停止—等待协议、滑动窗口协议（后退 N 步协议-GBN、 选择重传协议-SR）、协议信道利用率</li> <li>UDP 数据报、UDP 校验</li> <li>TCP 协议特点、TCP 段结构、TCP 连接管理、TCP 可靠传输、TCP 流量控制与拥塞控制</li></ol></div> <h2 id="_1-概述与传输层服务"><a href="#_1-概述与传输层服务" class="header-anchor">#</a> 1. 概述与传输层服务</h2> <p>传输层协议为运行在不同主机上的进程提供了一种逻辑（而非物理）通信机制，在端系统中实现。</p> <ul><li>发送方：将应用递交的消息分成一个或多个的报文段，并向下传给网络层。</li> <li>接收方：将接收到的报文段组装成消息， 并向上交给应用层。</li></ul> <p>传输层的数据分组称为<strong>报文段（segment）</strong>。</p> <p>网络路由器仅作用于数据报的网络层字段，即他们不检查传输层报文段的字段。</p> <p>可以使用多种运输层协议，因特网提供了 TCP 和 UDP 两种协议。</p> <div class="custom-block note"><p class="custom-block-title">传输层 vs. 网络层</p> <p>网络层：提供主机之间的逻辑通信机制；</p> <p>传输层：提供应用进程之间的逻辑通信机制。</p></div> <p>UDP（用户数据报协议）：“尽力而为”的不可靠、无连接的服务；</p> <p>TCP（传输控制协议）：可靠的、面向连接的服务。</p> <p>均不保证延迟和带宽。</p> <blockquote><p>我们将传输层分组称为报文段，但有些因特网文献称 TCP 分组为报文段，UDP 分组为数据报。我们统称都为报文段，以免与网络层的分组“数据报”混淆。</p></blockquote> <h2 id="_2-多路复用和多路分解"><a href="#_2-多路复用和多路分解" class="header-anchor">#</a> 2. 多路复用和多路分解</h2> <p>这项技术的<strong>目的</strong>：将由网络层提供的主机到主机交付服务延伸到为运行在主机上的应用程序提供进程到进程的交付服务。</p> <blockquote><p>如果某层的一个协议对应直接上层的多个协议/实体，则需要多路复用/分用。</p></blockquote> <p>在接收主机中的运输层实际上并没有直接将数据交付给进程，而是将数据交给了一个中间套接字。任一时刻不只有一个套接字。每个套接字都有唯一的标识符：</p> <ul><li>UDP Socket 标识符：（dst-ip，dst-port）</li> <li>TCP Socket 标识符：（src-ip，src-port，dst-ip，dst-port）</li></ul> <p><img src="/notebook/assets/img/image-20211019230729435.9dce91fe.png" alt="image-20211019230729435"></p> <p>将传输层报文段中的数据交付给正确的套接字的工作称为<strong>多路分解</strong>；</p> <p>在源主机从不同套接字中收集数据块，并为每个数据块封装上首部信息从而生成报文段，然后将报文段传递到网络层，所有这些工作称为<strong>多路复用</strong>。</p> <p><strong>端口号</strong>：16 比特的数，范围 0 ~ 65535，0 ~ 1023 是周知端口号。</p> <h3 id="_2-1-无连接的多路复用与多路分解"><a href="#_2-1-无连接的多路复用与多路分解" class="header-anchor">#</a> 2.1 无连接的多路复用与多路分解</h3> <p>一个 UDP 由一个（dst-ip，dst-port）标识。如果两个 UDP 报文段有着不同的源 ip 或源端口号，但具有相同的目的 ip 和目的端口，那么这两个报文将通过相同的套接字被定向到相同的目的进程。</p> <blockquote><p>但这不是说接收方就无法获得源 ip 和源端口号了，只是不把他作为标识而已。</p></blockquote> <h3 id="_2-2-面向连接的多路复用与多路分解"><a href="#_2-2-面向连接的多路复用与多路分解" class="header-anchor">#</a> 2.2 面向连接的多路复用与多路分解</h3> <p>一个 TCP 套接字由 （src-ip，src-port，dst-ip，dst-port）标识。</p> <ul><li>服务器可能同时支持多个TCP  Socket；</li> <li>Web服务器为每个客户端开不同的 Socket</li></ul> <p><img src="/notebook/assets/img/image-20211019232251467.c35562e6.png" alt="image-20211019232251467"></p> <h2 id="_3-udp"><a href="#_3-udp" class="header-anchor">#</a> 3. UDP</h2> <ul><li>“Best effort”服务，UDP段可能丢失或非按序到达。</li> <li>无连接，UDP发送方和接收方之间不需要握手，每个UDP段的处理独立于其他段</li></ul> <details class="custom-block details"><summary>UDP 为什么存在</summary> <ul><li>无需建立连接 (减少延迟)</li> <li>实现简单：无需维护连接状态</li> <li>头部开销少</li> <li>没有拥塞控制: 应用可更好地控制发送时间和速度</li></ul></details> <p>使用 UDP 的应用是可能实现可靠传输的，这可以通过在应用程序自身中建立可靠机制来完成。</p> <h3 id="_3-1-udp-报文段结构"><a href="#_3-1-udp-报文段结构" class="header-anchor">#</a> 3.1 UDP 报文段结构</h3> <p><img src="/notebook/assets/img/image-20211019235444862.868f7566.png" alt="image-20211019235444862"></p> <ul><li>UDP 首部只有四个字段，每个字段由两个字节组成，共 8 个字段。</li> <li>长度字段指示了在 UDP 报文段中的字节数（首部 + 数据）</li></ul> <h3 id="_3-2-udp-检验和"><a href="#_3-2-udp-检验和" class="header-anchor">#</a> 3.2 UDP 检验和</h3> <div class="custom-block note"><p class="custom-block-title">UDP 为什么提供了检验和？</p> <p>虽然许多链路层协议也提供了差错检测，但不能保证所有链路都提供了差错检测。此外，即使报文段经链路正确地传输，当报文段存储在某台路由器的内存中时，也可能引入比特差错。在既无法确保逐链路的可靠性，又无法确保内存中的差错检测的情况下，如果端到端数据传输服务要提供差错检测，UDP 就必须在端到端的基础上在运输层提供差错检测，这是一个在系统设计中被称颂的<strong>端到端原则</strong>的例子。</p> <p>端到端原则：因为某种功能必须基于端到端实现，在与较高级别提供这些功能的代价相比，在较低级别上设置的功能可能是冗余的或几乎没有价值的。</p></div> <p>UDP 检验和提供了差错检测功能，用于确定当 UDP 报文段从源到达目的地移动时，其中的比特是否发生了改变。但他对差错恢复无能为力。</p> <p><strong>发送方</strong>：将段的内容视为16-bit整数。<u>校验和计算</u>：计算所有整数的和 ，进位加在和的后面而不是丢弃（称为回卷），将得到的值按位求反，得到校验和。发送方将校验和放入校验和字段。</p> <p><strong>接收方</strong>：计算所收到段的校验和，将其与校验和字段进行对比：不相等则检测出错误，相等则没有检测出错误（<u>但可能有错误</u>）。</p> <details class="custom-block details"><summary>校验和计算示例</summary> <p><img src="/notebook/assets/img/image-20211020000513835.2bd4879d.png" alt="image-20211020000513835"></p></details> <h2 id="_4-可靠数据传输的原理"><a href="#_4-可靠数据传输的原理" class="header-anchor">#</a> 4. 可靠数据传输的原理 <span class="badge tip" style="vertical-align:top;" data-v-d5affa18>★</span></h2> <p><img src="/notebook/assets/img/1578708987415-7ab6a923-5372-43f4-8492-ada348ec92a3.ef8f72a8.png" alt="img"></p> <p>什么是<strong>可靠</strong>：不错、不乱、不丢。</p> <p><img src="/notebook/assets/img/image-20211020001932371.976e3970.png" alt="image-20211020001932371"></p> <p>约定：</p> <ul><li><p>rdt/udt: 可靠/不可靠数据</p></li> <li><p>rdt_send():上层调用(如app),传输可靠数据</p></li> <li><p>udt_send():由rdt调用,通过不可靠信道传输数据给receiver</p></li> <li><p>deliver_data():rdt调用,传递数据给上层</p></li> <li><p>rdt_rcv():当packets抵达信道的rcv端时调用</p></li></ul> <p>渐进地设计可靠数据传输协议的发送方和接收方，只考虑单向数据传输，但控制信息双向流动。</p> <h3 id="_4-1-构造可靠数据传输协议"><a href="#_4-1-构造可靠数据传输协议" class="header-anchor">#</a> 4.1 构造可靠数据传输协议</h3> <h4 id="_4-1-1-经完全可靠信道的可靠数据传输-rdt-1-0"><a href="#_4-1-1-经完全可靠信道的可靠数据传输-rdt-1-0" class="header-anchor">#</a> <strong>4.1.1 经完全可靠信道的可靠数据传输：rdt 1.0</strong></h4> <p>rdt1.0假设了完全可靠信道的可靠数据传输。</p> <p><img src="/notebook/assets/img/image-20211020002338754.d896aa90.png" alt="image-20211020002338754"></p> <div class="custom-block note"><p class="custom-block-title">rdt1.0</p> <ul><li><strong>sender</strong>：接收高层数据,打包后通过信道传输</li></ul> <ul><li><strong>receiver</strong>：从底层接收packet,从中取数数据后传给较高层</li></ul></div> <ul><li>横线上面是事件，下面是动作。</li></ul> <ul><li>这种理想情况下,receiver 无需提供任何信息给sender,因为无需担心出错</li></ul> <h4 id="_4-1-2-经具有比特差错信道的可靠数据传输-rdt-2-0"><a href="#_4-1-2-经具有比特差错信道的可靠数据传输-rdt-2-0" class="header-anchor">#</a> <strong>4.1.2 经具有比特差错信道的可靠数据传输：rdt 2.0</strong></h4> <p>rdt2.0 针对有bit差错信道的可靠数据传输。</p> <ul><li>如何从错误中恢复？
<ul><li>ACK: 接收方显式地告知发送方分组已正确接收</li> <li>NAK:接收方显式地告知发送方分组有错误</li> <li>发送方收到 NAK 后，重传分组</li></ul></li> <li>基于这种重传机制的rdt协议称为<strong>ARQ</strong>(Automatic Repeat reQuest)协议</li></ul> <p><img src="/notebook/assets/img/image-20211020003115985.338dba29.png" alt="image-20211020003115985"></p> <div class="custom-block note"><p class="custom-block-title">rdt2.0</p> <ul><li><strong>sender</strong>：接收上层调用后把数据和checksum打包通过信道发送--&gt;进入wait state:如果收到NAK,则重发packet继续当前state;如果收到ACK--&gt;进入等待命令的下一状态</li></ul> <ul><li><strong>receiver</strong>：收到packet后,如果pkt中有bit错误,返回NAK；如果没有错误,提取数据,传递数据,返回ACK</li></ul></div> <p>注意，当发送方处于等待 ACK 或 NAK 的状态时，它不能从上层获得更多的数据；这就是说，<code>rdt_send()</code> 事件不可能出现；仅当接收到 ACK 并离开该状态时才能发生这样的事件。因此发送方将不会发送一块新的数据，除非发送方确信接收方已正确接收当前分组。由于这种行为，rdt2.0 这样的协议被称为<strong>停等</strong>协议。</p> <p>Rdt 2.0中引入的新机制：</p> <ul><li>差错检测</li> <li>接收方反馈控制消息: ACK/NAK</li> <li>重传</li></ul> <h4 id="_4-1-3-rdt-2-1"><a href="#_4-1-3-rdt-2-1" class="header-anchor">#</a> <strong>4.1.3 rdt 2.1</strong></h4> <p><strong>rdt 2.0 缺陷</strong>：ACK/NAK本身出现错误。</p> <p><strong>可能的解决和新的问题</strong>：简单的方法是给Receiver返回的ACK/NAK也设置checksum.当Sender收到含糊的ACK/NAK分组,则重传pkt。<strong>困难在于</strong> receiver 不知道上一次 ACK/NAK 是否被 sender 正确接收,从而无法区分自己正在接收的 pkt 是上次重传还是新的。</p> <p><strong>实际方案</strong>：在pkt中添加序号,即把当前pkt的序号放在字段中,结合停等机制,sender会重发不确定的pkt,而receiver通过序号就知道接受的是重发pkt还是全新pkt。</p> <p>sender：</p> <p><img src="/notebook/assets/img/1578709609278-87d9a9dd-1866-407a-8ceb-163ff6e4bff8.0b2c3012.png" alt="img"></p> <div class="custom-block note"><p class="custom-block-title">rdt2.1 sender</p> <p>等待调用0状态 --&gt; 打包发送pkt0 --&gt; 停等0状态:</p> <ul><li>当收到NAK或发现ACK/NAK出错(corrupt),则重新发送pkt(ACK/NAK本身无需携带序号,由于停等机制,sender知道这次ACK/NAK出错发生在最近的pkt0),继续停等0状态</li> <li>当收到ACK且反馈本身无误(notcorrupt)--&gt;进入等待调用1状态</li></ul></div> <p>receiver：</p> <p><img src="/notebook/assets/img/1578709614873-f309702e-cadb-4f65-afe0-34fc0e0da3ca.1156abfb.png" alt="image.png"></p> <div class="custom-block note"><p class="custom-block-title">rdt2.1 receiver</p> <p>等待传入0状态:</p> <ul><li>如果发现传递出错(corrupt),则打包返回NAK,继续等待传入0状态;(错误分组)</li> <li>如果接收到pkt1,传递无误,<u>则返回ACK</u>,继续等待传入0状态(失序分组)</li> <li>如果发现pkt0,传递无误--&gt;提取数据,传递数据,返回ACK(正常分组)--&gt;进入等待传入1状态</li></ul></div> <p>注：</p> <ul><li>sender端的corrupt表示ACK/NAK混淆，receiver端的corrupt表示pkt有误；</li> <li>receiver 在等待 pkt0 时如果接收到 pkt1，表示这是一个失序的以前的分组，要回复一个 ACK。如果回复了 NAK，则 sender 会继续发送该分组从而陷入死循环。</li></ul> <div class="custom-block tip"><p class="custom-block-title">rdt2.1 VS. rdt2.0</p> <p><strong>sender</strong>：</p> <ul><li>为每个分组增加了序列号；</li> <li>两个序列号(0, 1)就够用，是因为采用了停等协议；</li> <li>需校验ACK/NAK消息是否发生错误</li> <li>状态数量翻倍，状态必须“记住”“当前”的分组序列号</li></ul> <p><strong>receiver</strong>：</p> <ul><li>需判断分组是否是重复。当前所处状态提供了期望收到分组的序列号，如果重复则丢弃。</li> <li>注意：接收方无法知道 ACK/NAK 是否被发送方正确收到</li></ul></div> <h4 id="_4-1-4-rdt2-2-可视为不使用-nak-的-rdt2-1"><a href="#_4-1-4-rdt2-2-可视为不使用-nak-的-rdt2-1" class="header-anchor">#</a> 4.1.4 rdt2.2（可视为不使用 NAK 的 rdt2.1）</h4> <p>rdt2.2 是在有比特差错的信道上实现的一个无 NAK 的可靠数据传输协议。</p> <p>分析：rdt2.1 使用了从接收方到发送方的肯定确认和否定确认。当接收到失序的分组时，接收方对所接收的分组发送一个肯定确认。如果接收到受损的分组，则接收方将发送一个否定确认。<u>如果不发送 NAK，而是对上一次正确接收的分组发送一个 ACK，我们也能实现与 NAK 一样的效果</u>。</p> <p>FSM：<img src="/notebook/assets/img/1578709938643-11c6307f-faf1-4980-b91f-efaa04cb3a4c.834ade91.png" alt="image.png"></p> <div class="custom-block note"><p class="custom-block-title">rdt2.2</p> <ul><li><p><strong>Sender</strong>：等待调用0状态 --&gt; 打包发送pkt0 --&gt; 停等0状态:</p> <ul><li>① 当收到ACK1或ACK/NAK混淆时,重发pkt0,继续停等0状态</li> <li>② 当收到ACK0且反馈本身无误(notcorrupt) --&gt; 进入等待调用1状态</li></ul></li> <li><p><strong>Receiver</strong>：等待传入0状态:</p> <ul><li>① 收到pkt1或传递出错,发送ACK1</li> <li>② 收到pkt0且传递无误 --&gt; 提取数据,传递数据,返回ACK0 --&gt; 进入等待传入1</li></ul></li></ul> <p>冗余ACK体现在：进入①前,Sender必定收到了ACK1,再次进入①收到ACK1,说明Receiver没有正确接收pkt0</p></div> <h4 id="_4-1-5-rdt3-0"><a href="#_4-1-5-rdt3-0" class="header-anchor">#</a> <strong>4.1.5 rdt3.0</strong></h4> <p>rdt3.0即比特交替协议(alternating-bit protocol)实现了<u>有bit差错和丢包的可靠数据传输</u>。</p> <p>问题：如果信道既可能发生错误，也可能丢失分组，怎么办？“校验和 + 序列号 + ACK + 重传”够用吗？</p> <p>解决方法：发送方等待“合理”时间：</p> <ul><li>如果没收到ACK，重传；</li> <li>如果分组或ACK只是延迟而不是丢了，重传会产生重复，序列号机制能够处理，接收方需在ACK中显式告知所确认的分组；</li> <li>需要定时器。</li></ul> <p><img src="/notebook/assets/img/image-20211020094940388.ddc29af3.png" alt="image-20211020094940388"></p> <div class="custom-block note"><p class="custom-block-title">rdt3.0</p> <ul><li><p><strong>Sender</strong>：基本类似rdt2.2版本。等待调用0状态 --&gt;打包发送pkt0,开始计时 --&gt; 停等0状态:</p> <ul><li>① 收到ACK1或ACK/NAK混淆,触发计数器进入（计时一直进行）</li> <li>② 时间到,重发pkt0,重新计时</li> <li>③ 收到ACK0且反馈本身无误,停止计时--&gt;进入等待调用1状态</li></ul></li> <li><p><strong>Receiver</strong>：等待传入0状态:</p> <ul><li>① 收到pkt1或传递出错,返回ACK1,保持等待0</li> <li>②收到pkt0且传递无误,返回ACK0 --&gt; 进入等待传入1状态</li></ul></li></ul></div> <p>总结rdt3.0的四种运行，分组号总在 01 间交替，因此叫<strong>比特交替协议</strong>。</p> <details class="custom-block details"><summary>rdt3.0 运行示例</summary> <table><thead><tr><th style="text-align:center;">无丢包操作</th> <th style="text-align:center;">分组丢失</th> <th style="text-align:center;">丢失ACK</th> <th style="text-align:center;">过早超时</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="/notebook/assets/img/1578710212449-23314ee8-25b6-4fd8-97e4-aecc65c23cee.12043eee.png" alt="img"></td> <td style="text-align:center;"><img src="/notebook/assets/img/1578710212482-d0dbe965-8147-41c2-9439-81cba458e3d3.1cd1f4e9.png" alt="img"></td> <td style="text-align:center;"><img src="/notebook/assets/img/1578710212524-e5e4f04d-59ab-4a3e-9b70-97f33cacf4f0.169ef935.png" alt="img"></td> <td style="text-align:center;"><img src="/notebook/assets/img/1578710212531-1b7f629b-e81b-45b9-a950-e79b40b40c60.d6e714c5.png" alt="img"></td></tr></tbody></table></details> <p>归纳一下数据传输协议的要点，在检验和、序号、定时器、肯定和否定确认分组这些技术中，每种机制都在协议的运行中起到了必不可少的作用。</p> <h3 id="_4-2-信道利用率分析"><a href="#_4-2-信道利用率分析" class="header-anchor">#</a> 4.2 信道利用率分析</h3> <p>rdt3.0 信道利用过低，以下面的例子来证明。</p> <p>考虑 A 与 B 通信，两端的往返传播时延 RTT = 30ms，彼此通过一条发送速率 R = 1 Gbps 的信道相连，分组长 L = 1000 byte = 8000 bit，发送一个分组进入链路的所需时间是：</p> <p></p><p><mjx-container jax="CHTML" display="true" class="MathJax"><mjx-math display="true" class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="r"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mi class="mjx-i"><mjx-c c="L"></mjx-c></mjx-mi></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mrow><mjx-mn class="mjx-n"><mjx-c c="8"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="b"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-TeXAtom><mjx-mo class="mjx-n"><mjx-c c="/"></mjx-c></mjx-mo></mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="p"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="k"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi></mjx-mrow></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mrow><mjx-msup><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c><mjx-c c="0"></mjx-c></mjx-mn><mjx-script style="vertical-align:0.393em;"><mjx-mn size="s" class="mjx-n"><mjx-c c="9"></mjx-c></mjx-mn></mjx-script></mjx-msup><mjx-mi class="mjx-i"><mjx-c c="b"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-TeXAtom><mjx-mo class="mjx-n"><mjx-c c="/"></mjx-c></mjx-mo></mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi></mjx-mrow></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="8"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="3BC"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-TeXAtom><mjx-mo class="mjx-n"><mjx-c c="/"></mjx-c></mjx-mo></mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="p"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="k"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi></mjx-math></mjx-container></p><p></p> <p>在停等协议下，sender 从 t = 0 开始发送分组，<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mi space="4" class="mjx-i"><mjx-c c="L"></mjx-c></mjx-mi><mjx-TeXAtom><mjx-mo class="mjx-n"><mjx-c c="/"></mjx-c></mjx-mo></mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="8"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="3BC"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi></mjx-math></mjx-container>后最后 1 bit 数据进入信道。经过 15ms 到达 receiver，所以最后 1 bit 在 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mi space="4" class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-TeXAtom><mjx-mo class="mjx-n"><mjx-c c="/"></mjx-c></mjx-mo></mjx-TeXAtom><mjx-mn class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn><mjx-mo space="3" class="mjx-n"><mjx-c c="+"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="L"></mjx-c></mjx-mi><mjx-TeXAtom><mjx-mo class="mjx-n"><mjx-c c="/"></mjx-c></mjx-mo></mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="1"></mjx-c><mjx-c c="5"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="8"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi></mjx-math></mjx-container> 时到达 receiver。假设 ACK 分组很小从而忽略发送时间，接收方一旦受到一个数据分组后立刻发送 ACK，所以 ACK 在 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mi space="4" class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="+"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="L"></mjx-c></mjx-mi><mjx-TeXAtom><mjx-mo class="mjx-n"><mjx-c c="/"></mjx-c></mjx-mo></mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="3"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="8"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi></mjx-math></mjx-container> 到达 sender，此时 sender 可以发送下一个报文。因此，在 30.008 ms 内，sender 只用了 0.008ms。</p> <p>发送方<mark>信道的利用率</mark>：发送方实际忙于将发送比特送进信道的那部分时间与发送时间之比，发送发利用率为：</p> <p></p><p><mjx-container jax="CHTML" display="true" class="MathJax"><mjx-math display="true" class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="U"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="r"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mrow><mjx-mi class="mjx-i"><mjx-c c="L"></mjx-c></mjx-mi><mjx-TeXAtom><mjx-mo class="mjx-n"><mjx-c c="/"></mjx-c></mjx-mo></mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi></mjx-mrow></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mrow><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="+"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="L"></mjx-c></mjx-mi><mjx-TeXAtom><mjx-mo class="mjx-n"><mjx-c c="/"></mjx-c></mjx-mo></mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi></mjx-mrow></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="8"></mjx-c></mjx-mn></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mn class="mjx-n"><mjx-c c="3"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="8"></mjx-c></mjx-mn></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="0"></mjx-c><mjx-c c="."></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="0"></mjx-c><mjx-c c="2"></mjx-c><mjx-c c="7"></mjx-c></mjx-mn></mjx-math></mjx-container></p><p></p> <h3 id="_4-3-流水线可靠数据传输"><a href="#_4-3-流水线可靠数据传输" class="header-anchor">#</a> 4.3 流水线可靠数据传输</h3> <p>这是对 rdt3.0 停等协议的一种改进。rdt3.0中信道的利用率过低，一个简单解决办法是：不以停等方式运行，允许发送发发送多个分组而无需等待确认。许多从发送方向的分组可视为一条流水线，故这种技术被称为流水线技术。</p> <p><img src="/notebook/assets/img/1578710273568-cbc90c4a-1eaa-4e90-a742-4399ef00a314.f007f954.png" alt="img"></p> <ul><li>必须增加序号范围。每个输送中的分组必须有一个唯一的序号。</li> <li>协议的 sender 和 receiver 两端不得不缓存搓个分组。sender 至少应能缓冲已发送但还未确认的分组，receiver 或许也需要缓存那些已正确接收的分组。</li> <li>所需序号范围和对缓冲的要求取决于协议如何处理丢失、损坏以及延时过大的分组。解决流水线的差错恢复有两种方法：回退 N 步（GBN）协议和选择重传（SR）协议。</li></ul> <h4 id="_4-3-1-回退-n-步协议-gbn-协议"><a href="#_4-3-1-回退-n-步协议-gbn-协议" class="header-anchor">#</a> 4.3.1 回退 N 步协议（GBN 协议）</h4> <p>GMN 协议允许发送方发送多个分组（当有多个分组可用时）而不需要等待确认，但也受限于在流水线中未确认的分组数不能超过某个最大允许数 N。</p> <p><img src="/notebook/assets/img/image-20211020102611054.0b665ce8.png" alt="image-20211020102611054"></p> <ul><li>基序号（base）：最早未确认分组的序号；</li> <li>下一个序号（nextseqnum）：最小的未使用的序号（即下一个待发分组的序号）；</li> <li>N：窗口长度，即流水线中未确认的分组数不能超过最大允许数 N。</li> <li>[0, base - 1] 段内的序号：已经发送并被确认的分组</li> <li>[base, nextseqnum - 1] 段内的序号：已经发送但未被确认的分组</li> <li>[nextseqnum, base + N - 1] 段内的序号：能用于那些要立即被发送的分组</li></ul> <blockquote><p>施加 N 的窗口大小的限制原因是：1. 流量控制 2. 拥塞控制</p></blockquote> <p>在实践中，如果分组的序号字段的比特数为 k，则序号范围是 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mo class="mjx-n"><mjx-c c="["></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="0"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c c=","></mjx-c></mjx-mo><mjx-msup><mjx-mn class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn><mjx-script style="vertical-align:0.363em;"><mjx-mi size="s" class="mjx-i"><mjx-c c="k"></mjx-c></mjx-mi></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c c="]"></mjx-c></mjx-mo></mjx-math></mjx-container>，所有涉及序号的运算必须使用模 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msup><mjx-mn class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn><mjx-script style="vertical-align:0.363em;"><mjx-mi size="s" class="mjx-i"><mjx-c c="k"></mjx-c></mjx-mi></mjx-script></mjx-msup></mjx-math></mjx-container> 运算。</p> <blockquote><p>在 TCP 中有一个 32 bit 的序号字段，其中 TCP 序号是按字节流中的字节来进行计数的，而不是按分组计数。</p></blockquote> <p><strong>sender FSM</strong>：</p> <p><img src="/notebook/assets/img/1578710503540-921f7fb7-640e-485c-8876-57f1fbf8cd38.77542e39.png" alt="image.png"></p> <div class="custom-block note"><p class="custom-block-title">GBN sender</p> <ol><li>初始base=(next)seq=1,此后等待上层的调用，只要seq&lt;base+N即buffer未满,就可接收数据打包发送,然后seq++;（如果发送数据时 base == seq，表示没有已发送但未被确认的分组，此时定时器要重启）</li> <li>如果收到正确ACK，对序号为 n 的分组的确认采用<strong>累计确认</strong>的方式，表明接收方已正确接收到序号 n 及以前的所有分组。当base==seq说明buffer里没有pkt等待确认,停止计时,否则重启计时;</li> <li>收到错误回复时什么都不用做；</li> <li>当时间到发生超时事件,重发当前窗口从[base]~[seq-1]的所有pkt</li></ol></div> <p>所以 GBN Sender 一共响应三种类型的事件：上层的调用、收到一个 ACK、超时事件。</p> <p><strong>receiver FSM</strong>：</p> <p><img src="/notebook/assets/img/1578710530129-70d3bd9c-1515-4efc-97a4-62161e3c8bc5.06f32273.png" alt="img"></p> <div class="custom-block note"><p class="custom-block-title">GBN receiver</p> <ol><li>初始化(expect)seq=1;</li> <li>接收到正确且合序的pkt,提取数据，并将分组数据交付到上层,返回对应序号的ACK,seq++;</li> <li>其余默认情况下丢弃收到的分组并返回当前最大正确顺序seq的ACK;</li></ol></div> <p>GBN 特点：</p> <ol><li><em>顺序性</em>：对于sender,必须收到base的ACK才能窗口向右滑动,否则do nothing;对于receiver,必须接收expectseq的pkt才能返回相应序号的ACK并seq++</li> <li><em>按窗口重发</em>：当timeout时,无论处于sender的 [base, seq-1] 的pkt是否能正确到达,重发所有(回退)</li> <li><em>累计确认</em>：对序号为n的分组确认时,表明接收方对n和n之前所有的pkt都正确接收</li></ol> <h4 id="_4-3-2-选择重传-sr"><a href="#_4-3-2-选择重传-sr" class="header-anchor">#</a> 4.3.2 <strong>选择重传</strong>（SR）</h4> <p>GBN 本身存在的性能问题：单个分组的差错就能够引起 GBN 重传大量分组，许多分组根本没必要重传。随着信道差错率的增加，流水线可能会被这些不必要重传的分组所充斥。</p> <p>选择重传协议通过让发送方仅重传那些它怀疑在接收方出错（丢失或受损）的分组而避免了不必要的重传。再次用 N 来限制流水线中未完成、未被确认的分组个数。</p> <p><img src="/notebook/assets/img/1578710807818-84e95a42-df26-4fb2-a94f-f470df221f81.bc3591f8.png" alt="img"></p> <div class="custom-block note"><p class="custom-block-title">SR</p> <p><strong>Sender 的事件与动作：</strong></p> <ol><li><strong>从上层收到数据</strong>。当从上层接收到数据后，SR 发送方检查下一个可用于该分组的序号。如果序号位于发送方的窗口内，则将数据打包并发送；否则就像在 GBN 中一样，要么将数据缓存，要么将其返回给上层以便以后传输。</li> <li><strong>超时</strong>。定时器再次被用来防止丢失分组。然而，<u>现在每个分组必须拥有其自己的逻辑定时器</u>，因为超时发生后只能发送一个分组。可以使用单个硬件定时器模拟多个逻辑定时器的操作。</li> <li><strong>收到 ACK</strong>。如果收到 ACK ，倘若该分组序号在窗口内，则SR发送方将那个被确认的分组标记为已接收。 如果该分组的序号等于 send_base，则窗口基序号向前移动到具有最小序号的未确认分组处。如果窗口移动了并且有序号落在窗口内的未发送分组，则发送这些分组。</li></ol> <p><strong>Receiver 的事件与动作：</strong></p> <ol><li><strong>序号在 [rcv_base, rcv_base+ N - 1] 内的分组被正确接收</strong>。在此情况下，收到的分组落在接收方的窗口内，一个选择 ACK 被回送给发送方。如果该分组以前没收到过，则缓存该分组。如果该分组的序号等于接收窗口 的基序号（rcv_base）,则该分组以及以前缓存的序号连续的（起始于rcv_base的）分组交付给上层。 然后，接收窗口按向前移动分组的编号向上交付这些分组。举例子来说如下图，当收到一个序号为 rcv_base=2 的分组时，该分组及分组3、4、5可被交付给上层。</li> <li><strong>序号在 [rcv_base - N, rcv_base - 1] 内的分组被正确收到</strong>。在此情况下，必须产生一个ACK，即使该分组是接收方以前已确认过的分组。</li> <li><strong>其他情况</strong>。忽略该分组。</li></ol> <p><img src="/notebook/assets/img/1578710807888-cfc62a00-5a11-48d4-a908-3e12217418a7.13c44189.png" alt="img"></p></div> <ul><li>SR 接收方将确认一个正确接收的分组而不管其是否按序。失序的分组将被缓存直到所有的丢失分组（即序号更小的分组）皆被收到为止，这时才可以将一批分组按序交付给上层。所以 SR 未采用累积确认机制。</li> <li>SR 协议为每个分组设置了一个计时器。</li></ul> <div class="custom-block warning"><p class="custom-block-title">Notice</p> <p>Notice 1：接收方重新确认（而不是忽略）已收到过的那些序号小于当前窗口基序号的分组</p> <p>例如，给定在图3-23中所示的发送方和接收方的序号空间，如果分组send_base的ACK没有从接收方传播回发送方，则发送方最终将重传分组send_base,即使显然（对我们而不是对发送方来说）接收方已经收到了该分组。如果接收方不确认该分组，则发送方窗口将永远不能向前滑动！这个例子说明了SR协议(和很多其他协议一样)的一个重要方面。<u>对于哪些分组已经被正确接收，哪些没有，发送方和接收方并不总是能看到相同的结果。对SR协议 而言，这就意味着发送方和接收方的窗口并不总是一致</u>。</p></div> <div class="custom-block warning"><p class="custom-block-title">Notice</p> <p>Notice 2：窗口长度必须小于或等于序号空间大小的一半</p> <p>当我们面对有限序号范围的现实时，发送方和接收方窗口间缺乏同步会产生严重的后果。考虑下面例子中可能发生的情况，该例有包括4个分组序号0、1、2、3的有限序号范围且窗口长度为 3。假定发送了分组0至2,并在接收方被正确接收且确认了。此时，接收方窗口落在第4、5、6个分组上，其序号分别为3、0、1。现在考虑两种情况：</p> <ul><li>在第一种情况下，如下图 a 所示，对前3个分组的ACK丢失，因此发送方重传这些分组。因此，接收方下一步要接收序号为0的分组，即第一个发送分组的副本。</li> <li>在第二种情况下，如下图 b 所示，对前3个分组的ACK都被正确交付。因此发送方向前移动窗口并发送第4、5、6个分组，其序号分别为3、0、1。序号为3的分组丢失，但序号为0的分组到达(一个包含新数据的分组)。</li></ul> <p><img src="/notebook/assets/img/1578711021159-42bf4aac-6e64-4079-80af-033f1d53e6ec.d01711f2.png" alt="img"></p></div> <div class="custom-block tip"><p class="custom-block-title">例题</p> <ol><li><p><img src="/notebook/assets/img/1578711004983-6d4040b5-6d43-4cee-91f0-0bcbe6b28f70.90bc6812.png" alt="img"></p> <p><strong>解</strong>：这道题先分析b更合适,注意在GBN下:</p> <p>b).接收方expseq=k,说明从pkt[k-N]~pkt[k-1]都已经确认接收返回ACK,则取值范围[k-N,k-1]</p> <p>a).由b),接收方返回了N个ACK,但不能保证都正确抵达:</p> <ul><li>最坏:N个ACK都出问题,sender的base还是k-N,则seq取值范围[k-N,k-1]</li> <li>最好:N个ACK都正确接收,窗口已经移动N位,base=k,此时seq的变化范围[k,k+N-1]</li></ul> <p><img src="/notebook/assets/img/1578711021159-42bf4aac-6e64-4079-80af-033f1d53e6ec-1634704940724.0cf19c12.png" alt="image.png"></p> <p>SR接收方窗口大小问题--分组序号有限:0,1,2,3且receiver窗口大小为3.
a)receiver的三个ACK全部丢失,因此sender需要重传第一次的seq为012的pkt012</p> <p>b)sender发送pkt3丢失,产生不同步,sender发送pkt4(seq0).receiver需要确认seq3和第二次出现的seq0==&gt;对于receiver来说,无法辨别这时的seq0是新pkt或者重传</p></li> <li><p><img src="/notebook/assets/img/1578711045996-676ff583-3382-40ff-862b-0beb6edef541.4e172202.png" alt="img"></p></li></ol> <p><strong>解</strong>：结合上一题,依旧设此时expseq=k,窗口大小N</p> <p>考虑极端情况下,s和r&quot;最不同步&quot;的情况即receiver接受了N个pkt,返回的N个ACK全部丢失.此时receiver窗口最右端为k+N-1;sender的seq最坏为k-N,此时最大不同步距离为<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="k"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="+"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="N"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn space="3" class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn><mjx-mo space="3" class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mo space="3" class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="k"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="N"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="N"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mn space="3" class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container></p> <p>包含2N个不同序列号,则为了避免发生序号重叠,应该保证序号空间范围k≥2N</p></div> <h2 id="_5-tcp"><a href="#_5-tcp" class="header-anchor">#</a> 5. TCP</h2> <h3 id="_5-1-tcp-连接"><a href="#_5-1-tcp-连接" class="header-anchor">#</a> 5.1 TCP 连接</h3> <p><img src="/notebook/assets/img/image-20211020131302555.2236c279.png" alt="image-20211020131302555"></p> <p>TCP连接是逻辑练级，只在端系统运行，中间的网络元素不会维持 TCP 的连接状态。 TCP 是全双工、点对点的。</p> <p>建立连接的过程被称为&quot;三次握手&quot;。</p> <p>客户进程通过 socket 传递数据流，数据一旦通过这个门，就由 TCP 控制了。TCP 将这些数据引导到<strong>发送缓存</strong>中，接下来 TCP 时不时地从发送缓存中取出一块数据传递给网络层。</p> <ul><li>TCP 规范并没有提及应何时实际发送缓存中的数据给网络层；</li> <li>TCP 从缓存中取出的报文段中的数据量受限于<strong>最大报文段长度（MSS）</strong>。MSS 通常根据最大链路层长度（即最大传输单元 <strong>MTU</strong>）来设置。设置 MSS 要保证一个 TCP 报文段加上 TCP/IP 首部长度（通常 40 byte）将适合单个链路层帧。以太网和PPP都有 1500 byte 的 MTU，所以 MSS 典型值为 1460。</li></ul> <blockquote><p>注意 MSS 是指报文段中应用层数据的最大长度，而不是包括首部的 TCP 报文段的最大长度。</p></blockquote> <p>TCP 为每块客户数据配上一个 TCP 首部，从而形成多个 TCP 报文段。 连接的每一段都有各自的发送缓存和接收缓存。</p> <h3 id="_5-2-tcp-报文段结构"><a href="#_5-2-tcp-报文段结构" class="header-anchor">#</a> 5.2 TCP 报文段结构</h3> <p>TCP 报文段由首部字段和一个数据字段组成。</p> <p><img src="/notebook/assets/img/image-20211020131434731.1a4f1f89.png" alt="image-20211020131434731"></p> <ul><li>Source port、Dest port：实现多路复用和多路分解；</li> <li>seq num（32 bit）和 ack num（32 bit）：实现可靠数据传输；</li> <li>recv window：用于流量控制，指示接收方愿意接受的字节数量；</li> <li>header length：TCP 首部长度可变，通常该字段为空，典型长度是 20 byte；</li> <li>options：协商 MSS；窗口调节因子；时间戳选项；</li> <li>flat field（6 bit）：ACK 比特指示确认字段中的值是有效的；RST、SYN、FIN 用于连接的建立和拆除。</li></ul> <h4 id="_5-2-1-序号和确认号"><a href="#_5-2-1-序号和确认号" class="header-anchor">#</a> <strong>5.2.1 序号和确认号</strong></h4> <p>TCP 把数据看成一个无结构的、有序的字节流，一个报文段的<mark>序号</mark>是该报文段首字节的字节流编号。</p> <p>比如一个包含 50 0000 字节的文件，MSS = 1000 字节，那么有：</p> <p><img src="/notebook/assets/img/image-20211020133919935.a23fe94a.png" alt="image-20211020133919935"></p> <ul><li>这里我们假设初始序号为 0，但实际上一条 TCP 连接的双方均可以<strong>随机地选择初始序号</strong>。这样做可以减少将那些仍在网络中存在的来自两台主机之间先前已终止的连接的报文段，误认为是后来这两台主机之间新建连接所产生的的有效报文段的可能性。</li></ul> <p>主机 A 填充进报文段的<mark>确认号</mark>是主机 A 期望从主机 B 收到的下一个字节的序号。</p> <p><strong>例子</strong>：假设主机A已收到一个来自主机B的包含字节0~535的报文段，以及另一个包含字节900~1000的报文段。由于某种原因，主机A还没有收到字节536~899的报 文段。在这个例子中，主机A为了重新构建主机B的数据流，仍在等待字节536(和其后的字节)。因此，A到B的下一个报文段将在确认号字段中包含536因为TCP只确认该流中至第一 个丢失字节为止的字节，所以TCP被称为<strong>提供累积确认</strong>。</p> <p>TCP RFC并没有为<u>失序到达的报文段如何处理</u>作规定任何规则，这留给编程人员去实现，可选方案：</p> <ul><li>接收方立即丢弃失序报文段；（更简单）</li> <li>接收方保留失序的字节，并等待缺少的字节以填补该间隔。（效率更高，实际所采用）</li></ul> <details class="custom-block details"><summary>Example</summary> <p>一个回显程序的交互过程：</p> <p><img src="/notebook/assets/img/image-20211020141011774.43c51a4a.png" alt="image-20211020141011774"></p> <ul><li><p>第二个报文段由服务器发送给客户，有两个目的：</p> <ul><li>对收到的数据提供一个确认；</li> <li>回显字符 'C'</li></ul> <p>这种确认被称为是被<strong>捎带</strong>在服务器到客户的数据报文段中的。</p></li></ul></details> <h3 id="_5-3-往返时间的估计与超时"><a href="#_5-3-往返时间的估计与超时" class="header-anchor">#</a> 5.3 往返时间的估计与超时</h3> <p>TCP 采用超时/重传机制来处理报文段的丢失问题，这与 rdt 思路一致。但问题也有很多，最明显的就是超时间隔必须大于该连接的往返时间。</p> <p><strong>SampleRTT</strong>：报文段的样本 RTT，是从某报文段被发出（交给 IP）到对该报文段的确认被收到之间的时间量。</p> <ul><li>仅在某个时刻做一次 SampleRTT 测量；决不为已被重传的报文段计算。</li></ul> <p><strong>EstimatedRTT</strong>：是 SampleRTT 的加权平均值，每收到一个新 SampleRTT，就会更新 EstimatedRTT：</p> <p></p><p><mjx-container jax="CHTML" display="true" class="MathJax"><mjx-math display="true" class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="E"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mo space="4" class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn><mjx-mo space="3" class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="3B1"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo><mjx-mo space="3" class="mjx-n"><mjx-c c="22C5"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="E"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="+"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="3B1"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="22C5"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="S"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="p"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="l"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi></mjx-math></mjx-container></p><p></p> <p><strong>DevRTT</strong>：RTT 的偏差，用于表征 RTT 的变化：</p> <p></p><p><mjx-container jax="CHTML" display="true" class="MathJax"><mjx-math display="true" class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="D"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="v"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mo space="4" class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn><mjx-mo space="3" class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo><mjx-mo space="3" class="mjx-n"><mjx-c c="22C5"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="D"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="v"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="+"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="22C5"></mjx-c></mjx-mo><mjx-mo space="3" class="mjx-n"><mjx-c c="|"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="S"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="p"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="l"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="E"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="|"></mjx-c></mjx-mo></mjx-math></mjx-container></p><p></p> <ul><li><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi></mjx-math></mjx-container>的推荐值为 0.25</li></ul> <p>有了上面的数据，超时间隔应该大于等于 EstimatedRTT，否则将造成不必要的重传，但也不能打太多，应给 Estimated 加一个余量：</p> <p></p><p><mjx-container jax="CHTML" display="true" class="MathJax"><mjx-math display="true" class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="o"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="u"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="r"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="v"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="l"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mi space="4" class="mjx-i"><mjx-c c="E"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="+"></mjx-c></mjx-mo><mjx-mn space="3" class="mjx-n"><mjx-c c="4"></mjx-c></mjx-mn><mjx-mo space="3" class="mjx-n"><mjx-c c="22C5"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="D"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="v"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi></mjx-math></mjx-container></p><p></p> <p>推荐初始 TimeoutInterval 值为 1 秒，只要报文段更新 EstimatedRTT，就用上述公式再次计算 TimeoutInterval。</p> <h3 id="_5-4-可靠数据传输"><a href="#_5-4-可靠数据传输" class="header-anchor">#</a> 5.4 可靠数据传输</h3> <p>TCP 确保一个进程读出的数据流<u>无损坏、无间隙、非冗余和按序</u>。</p> <ul><li>TCP 的报文段编号是第一个数据字节的字节流编号。</li> <li>仅使用单一的重传定时器。</li></ul> <h4 id="_5-4-1-tcp-发送方事件"><a href="#_5-4-1-tcp-发送方事件" class="header-anchor">#</a> <strong>5.4.1 TCP  发送方事件</strong></h4> <p>● 事件1：<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle style="color:blue;"><mjx-mo class="mjx-n"><mjx-utext variant="normal" style="font-family:serif;">从</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">应</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">用</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">层</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">收</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">到</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">数</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">据</mjx-utext></mjx-mo></mjx-mstyle></mjx-math></mjx-container></p> <p>将数据封装到报文段中，加编号，定时器未开启则启动定时器，时间间隔为 TimeoutInterval。</p> <p>● 事件2：<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle style="color:blue;"><mjx-mo class="mjx-n"><mjx-utext variant="normal" style="font-family:serif;">超</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">时</mjx-utext></mjx-mo></mjx-mstyle></mjx-math></mjx-container></p> <p>重传引起超时的报文段，然后重启定时器。</p> <p>● 事件3：<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle style="color:blue;"><mjx-mo class="mjx-n"><mjx-utext variant="normal" style="font-family:serif;">收</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">到</mjx-utext></mjx-mo><mjx-mi space="4" class="mjx-i"><mjx-c c="A"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="C"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="K"></mjx-c></mjx-mi></mjx-mstyle></mjx-math></mjx-container></p> <p>采用<u>累计确认</u>，若 seq &gt; sendBase 则更新 sendBase = seq；若还有未确认报文段则重启定时器。</p> <p><strong>TCP 发送端程序：</strong></p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>NextSeqNum <span class="token operator">=</span> InitialSeqNum
SendBase <span class="token operator">=</span> InitialSeqNum

<span class="token function">loop</span> <span class="token punctuation">(</span>forever<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">switch</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
    
	event<span class="token operator">:</span> data received from application above 
		create TCP segment with sequence number NextSeqNum 
		<span class="token keyword">if</span> <span class="token punctuation">(</span>timer currently not running<span class="token punctuation">)</span>
			start timer
		pass segment to IP 
		NextSeqNum <span class="token operator">=</span> NextSeqNum <span class="token operator">+</span> <span class="token function">length</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> 
	event<span class="token operator">:</span> timer timeout
		retransmit not<span class="token operator">-</span>yet<span class="token operator">-</span>acknowledged segment with 
		smallest sequence number
		start timer
	event<span class="token operator">:</span> ACK received<span class="token punctuation">,</span> with ACK field value of y 
		<span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">&gt;</span> SendBase<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
			SendBase <span class="token operator">=</span> y
			<span class="token keyword">if</span> <span class="token punctuation">(</span>there are currently not<span class="token operator">-</span>yet<span class="token operator">-</span>acknowledged segments<span class="token punctuation">)</span>
			start timer 
		<span class="token punctuation">}</span> 
	<span class="token punctuation">}</span> <span class="token comment">/* end of loop forever */</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><strong>一些有趣的情况</strong>：</p> <p><strong>情况1</strong>：A 向 B 发送一个序号为 92 大小 8 byte 的报文段，发出后 A 等待一个确认号为 100 的报文段。B 收到但回给 A 的确认报文丢失，这时超时事件发生，A 重传相同的报文段，B 再次收到后根据序号发现重复则丢弃。</p> <p><strong>情况2</strong>：A 连续发送了两个报文段  <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B1"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container> （seq 92，size 8）和 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B1"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn></mjx-math></mjx-container>（seq 100，size 20）。假设 B 都收到并回复两个确认报文 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container>（ack 100）和 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn></mjx-math></mjx-container>（ack 120）。假设两个确认报文都没有成功到达 A，当超时事件发生时，A 重传 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B1"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container>，B 再回复 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn></mjx-math></mjx-container>，这时 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn></mjx-math></mjx-container> 成功到达 A，则 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B1"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn></mjx-math></mjx-container> 不会被重传。</p> <p><strong>情况3</strong>：A 发送了与情况2中相同的报文，B 回复后<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn></mjx-math></mjx-container>丢失，<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn></mjx-math></mjx-container>到达，则 A 收到 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="3B2"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn></mjx-math></mjx-container> 后知道序号 119 及之前的报文全部收到了，因此不会重传任何报文。</p> <h4 id="_5-4-2-超时间隔加倍"><a href="#_5-4-2-超时间隔加倍" class="header-anchor">#</a> <strong>5.4.2 超时间隔加倍</strong></h4> <p>定时器超时后，TCP 重传具有最小序号但还未被确认的报文段，并<u>将下次的超时时间间隔设置为先前值的两倍</u>，而不是用从 EstimatedRTT 和 DevRTT 推算到的值。</p> <p>然而，每当定时器因另外两个事件而启动时，TimeoutInterval 都是由最近的 EstimatedRTT 和 DevRTT 推算得到。</p> <blockquote><p>因为定时器超时很可能是因为网络拥塞造成的，如果持续重传，反而使得拥塞更加严重。</p></blockquote> <h4 id="_5-4-3-快速重传"><a href="#_5-4-3-快速重传" class="header-anchor">#</a> <strong>5.4.3 快速重传</strong></h4> <blockquote><p>问题：超时重传周期可能比较长，当一个报文段丢失时，这种长超时周期会延迟发送发重传丢失的分组。</p></blockquote> <p><strong>冗余 ACK</strong>：指再次确认某个报文段的 ACK，而发送方先前已经收到了对该报文段的确认。</p> <div class="custom-block note"><p class="custom-block-title">接收方产生 ACK 的建议</p> <table><thead><tr><th>事件</th> <th>TCP 接收方动作</th></tr></thead> <tbody><tr><td>具有所期望序号的按序报文到达，所有在期望序号及以前的数据都已经确认</td> <td>延迟的 ACK（为了看一下是否有下一个按序报文段到来）。最多等待 500ms，如果下一个没有来则回复 ACK。</td></tr> <tr><td>具有所期望序号的按序报文段达到。另一个按序报文段等待 ACK 传输</td> <td>立刻发送单个累积 ACK，以确认两个按序报文段。</td></tr> <tr><td>比期望序号大的失序报文段到达。检测出间隔</td> <td>立刻发送冗余 ACK，指示下一个期待字节的序号（其为间隔的低端的序号）</td></tr> <tr><td>能部分或完全填充接收数据间隔的报文</td> <td>倘若该报文段起始于间隔的低端，则立刻发送 ACK</td></tr></tbody></table></div> <p><u>如果 TCP 发送发接收到对相同数据的 3 个冗余 ACK</u>，它把这当成一种指示，说明跟在这个已被确认过 3 次的报文段之后的报文段已经丢失。一旦收到 3 个冗余的 ACK，TCP 就执行<strong>快速重传</strong>，即<u>在该报文段的定时器过期之前重传丢失的报文段</u>。</p> <h4 id="_5-4-4-tcp-的可靠传输是-gbn-还是-sr"><a href="#_5-4-4-tcp-的可靠传输是-gbn-还是-sr" class="header-anchor">#</a> 5.4.4 TCP 的可靠传输是 GBN 还是 SR？</h4> <p>TCP 是一个 GBN 协议还是一个 SR 协议：</p> <ul><li>TCP 确认是累积式的，接收失序的报文段不会被接收方逐个确认；</li> <li>TCP 仅维护 SendBase、NextSeqNum 两个变量；</li> <li>TCP 重传至多一个分组；</li> <li>一种对 TCP 的修改意见是接收方有选择地确认失序报文段</li></ul> <p>=&gt; TCP 的差错恢复机制是 GBN 和 SR 的混合体。</p> <h3 id="_5-5-流量控制"><a href="#_5-5-流量控制" class="header-anchor">#</a> 5.5 流量控制</h3> <blockquote><p>如果某应用程序从接收缓冲区读取数据相对缓慢，而发送方发送的太多、太快，发送的数据就会很容易地使该连接的接收缓存溢出，因此 TCP 提供了流量控制服务来消除这种可能性。</p></blockquote> <p><strong>流量控制</strong>是一个速度匹配服务，即发送方的发送速率与接收方应用程序读取速率相匹配。TCP 通过让发送方维护一个称为<strong>接收窗口</strong>的变量来提供流量控制。通俗的说，<u>接收窗口用于给发送方一个指示——该接收方还有多少可用的缓存空间</u>。</p> <p>接收窗口用 <code>rwnd</code> 表示，根据缓存可用空间数量来设置：</p> <p><img src="/notebook/assets/img/image-20211022202319577.db2a9615.png" alt="image-20211022202319577"></p> <p></p><p><mjx-container jax="CHTML" display="true" class="MathJax"><mjx-math display="true" class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="r"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mi space="4" class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="c"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="v"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="B"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="u"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="f"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="f"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="r"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mo space="3" class="mjx-n"><mjx-c c="["></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c c="L"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="B"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="y"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="c"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="v"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="L"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="B"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="y"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="R"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="]"></mjx-c></mjx-mo></mjx-math></mjx-container></p><p></p> <p><strong>利用 rwnd 实现流量控制的方式</strong>：</p> <ul><li><p>主机 B 通过把当前的 rwnd 值放入发给主机 A 的报文段接收窗口字段中，通知主机 A 它在该连接的缓存中还有多少可用空间。</p></li> <li><p>主机 A 跟踪两个变量：<code>LastByteSent</code>和<code>LastByteAcked</code>，两变量之差就是 A 发送出去但还未被确认的数据量，通过将该数据量控制在<code>rwnd</code>以内即可保证 B 的接收缓存不会溢出。</p></li></ul> <p><strong>还存在的问题</strong>：假设 B 告诉了 A 自己的 rwnd = 0，还没有什么数据要发给 A，这样待 B 清空缓存后 A 也无法知道，所以主机 A 将被阻塞而再也不能发送数据。 sol：TCP 规范要求，当 B 的 rwnd = 0 时，A 继续发送只有一个字节数据的报文段，这些报文段将会被 B 确认，最终缓存将开始清空，并且确认报文里将包含一个非 0 的 rwnd 值。</p> <h3 id="_5-6-tcp-连接管理"><a href="#_5-6-tcp-连接管理" class="header-anchor">#</a> 5.6 TCP 连接管理</h3> <h4 id="_5-6-1-三次握手"><a href="#_5-6-1-三次握手" class="header-anchor">#</a> <strong>5.6.1 三次握手</strong></h4> <p><img src="/notebook/assets/img/image-20211022211106877.7cd29ffb.png" alt="image-20211022211106877"></p> <ol><li><p><strong>step1</strong>：client 给 server 发送一个 <strong>SYN 报文段</strong>，同时带上随机选择的初始序号 client_isn；<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle style="color:blue;"><mjx-mi class="mjx-i"><mjx-c c="S"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="Y"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="N"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c c=","></mjx-c></mjx-mo><mjx-mi space="2" class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="q"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mi space="4" class="mjx-i"><mjx-c c="c"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="l"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-n"><mjx-c c="_"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-mstyle></mjx-math></mjx-container></p></li> <li><p><strong>step2</strong>：server 分配缓存和变量，回复一个 <strong>SYNACK 报文段</strong>（SYN置1；确认号 client_isn + 1；服务器的初始序号 server_isn）；<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle style="color:blue;"><mjx-mi class="mjx-i"><mjx-c c="S"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="Y"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="N"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c c=","></mjx-c></mjx-mo><mjx-mi space="2" class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="q"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mi space="4" class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="r"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="v"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="r"></mjx-c></mjx-mi><mjx-mi class="mjx-n"><mjx-c c="_"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=","></mjx-c></mjx-mo><mjx-mi space="2" class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="c"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="k"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mi space="4" class="mjx-i"><mjx-c c="c"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="l"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-n"><mjx-c c="_"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="+"></mjx-c></mjx-mo><mjx-mn space="3" class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn></mjx-mstyle></mjx-math></mjx-container></p></li> <li><p><strong>step3</strong>：client收到SYNACK，也为连接分配缓存和变量。同时发送另一个报文段给server，对server的报文段进行确认，此时连接已经建立，SYN置为 0，可以携带数据。<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle style="color:blue;"><mjx-mi class="mjx-i"><mjx-c c="S"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="Y"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="N"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mn space="4" class="mjx-n"><mjx-c c="0"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c c=","></mjx-c></mjx-mo><mjx-mi space="2" class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="q"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mi space="4" class="mjx-i"><mjx-c c="c"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="l"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-n"><mjx-c c="_"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="+"></mjx-c></mjx-mo><mjx-mn space="3" class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c c=","></mjx-c></mjx-mo><mjx-mi space="2" class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="c"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="k"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-mi space="4" class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="r"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="v"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="r"></mjx-c></mjx-mi><mjx-mi class="mjx-n"><mjx-c c="_"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="+"></mjx-c></mjx-mo><mjx-mn space="3" class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn></mjx-mstyle></mjx-math></mjx-container></p> <p><strong>之后</strong>：此后可以互相发送seg,在每个seg中SYN都被置为0</p></li></ol> <h4 id="_5-6-2-四次挥手"><a href="#_5-6-2-四次挥手" class="header-anchor">#</a> <strong>5.6.2 四次挥手</strong></h4> <p>假设 client 打算关闭连接：</p> <p><img src="/notebook/assets/img/image-20211024110050730.8bcb3762.png" alt="image-20211024110050730"></p> <ol><li><strong>step1</strong>：client 向 server 发送 <code>FIN</code> 置 1 的终止报文段；</li> <li><strong>step2</strong>：server 收到 FIN，回复 <code>ACK</code>，然后</li> <li><strong>step3</strong>：server 发送自己的 <code>FIN</code> 置 1 的终止报文段；</li> <li><strong>step4</strong>：client 收到 FIN，回复 <code>ACK</code>，server 收到 ACK，连接关闭。</li></ol> <p>实际上，client 和 server 都能主动终止该连接。当连接结束后，主机中的资源将被释放。</p> <h4 id="_5-6-3-tcp-状态"><a href="#_5-6-3-tcp-状态" class="header-anchor">#</a> 5.6.3 <strong>TCP 状态</strong></h4> <p>在一个 TCP 连接的生命周期内，运行在每台主机中的 TCP 协议在各种 <strong>TCP 状态</strong> 之间变迁。</p> <p><strong>client 端</strong>：</p> <p><img src="/notebook/assets/img/image-20211024111130695.7b36d7e1.png" alt="image-20211024111130695"></p> <p><strong>server 端</strong>：</p> <p><img src="/notebook/assets/img/image-20211024111141519.c6c528b4.png" alt="image-20211024111141519"></p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>假如当一台主机接收到一个 TCP 报文段，其端口号或源 IP 地址与该主机上进行中的套接字都不匹配，则该主机将向源发送一个特殊的重置报文段，该 TCP 报文段将 <strong>RST</strong> 置 1，它告诉该源“我没有那个报文段的套接字，请不要再给我发送该报文段了”。</p></div> <h3 id="_5-7-拥塞控制原理"><a href="#_5-7-拥塞控制原理" class="header-anchor">#</a> 5.7 拥塞控制原理</h3> <p>在实践中，丢包一般是在网络拥塞时由于路由器缓存溢出引起的，分组重传因此作为网络拥塞的前兆来对待。</p> <p><strong>非正式定义</strong>： 太多发送主机发送了太多数据或者发送速度太快 ，以至于网络无法处理。</p> <p>拥塞的<strong>表现</strong>：● 分组丢失（路由器缓存溢出） ● 分组延迟过大（在路由器缓存中排队）</p> <div class="custom-block note"><p class="custom-block-title">拥塞控制 VS. 流量控制</p> <p>拥塞控制是链路上的控制；流量控制是 S/R 端的控制</p></div> <h4 id="_5-7-1-拥塞的原因和代价"><a href="#_5-7-1-拥塞的原因和代价" class="header-anchor">#</a> <strong>5.7.1 拥塞的原因和代价</strong> <span class="badge tip" style="vertical-align:top;" data-v-d5affa18>非重点</span></h4> <p><strong>（1）情况 1：两个发送方和一台具有无限大缓存的路由器</strong></p> <ul><li>两个 sender，两个 receiver，在容量为 R 的共享链路上传输</li> <li>一个路由器, 无限缓存</li> <li>没有差错恢复等</li></ul> <p><img src="/notebook/assets/img/image-20211024120133142.456d5bf0.png" alt="image-20211024120133142"></p> <p>每连接的吞吐量：<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANcAAAClCAYAAADPl2h/AAASXUlEQVR4nO3de3SU9Z3H8ffkRmZyMUgSgcg1YoDcQAoqAlXstl2rdkW7tu6x7am9bW/L3bbu7vGc7dG63bO92O6uPe1p6xFEQBHkIjcDhDtEEcRAc7+RkHuEJPPc94/JKFYuCc8z82Rmvq//9Hgm35j5zOf3+80zz3gsy7IQQjguzu0BhIhWEi4hQkTCJUSISLiECBEJlxAhEvHhWr1qFQcPHHR7DCE+IeLDJcRwJeESIkQkXEKEiIRLiBCRcAkRIhIuIUJEwiVEiEi4hAiRBDd+qOFv4IUn/4P3lHi8N+Zy32NfYWFBDqbWzYZVa8lZ8A+kVm1j1ZZjXDBvYP6XvsY/zptCnMfjxrhCXBcXmsvC33iSvXXJPPytH3HvuA5++ewqOk0Lf8tJDh5q48Y0L0mjcvnKd3/Eo3em8dLPf09lv3zsTEQWF5rLpLO2AiNzKlOmTOLi+RxGHPgAA53mU8fRp93F2JGppGXNwzJ1ztal483Q8CVIa4nIEv5wmRc5c+Qk7U3x/PnXz1Bb0c7ff+37ZCqtvLGznnu+8wSpCR6wDLpqj/L7VW/z2a8vIyfJw769eznfcv5jD/f28TImTpwU9l9DiGsJc7gsrP4uTldc4FMPfIUC8wgnkqZy75wpfNBYSpk1gacmp4Gp0/z+Hn77mzWMue8JHpk/BQ+QMXLkJx4xLT09vL+CCCnTstjfrPGHepU+hx5z3e0peFzYr4e9ufo7mjl9YRRfXfQFbk/OZVfJr6lq6Sb9+NukT8lnjKeP93a9ynMv7GDmo9/l8YV5JHkC+62ioqJPPF5jY2O4fwURIrppUdqs8V8H6vnGpDjumj7B7ZFsCW+4LIuetnPoIyeSm5lEvDmOvHFJVNU0ktzwAYXzp6J11rBq9Tqqz2sYr7/AqV2TeXzJD7h3WnZYRxXhZVoW+85prKry80BCHdR/wOjZk90eyxZPpN/9afWqVUycOIm5d811exRxnXTTYl+zxsuVfpYWemk5UUpXZxeLHnnY7dFskTeRhatMy2LvOY3VlX6WFXrJG+nKW68hET2/iYg4ummxt1llTbXCskIfeSPjXTl4CBVpLuGKQGOpvFypsKzA+7FgJSYmkpSU5O6ADpDmEmEXaCyNV6oVll+msebNn+/idM6R5hJhZVoWe86prKkKHF5cbimoqip+v9+lCZ0j4RJho5sWbzVprK0eWApmJFx2j3Vg/362bt7iwoTOkmWhCAvTsihpUllbo7C80MutVwhWNJFwiZDTTYs95zTW1wQaKxaCBRIuEWKmZfFWkzoQLB+3Rtlx+9VIuETI6KZFyTmNV2sUlhZ4YypYIOESIWKaFrubVF6rCbxBPCVj8MG6bdYsdF0P8YShJ6eFwnF6MFi1CksKvUMKFkBPTw+dHR0hnDA8JFzCUYZpsbvxoz3WlY7br6aqspJTJ0+FaMLwkWWhcEzgfSyVDXWBPdZQGyvaSLiEIwzTYmejyut1A3usG2I7WCDhEg4INtbGOoWl+V4J1gAJl7Al2Fgb6wJ7rFscWAomJyeTkpLi0ITukXCJ6xY8FdxYp7Ak3+tIsADunBsdnyqXcInrYpgWOxpVNg3ssW5xcCnY19eHaZikpqU68nhukaN4MWT6wFLwjWBjObzHOnL4MDu2b3fs8dwizSWGxDAtdjSovFEfaKxcOby4IgmXGDTdtNjVGAjWknyvBOsaJFxiUAzTYnuDymZprEGTcIlrCu6xtkhjDYmES1yVYVq82aCytV5lWaGPyWEI1pw5czAMM6Q/IxzktFBckW4Ejtu3NigsLvCGJVgAra2tUfEdABIucVmGabGtQWVTvcqygqF9Hsuu2tpazpSXh+VnhZIsC8Un6IbFziaVbY0KS/LDsxSMRhIu8THBxtrWqLK80MekdAnW9ZJlofiQblhsb1TZ1qCwON8rwbJJmksAgeP2rQ0KbzZqrCjyMdHFYKWmpmKakX9aKOESgcZqUtneqLIk391gAcyeM8e1n+0kWRbGON202NKgsLU+sMdy6mMjdhw6eJDt2950dQYnSLhiWHCPtaNRZXG+1/XGCvL7/fT29ro9hm2yLIxRummxuV5hZ5PGikIfE4ZJsKKJNFcM0o3AJU07m1SW5HslWCEizRVjPtZYRT4mpEmwQkXCFUN086PGWlwwfIOVe8stKFHw5XcSrhihmxZv1CnsioDGGj9+vNsjOEL2XDEg0FgKu4J7rGEcLICKigpOnnjX7TFsk3BFOd202FSn8GaDxsoiH7nD4H2sa2lsaKCystLtMWyTcEUx3bTY1qCwu0ljcYGX8cO8saKN7LmilG5abKxVKDmnsbJIguUGaa4opJsWW+tVSs5JY7nJVrgsy8JQuzi2fit/7fGjKgp1ZSVs2/++U/OJIQo21o5GlZXFkXkzmYyMDDIzM90ewzaby0KDI5v+yPPP7yJ5zy4ykzz09evMWvQtZ6YTQ6KbFtsGGmtJgZdxqZEXLICZt93m9giOsBmuOIrueZCHTsZxwyMPMiU1jvikFLKyI/9VJ9LohsXrdQp7zmmsLI7cYAHsLy2lu6ub+x98wO1RbLEVLo8njtQbJ/GZb30JLTWd5DgAD3GR+TeNWIEPOgYaa2kEN1aQpmmoqur2GLbZPy20/FRsf5k/HDoLlkFHi87f/eCn/PN90x0YT1yLblhsqFXY26zx42IvN0d4sKKJ/XDFpTLrq/9C4WMGmBondmyg2qM4MJq4lsAHHVX2Ngf2WBKs4cWB5lJpOf02JxrbsSyTlr+2MGLGTAdGE1ejGRavX9JYORKsYceBN5FN+rvbaaqvpU+1yJk+j3l35tl/WHFFwT1WsLGiLVh5U6eiKJG/+nEgXElkTxxF88YtVJ/vpT1uNDPuMOw/rLgsbWCPVdqs8eNiHzmpcVEVLICxY8e6PYIj7F+hofewf1Up0/9pOb/41XMsGNnGoeMVDowm/pZuWmypV9nXrLGk0BuVwQIoLy+n7Phxt8ewzX64LJ3evniyskeSlpbOjek+DE1zYDRxKc2weK1GYXeTyk9mRPedcFuam6mrrXN7DNvsLwsTRzJ/US7PPfsT1uEh/sYCHv/mLQ6MJoIuPRVcVuhlbEp0Nla0sR8u00D3TWPpv8/Gf0Ehe9w40r2JDowm4KPG2t+i8dQMH2MkWBHD3oW7hkLtqVL++OxvqDCyuDUvlwxfEnHyx3dEYI+lUNqisbTQK8GKMENsLgvL1Ok+38Ch3Vt4q+QItX0p3HHfY9yVkxSaCWOUZli8WqNwYKCxRsdQsEZlZjJiRLLbY9g2pHBZpp8jG//Ei2u2cKyyl3u/sZhfPrqQMSPTSJALCh0TvP3Z/pbAV6XGUrAAioqK3B7BEYMOl97bQummNZS0jeHbz/wv36k/ypbNb/GfzxxhzNgivv7DRxk7Qj57adfHGmtmCqN9sRUsgD0lJXR1dfHQokVuj2LL4MOlmowsvp+n8nIZEe+B3HHk3/lZKt8r4+jBei6qFowI5ajR79LGWl7oi8lgQeBDuJZpuT2GbYMO14iMMRRncMkf20NCcjp5s+4mb1aIposhmmGxvkbhYAw3VrQZdLiu9IeWJ4B9ummxuSHQWCtiuLGijdz9yWWaYbGuRuHQeY1/m5nCTRKsqCHhcpFuWrxRr3CwRWVFkU+CNSA/Px9VjfxL6CRcLtEMi3XV/o8aKyXe7ZGGjeybbnJ7BEfI2bkLdGOgsc5rLC/yke2TP8Ol3jt1isOHDrs9hm3SXGH2YWO1SmNdSVtbG12dXW6PYZu8ZIaRZlhsrAscXiwvlMaKdtJcYaIZFmur/Rxu1fhXaayYIC+dYRBsrCOtgS/3lsa6Oo/HgycKrlWV5goxdWCPdaRV46kZ0liDcfc997g9giPkJTSEgo11tFVOBYfCMAwMI/JvciR/7RBRB/ZYpc0qP52Rwvi0BHmDeJD27d3Lxg2vuz2GbRKuEAjesPNoq84KaayYJXsuhwX3WEdbdX4yw8do2WPFLHlJdVDwhp3HWnWWD1wrKGKXNJdDgnus422BxpJTQSHhcoBqWLxWEwiWXHlhX1FxMXoU3FhWwmXTpY3142LZYzlBUZSo+CIGeYm1QTUsXq31U9aqs6JQ9lhOOXvmDO+Uve32GLZJc12njzWWnAqKy5BwXQfVMHm1RqGsTRpLXJmEa4hUw+KVKoWydtljiauTcA2BYli8Wq3wTrvOSnkfK2QSExNJSor826NLuAYpuMd6u03jyeIUaawQmjd/vtsjOEJeegdBMUzWVSucaNdZUZQijRViqqri9/vdHsM2eZZcg2pYrK1SKWsL3LBzbJR9ufdwdGD/frZu3uL2GLbJsvAqFN1kXY3KiXYt0Fgp8lokBk/CdQWqbvFKdSBYK4t8jE6VPZYYGgnXZfj1wB7rZIfOimI5FRTXR8L1N1TdYm21yrvtgWDJqaC4XhKuS/h1k7XVCic7DGksF902axa6rrs9hm3y7BkQaKzAcfvyIi+jU+RU0C09PT10dnS4PYZtEi4Cp4IvV/k51amzUhrLdVWVlZw6ecrtMWyL+WdR4FRQ4WSnPvDl3tJYwhkxvefy6yZrqhROdwauFZRPEAsnxWy4lIHGOtU58LERORUUDovJcPl1k5erFN7vCuyxsr3SWMNJcnIyKSkpbo9hW8yFK9hYpzt1lhX5uMknjTXc3Dl3rtsjOCKmwuXXTVZXKZwZaKwsaaxhqa+vD9MwSU1LdXsUW2Lm2RX8BPH7nTpLC31k++RUcLg6cvgwO7Zvd3sM22Kiufy6yepKhbPd0lgifKL+WaYaFmuqA4cXSwq90lgibKK6ufy6yUuVChXdOk8W+8iUxhJhFLXPtmBjne3SWVLgJUsaS4RZVDZXv2ayqmqgsWb4GJUcta8hUWnOnDkYhun2GLZF3bNO0U1eqQ4cXiwp9JHplcaKNK2trTQ2Nro9hm1RFa5+zeTFCj9nBvZYcnV7ZKqtreVMebnbY9gWNc++YGNVdBssLpDGEu6Lij2XXzf5S4Wf6h6DJ2f4uFH2WGIYiIpwra9VSB1hsLTQxyivXCsohgePZVmW20PYsW3rVl54aR0ZKV7SEj0gK8GI19baiqpq5Nyc4+jjPv+73zn6eNcS8eES0afkrbfo6uxi0SMPuz2KLbI5ESJEJFxChIiES4gQkXAJESJRcRQvokt6errbIzhCTguFCBFZFgoRIrIsFC4y6a4o5YW1pWiGxdj8T/OFz91BdmoiRns563d28tkHp3H8tbWU1bTjG13AA4s+z6RRXiLhslFpLuEes58zu16n7MJNzL/ndiq3vMAfN5/EMBUq9mzgYJdFktFDf+ok5t19FxfeWccvV+/FMCNjJyPhEq6x1AucOdPGtLkLmD//borG+2ht68bs7+RAaQcLFkwnJX0yX3zo88xfMI+pOemomhExl7hJuIRrlO5W3m3uoPv0Hv7y/C/Y3TiK+z9TzMVzZ3k3KYc7c9PxAJbup+7Qet74azpfvv924iVcQlzdBx0NnO9PY/wN/Rx/8wDj73+cBVMzqX/vDCNvziMrKR4weL9kNT/77R7u//73uGvKqIj5nJ4caAjXdNTVYI6fyzef+DZNWT38/Eg5H9w3jrITZ5m48PNY/W3s2/hn/mdbK1/63mLuzc+OqDaIpFlFVDFoqG4ga+IteBNGMLFoBv7KMuoqT1Fen8bMvDE0HtvMcz//C+d7mtn54m/41f9tpqXXcHvwQZM3kSOA6e/haOk+zPGzmXPraBIiY1V0DRZKXy+aJ4mU5EQwNS5cVPH6EvH7DXwpXiytn4u9foL3gYpPSCY11Ut8XGT8D5BwRQLL5EJdKf/92yM8sPyHzBztjZQDs5gmy8JI4IkjdcJs5tx8nj+tLuGCGjlLo1gm4YoQHk8iaelQumkj5S0X3R5HDIKEKyJYGN0VHDgMc8b1sGH3aVRr4N+rfvoVDVnbDz8Srkhg6dQf20NFzqf45sOzqdqzj4ZeA9BpOraJF/edlXANQxKuCKD3trNtyzEmFeVz26fvY3piOavX7aW1z+CGCUUsmD6WvpZq3n33HQ6XlnKysgVNzqlcF//0008/7fYQ4upMwyAuJZvbZhWQlXkTeVNyMLR4JkzMpmXPy7zZnkFWzUaeXV9OVlov+zaXMfZTs8mS73t2lVyhEQESvBnMXrjww38eO+0OvjgNQKX1o/+K/IWf48uLcllf9wz1nQrTRyWFf1jxIVkWRo04vMlJxHk8xMlfdViQ5opoHlJHT2ZS0g2kqpOZlJQGJDA6dypeWRK6Tq7QECJEZAEhRIj8Py/uxs4QSd6AAAAAAElFTkSuQmCC" alt="image-20211024120340151"></p> <ul><li>当发送速率在 0 ~ R/2 之间时，接收方的吞吐量等于发送方的发送速率；</li> <li>当超过 R/2 时，它的吞吐量只能达到 R/2。无论发送速率有多高，都无法超过 R/2</li></ul> <p>时延：<img src="data:image/png;base64,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" alt="image-20211024120705229"></p> <ul><li>当发送速率接近 R/2 时，平均时延越来越大；</li> <li>超过 R/2 时，路由器中的平均排队分组数就会无线增长，平均时延会变得无穷大。</li></ul> <p>因此，虽然从吞吐量角度看，运行在总吞吐量接近 R 的状态也许理想，但从时延的角度看，却远不是理想状态。</p> <p>我们发现了拥塞网络的一种<strong>代价</strong>：<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle style="color:blue;"><mjx-mo class="mjx-n"><mjx-utext variant="normal" style="font-family:serif;">当</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">分</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">组</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">的</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">到</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">达</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">速</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">率</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">接</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">近</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">链</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">路</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">容</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">量</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">时</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">，</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">分</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">组</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">经</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">历</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">巨</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">大</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">的</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">排</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">队</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">时</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">延</mjx-utext></mjx-mo></mjx-mstyle></mjx-math></mjx-container>。</p> <p><strong>（2）情况 2：两个发送方和一台具有有限缓存的路由器</strong></p> <ul><li>假定路由器缓存有限，因此当分组到达一个已满的缓存时会被丢弃；</li> <li>假定每条连接都是可靠的，因此被路由器丢弃的分组终将被重传；</li> <li><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="3BB"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container>表示应用程序发送的初始数据量，<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msubsup><mjx-mi noIC="true" class="mjx-i"><mjx-c c="3BB"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.284em;"><mjx-TeXAtom size="s"><mjx-msup><mjx-mi class="mjx-n"></mjx-mi><mjx-script style="vertical-align:0.363em;"><mjx-mo size="s" class="mjx-n"><mjx-c c="2032"></mjx-c></mjx-mo></mjx-script></mjx-msup></mjx-TeXAtom><mjx-spacer style="margin-top:0.18em;"></mjx-spacer><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msubsup></mjx-math></mjx-container>表示运输层向网络中发送的报文段（含初始数据和重传数据）速率。</li></ul> <p><img src="/notebook/assets/img/image-20211024122822617.d6b9fe49.png" alt="image-20211024122822617"></p> <p><strong>情况 2.a</strong>：<em>主机 A 能够确定路由器中的缓存是否空闲，因而空闲时才发送一个分组</em>。这种情况下不会产生丢包，<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="3BB"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-msubsup space="4"><mjx-mi noIC="true" class="mjx-i"><mjx-c c="3BB"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.284em;"><mjx-TeXAtom size="s"><mjx-msup><mjx-mi class="mjx-n"></mjx-mi><mjx-script style="vertical-align:0.363em;"><mjx-mo size="s" class="mjx-n"><mjx-c c="2032"></mjx-c></mjx-mo></mjx-script></mjx-msup></mjx-TeXAtom><mjx-spacer style="margin-top:0.18em;"></mjx-spacer><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msubsup><mjx-mo space="4" class="mjx-n"><mjx-c c="="></mjx-c></mjx-mo><mjx-msub space="4"><mjx-mi noIC="true" class="mjx-i"><mjx-c c="3BB"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="o"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="u"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container>。</p> <p><strong>情况 2.b</strong>：<em>发送方仅当确定了一个分组已经丢失时才重传</em>。当 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="3BB"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> 等于 R/2 时，被交付给接收方应用程序的速率 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="3BB"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="o"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="u"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> 是 R/3，如下图。在此看到了另一种网络拥塞的<strong>代价</strong>：<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle style="color:blue;"><mjx-mo class="mjx-n"><mjx-utext variant="normal" style="font-family:serif;">发</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">送</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">方</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">必</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">须</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">执</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">行</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">重</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">传</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">以</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">补</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">偿</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">因</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">为</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">缓</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">存</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">溢</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">出</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">而</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">丢</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">弃</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">的</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">分</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">组</mjx-utext></mjx-mo></mjx-mstyle></mjx-math></mjx-container>。</p> <p><img src="data:image/png;base64,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" alt="image-20211024124053726"></p> <p><strong>情况 2.c</strong>：<em>发送方也许会提前发生超时并重传在队列中已被推迟但还未丢失的分组</em>。这样初始分组和重传分组都可能到达接收方，重传分组被接收方丢弃，使得路由器转发重传分组做了无用功。假设每个分组被路由器转发两次，情况如下图。这里看到了网络拥塞的另一种<strong>代价</strong>：<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle style="color:blue;"><mjx-mo class="mjx-n"><mjx-utext variant="normal" style="font-family:serif;">发</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">送</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">方</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">在</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">遇</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">到</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">大</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">时</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">延</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">时</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">所</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">进</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">行</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">的</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">不</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">必</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">要</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">重</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">传</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">会</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">引</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">起</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">路</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">由</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">器</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">利</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">用</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">其</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">链</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">路</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">带</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">宽</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">来</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">转</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">发</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">不</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">必</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">要</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">的</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">分</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">组</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">副</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">本</mjx-utext></mjx-mo></mjx-mstyle></mjx-math></mjx-container>。</p> <p><img src="data:image/png;base64,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" alt="image-20211024124103879"></p> <p><strong>（3）情况 3：4个发送方和具有有限缓存的多台路由器及多跳路径</strong></p> <ul><li>4 台主机发送分组，每台都要经过交叠的两跳路径传输</li> <li>都采用超时重传机制</li> <li>所有主机有相同的 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="3BB"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> 值，所有路由器的链路容量都是 R 字节/秒</li></ul> <p><img src="/notebook/assets/img/image-20211024131058541.fb3c5fd3.png" alt="image-20211024131058541"></p> <p>当 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="3BB"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> 较小时，路由器缓存溢出很少见，<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="3BB"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> 增大则 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="3BB"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="o"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="u"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> 增大；当 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-msub><mjx-mi noIC="true" class="mjx-i"><mjx-c c="3BB"></mjx-c></mjx-mi><mjx-script style="vertical-align:-0.15em;"><mjx-TeXAtom size="s"><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-script></mjx-msub></mjx-math></mjx-container> 很大时，A-C 流量与 B-D 流量竞争 R2 的有限缓存空间，当 B-D 供给载荷越来越大时，A-C 连接上成功通过 R2 的流量越来越小，极限下会趋于 0。当 A 发出的分组经过了 R1 却被 R2 丢弃时，R1 为此所做的工作就是“劳而无获”的。所以，我们又看到了由于拥塞而丢弃分组的另一个<strong>代价</strong>：<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle style="color:blue;"><mjx-mo class="mjx-n"><mjx-utext variant="normal" style="font-family:serif;">当</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">一</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">个</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">分</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">组</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">沿</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">一</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">条</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">路</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">径</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">被</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">丢</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">弃</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">时</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">，</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">每</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">个</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">上</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">游</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">路</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">由</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">器</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">用</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">于</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">转</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">发</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">该</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">分</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">组</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">到</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">丢</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">弃</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">该</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">分</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">组</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">而</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">使</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">用</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">的</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">传</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">输</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">容</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">量</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">最</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">终</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">被</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">浪</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">费</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">掉</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">了</mjx-utext></mjx-mo></mjx-mstyle></mjx-math></mjx-container>。</p> <h4 id="_5-7-2-拥塞控制方法"><a href="#_5-7-2-拥塞控制方法" class="header-anchor">#</a> <strong>5.7.2 拥塞控制方法</strong> <span class="badge tip" style="vertical-align:top;" data-v-d5affa18>非重点</span></h4> <p>这里讨论实践中所采用的两种主要拥塞控制方法。</p> <p>根据网络层是否为传输层拥塞控制提供了显式帮助来分类：</p> <ul><li><strong>端到端拥塞控制</strong>：网络层没有提供显式支持。即使网络存在拥塞，端系统也必须通过对网络行为的观察（如分组丢失与时延）来推断之。TCP 采用这种方法。</li> <li><strong>网络辅助的拥塞控制</strong>：路由器向发送方提供关于网络中拥塞状态的显式反馈信息。这种反馈可以简单地用一个比特来指示链路中的拥塞情况。最近 IP 和 TCP 也能够选择性地实现网络辅助拥塞控制。通常由两种实现方式：
<ul><li>阻塞分组形式。直接反馈信息可以由网络路由器发给发送方。</li> <li>路由器标记或更新从发送方流向接收方的分组中的某个字段来指示拥塞的产生。</li></ul></li></ul> <h3 id="_5-8-tcp-拥塞控制"><a href="#_5-8-tcp-拥塞控制" class="header-anchor">#</a> 5.8 TCP 拥塞控制</h3> <p>由于 IP 层不向端系统提供显式的网络拥塞反馈，TCP 必须使用端到端拥塞控制。TCP 所采用的的方法是让每一个发送方根据所感知到的网络拥塞程度来限制其能向连接发送流量的速率。</p> <p><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle style="color:blue;"><mjx-mi class="mjx-i"><mjx-c c="P"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="r"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="o"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="b"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="l"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn><mjx-mo space="4" class="mjx-n"><mjx-utext variant="normal" style="font-family:serif;">：</mjx-utext></mjx-mo><mjx-mi space="4" class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="C"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="P"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-utext variant="normal" style="font-family:serif;">发</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">送</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">方</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">如</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">何</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">限</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">制</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">发</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">送</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">流</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">量</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">的</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">？</mjx-utext></mjx-mo></mjx-mstyle></mjx-math></mjx-container></p> <p>发送方跟踪一个<strong>拥塞窗口</strong>（<code>cwnd</code>）变量。在一个发送方中未被确认的数据量不会超过 cwnd 与 rwnd 的最小值。即 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="L"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="B"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="y"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="S"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mo space="3" class="mjx-n"><mjx-c c="2212"></mjx-c></mjx-mo><mjx-mi space="3" class="mjx-i"><mjx-c c="L"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="s"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="B"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="y"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="t"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="A"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="c"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="k"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-c c="2264"></mjx-c></mjx-mo><mjx-mi space="4" class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="i"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-TeXAtom><mjx-mi class="mjx-i"><mjx-c c="c"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c=","></mjx-c></mjx-mo><mjx-mi space="2" class="mjx-i"><mjx-c c="r"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="w"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi></mjx-TeXAtom></mjx-math></mjx-container>。</p> <blockquote><ul><li>cwnd：拥塞窗口</li> <li>rwnd：接收窗口</li></ul> <p>后面的讨论假设 rwnd 足够大，未被确认的数据量仅受限于 cwnd。</p></blockquote> <p>通过约束发送方中未被确认的数据量，间接的限制了发送方的发送速率。发送方的发送速率大概是 <code>rate = cwnd/RTT byte/s</code>。通过调节 cwnd 的值，发送方因此能调整它向链接发送数据的速率。</p> <p><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle style="color:blue;"><mjx-mi class="mjx-i"><mjx-c c="P"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="r"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="o"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="b"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="l"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn><mjx-mo space="4" class="mjx-n"><mjx-utext variant="normal" style="font-family:serif;">：</mjx-utext></mjx-mo><mjx-mi space="4" class="mjx-i"><mjx-c c="T"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="C"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="P"></mjx-c></mjx-mi><mjx-mo space="4" class="mjx-n"><mjx-utext variant="normal" style="font-family:serif;">发</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">送</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">方</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">是</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">如</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">何</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">感</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">知</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">在</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">它</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">和</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">目</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">的</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">地</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">之</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">间</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">的</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">路</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">径</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">上</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">出</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">现</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">了</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">拥</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">塞</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">的</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">？</mjx-utext></mjx-mo></mjx-mstyle></mjx-math></mjx-container></p> <p>我们将发送方的“丢包事件”定义为：要么出现超时，要么收到来自接收方的 3 个冗余 ACK。发生的丢包事件被当做出现了拥塞的指示。</p> <p><mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mstyle style="color:blue;"><mjx-mi class="mjx-i"><mjx-c c="P"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="r"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="o"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="b"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="l"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="e"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="m"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c c="3"></mjx-c></mjx-mn><mjx-mo space="4" class="mjx-n"><mjx-utext variant="normal" style="font-family:serif;">：</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">当</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">发</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">送</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">方</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">感</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">知</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">到</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">端</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">到</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">端</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">的</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">拥</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">塞</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">后</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">，</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">采</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">用</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">何</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">种</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">算</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">法</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">来</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">改</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">变</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">其</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">发</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">送</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">速</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">率</mjx-utext><mjx-utext variant="normal" style="font-family:serif;">？</mjx-utext></mjx-mo></mjx-mstyle></mjx-math></mjx-container></p> <p>TCP 使用下列指导性原则来回答问题：</p> <ul><li>一个丢失的报文意味着拥塞，因此当丢失报文段时应当降低 TCP 发送方的速率；</li> <li>一个确认报文段指示该网络正在向接收方交付发送方的报文段，因此，当对先前未确认报文段的确认到达时，能够增加发送方的速率。</li></ul> <p>下面开始介绍 <strong>TCP 拥塞控制算法</strong>，包括三个主要部分：① 慢启动 ② 拥塞避免 ③ 快速恢复。①② 是强制部分，③ 是推荐部分。</p> <h4 id="_1-慢启动-ss"><a href="#_1-慢启动-ss" class="header-anchor">#</a> <strong>（1）慢启动 SS</strong></h4> <ul><li><strong>初始</strong>：给cwnd起始设置为 1MSS（最大报文段长度）的较小值，使得初始速率为 MSS/RTT；</li> <li><strong>传输</strong>：之后每次 sender 确认一个 seg 后，把 cwnd 增加一个 MSS；
<ul><li>第二次,sender发出两个seg,因此会有两个ACK,sender对cwnd加两个MSS,下次同时发出四个seg...依次类推达到cwnd每次翻倍的效果</li></ul></li> <li><strong>结束</strong>：何时结束这种指数增长呢？有三种结束慢启动增长 cwnd 的方式：
<ol><li>当发生超时时，发送方将 cwnd 置为 1 并重新开始慢启动，同时置 ssthresh 为 loss 发生前的 cwnd 的一半。</li> <li>当 cwnd == ssthresh（慢启动阈值）时，结束慢启动并且 TCP 转移到拥塞避免模式。</li> <li>如果检测到 3 个冗余的 ACK，这时 TCP 执行一种快速重传并进入快速恢复状态。</li></ol></li></ul> <h4 id="_2-拥塞避免"><a href="#_2-拥塞避免" class="header-anchor">#</a> <strong>（2）拥塞避免</strong></h4> <p>一旦进入拥塞避免状态，cwnd 的值大约是上次遇到阻塞时的值的一半。这时每个 RTT 只将 cwnd 的值增加一个 MSS。何时应当结束拥塞避免的线性增长呢？：</p> <ol><li>当出现超时时，<u>sshresh = cwnd/2，cwnd = 1</u>；</li> <li>当出现 3 个冗余 ACK 时，说明网络情况还可以，相比于超时指示的丢包应当没那么剧烈：将 ssthresh 置为 cwnd 的一半，将 cwnd 减半，再加上 3 个冗余ACK要加的 3 个MSS，接下来进入快速恢复阶段。综合下来就是 <u>ssthresh = cwnd/2，cwnd = cwnd/2 + 3</u>。</li></ol> <h4 id="_3-快速恢复"><a href="#_3-快速恢复" class="header-anchor">#</a> <strong>（3）快速恢复</strong></h4> <p>在快速恢复中，对于引起 TCP 进入快速恢复状态的确实报文段，对收到的每个冗余的 ACK，cwnd 值增加一个 MSS。最终，当对丢失报文段的一个 ACK 到达时，TCP 在降低 cwnd 后进入拥塞避免状态。</p> <p>快速恢复非必需构件，在早期 TCP Tahoe 版本中，所有丢包事件都是无条件将 cwnd 减至 1 个MSS并进入慢启动阶段。较新的 TCP Reno 版本则综合了快速恢复。</p> <div class="custom-block tip"><p class="custom-block-title">理解好这张图</p> <p><img src="/notebook/assets/img/image-20211024151526313.31a978a9.png" alt="image-20211024151526313"></p> <p>以 TCP Reno 为例，一开始处在慢启动阶段，cwnd = 1，之后每次 cwnd 翻倍，直到达到 ssthresh 进入拥塞避免阶段，开始呈线性增长，在产生 3  个冗余 ACK 事件后进入快速恢复阶段，ssthresh = cwnd/2 = 12/2 = 6，cwnd = cwnd/2 + 3 = 9， 降低了 cwnd 后再次进入拥塞避免状态。</p> <p>而对于 TCP Tahoe 版本来说，没有快速恢复阶段，而是直接将 ssthresh = cwnd/2 = 6，将 cwnd 置为 1 并进入慢启动阶段。</p></div> <h4 id="tcp-拥塞控制-回顾"><a href="#tcp-拥塞控制-回顾" class="header-anchor">#</a> <strong>TCP 拥塞控制 回顾：</strong></h4> <p>忽略初始的慢启动阶段和超时引起的丢包，TCP 的拥塞控制可以概括为：</p> <ul><li><strong>加性增</strong>：拥塞避免阶段每个 RTT 使 cwnd + 1；</li> <li><strong>减性乘</strong>：3 个冗余 ACK 使得 cwnd 减半</li></ul> <p>即 <strong>AIMD</strong>：</p> <p><img src="/notebook/assets/img/image-20211024154920023.d6165ede.png" alt="image-20211024154920023"></p> <div class="custom-block tip"><p class="custom-block-title">例题</p> <p>要能够解释这张图：</p> <p><img src="/notebook/assets/img/image-20211024154954336.8e8baa1e.png" alt="image-20211024154954336"></p></div> <div class="custom-block tip"><p class="custom-block-title">例题</p> <p>一个TCP连接总是以1 KB的最大段长发送TCP段，发送方有足够多的数据要发 送。当拥塞窗口为16 KB时发生了超时，如果接下来的4个RTT（往返时间）时 间内的TCP段的传输都是成功的，那么当第4个RTT时间内发送的所有TCP段 都得到肯定应答时，拥塞窗口大小是多少？</p> <p><strong>解</strong>：threshold=16/2=8 KB, CongWin=1 KB, 1个RTT后， CongWin=2 KB ，2 个RTT后， CongWin=4 KB ，3个RTT后， CongWin=8 KB ，Slowstart is  over; 4个RTT后， CongWin=9 KB</p></div></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/yubincloud/notebook/edit/master/docs/计算机网络/1.自顶向下方法/03.传输层.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/notebook/tags/?tag=%E8%AE%A1%E7%BD%91" title="标签">#计网</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/10/24, 13:50:21</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/notebook/pages/e36560/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">应用层</div></a> <a href="/notebook/pages/02d821/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">网络层（数据平面）</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/notebook/pages/e36560/" class="prev">应用层</a></span> <span class="next"><a href="/notebook/pages/02d821/">网络层（数据平面）</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/notebook/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/notebook/pages/ml/lhy/drl17/"><div>
            Deep Reinforcement Learning
            <!----></div></a> <span class="date">10-03</span></dt></dl><dl><dd>02</dd> <dt><a href="/notebook/pages/mysql/geektime/misdeletion/"><div>
            误删数据后怎么办
            <!----></div></a> <span class="date">04-06</span></dt></dl><dl><dd>03</dd> <dt><a href="/notebook/pages/mysql/geektime/multi-slaves/"><div>
            MySQL 一主多从
            <!----></div></a> <span class="date">03-22</span></dt></dl> <dl><dd></dd> <dt><a href="/notebook/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="yubin_inbuy@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/yubincloud" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2024
    <span>yubincloud | <a href="https://github.com/yubincloud/notebook/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">×</span> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/notebook/assets/js/app.2bf3b6c1.js" defer></script><script src="/notebook/assets/js/2.0ad58009.js" defer></script><script src="/notebook/assets/js/3.a80649d1.js" defer></script><script src="/notebook/assets/js/25.b12f24fe.js" defer></script>
  </body>
</html>
