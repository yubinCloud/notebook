---
title: 程序设计语言及其文法
date: 2021-12-29 19:40:43
permalink: /pages/e74e74/
categories:
  - 编译原理
tags:
  - cs
---
## 2.1 基本概念

### 1）字母表

**字母表**$\Sigma$是一个有穷符号集合，如$\{0, 1\}$

字母表$\Sigma$上的运算：
+ **乘积**：$\Sigma_1 \Sigma_2 = \{ab|a \in \Sigma_1, b \in \Sigma_2 \}$
+ **n次幂**：$\Sigma^0=\{\epsilon\}; \Sigma^n=\Sigma^{n-1}\Sigma, n\ge1$
  + 表示长度为n的符号串构成的集合
+ **正闭包**：$\Sigma^+ = \Sigma \cup \Sigma^2 \cup \Sigma^3 \cup ...$
  + 长度正数的符号串构成的集合
+ **克林闭包**：$\Sigma^* = \Sigma^0 \cup \Sigma^+ = \Sigma^0 \cup \Sigma \cup \Sigma^2 \cup \Sigma^3 \cup ...$
  + 任意符号串（长度可以为零）

### 2）串

**串**是字母表中符号的一个<u>有穷</u>序列。**长度**指符号的个数，记为$|s|$。**空串**是长度为0的串，记为$\epsilon$.

串的运算：
+ **连接**：x 与 y 的连接是 xy。
  + 空串是连接运算的单位元，即 $\epsilon s = s$
  + 如果 $z=xy$，那么 x 是 z 的**前缀**，y 是 z 的**后缀**
+ **幂**：$s^0 = \epsilon; s^n = s^{n-1}s, n\ge1$
  + $s^n$ 将 n 个 s 连接起来

## 2.2 文法的定义

> 举例：<句子> → <名词><动词>，<名词> → boy，<动词> → eat，这其中没有用<>括起来的是语言的**基本符号**，括起来的是**语法成分**。

### 1）**文法**

文法：$G = (V_T, V_N, P, S)$

+ $V_T$：终结符集合。**终结符**是语言的**基本符号**，也称为 token。比如 {apple, boy, eat}
+ $V_N$：非终结符集合。**非终结符**是用来表示语法成分的符号，也称为**语法变量**，比如 {<句子>，<名词>，<动词>}
+ $P$：产生式集合。**产生式**描述了符号组成串的方法，形式为 $\alpha → \beta$，读作 $\alpha$ 定义 $\beta$。
  + $\alpha$：称为产生式的头部或左边，非空且至少含有一个$V_N$的元素。
  + $\beta$：称为产生式的体或右部，可以是任意符号串。
+ $S$：**开始符号**，表示该文法中最大的<u>语法成分</u>，比如 S = <句子>。

::: tip 文法助记

他能PS $(V_T, V_N, P, S)$

:::

::: details 文法举例

G =( { id, +, *, (, ) }, {E}, P, E )，其中 P ={ E → E + E , E → E * E , E → ( E ) , E → id }

约定：在不引起歧义的前提下，可以只写产生式。上式可以简化为：

G : E → E + E E → E * E E → ( E ) E → id

:::

### 2）产生式的简写

有<u>相同左部</u>的可以合并为：$\alpha → \beta_1 | \beta_2 | ...$，其中 $\beta_i$称为$\alpha$的**候选式**。

一些约定：

|       含义 | 表示                    |
| ---------: | ----------------------- |
|     终结符 | a，b，c                 |
|   非终结符 | A，B，C                 |
|   文法符号 | X，Y，Z                 |
| 终结符号串 | u，v，...，z            |
| 文法符号串 | $\alpha，\beta，\gamma$ |

## 2.3 语言的定义

### 1）推导和归约

![image-20211229205652193](https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20211229205652193.png)

+ 推导——从生成语言的角度
+ 归约——从识别语言的角度

如果有 α→β ∈ P，那么便可以 γαδ => γβδ，此时称文法中的符号串 γαδ **直接推导**出 γβδ。

$a_0 =>^n a_n$ 表示 $a_0$ **经过 n 步推导**出 $a_n$。$=>^+$ 表示经过正数步推导，$=>^*$ 表示经过若干（可以是0）步推导。

### 2）句型和句子

如果$S =>^* a，a \in (V_T \cup V_N)^*$，则称 $a$ 是 G 的一个**句型**。句型既可以包含终结符，也可以包含非终结符，还可以包含空字符，如 `<句子> => boy <动词>`。

如果$S =>^* w, w \in {V_T}^*$，则称 $w$ 是 G 的一个**句子**。句子是<u>不包含非终结符</u>的句型，如 `<句子> => boy eat`。

由文法G的开始符号S推导出的所有句子构成的集合称为**文法 G 生成的语言**，记为$L(G) = \{w | S =>^* w,w \in {V_T}^*\}$。

## 2.4 文法的分类

乔姆斯基文法分类体系：0、1、2、3 型文法

### 0 型文法

$\alpha → \beta$ ，也称**无限制文法**或**短语结构文法**（Phase Structure Grammar，**PSG**）。

+ $\forall \alpha \to \beta \in P$，$\alpha$中至少包含一个非终结符
+ **0 型语言**：由0型文法 G 生成的语言

### 1 型文法

$\alpha → \beta$，也称**上下文有关文法**(Context-Sensitive Grammar , **CSG** )。

+ $\forall \alpha \to \beta \in P，|\alpha| \le |\beta|$
+ 产生式一般形式：$\alpha_1 A \alpha_2 \to \alpha_1 \beta \alpha_2（\beta \ne \epsilon）$
+ **上下文有关语言**（1型语言）：由1型文法 G 生成的语言
+ CSG 中不包含 $\epsilon-产生式$

### 2 型文法

$\alpha → \beta$，也称**上下文无关文法** (Context-Free Grammar, **CFG** )。

+ $\forall \alpha \to \beta \in P，\alpha \in V_N$
+ 产生式一般形式：$A \to \beta$

+ **上下文无关语言**（2型语言）：由2型文法 G 生成的语言

### 3 型文法

$\alpha → \beta$，也称**正则文法** (Regular Grammar, **RG** )。

+ 又分为
  + **右线性文法**：$A \to wB 或 A \to w$
  + **左线性文法**：$A \to Bw 或 A \to w$

+ **正则语言**（3型语言）：由3型文法 G 生成的语言。
  + 正则文法能描述程序设计语言的多数单词

### 四种文法的关系

![image-20211230102832138](https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20211230102832138.png)

## 2.5 CFG的分析树

### 1）CFG分析树

![image-20211230103013216](https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20211230103013216.png)

+ 根节点的标号是文法开始符号
+ 内部节点表示一个产生式的应用该结点的标号是此产生式左部 A 。该结点的子结点的标号从左到右构成了产生式的右部 β
+ 叶结点的标号既可以是非终结符，也可以是终结符。从左到右排列叶节点得到的符号串称为是这棵树的**产出**( yield )或**边缘**(frontier)

+ 每一棵子树的边缘称为该句型的一个**短语**(phrase)，如果子树只有父子两代结点，那么这棵子树的边缘称为该句型的一个**直接短语**(immediate phrase) 
  + 直接短语一定是某产生式的右部，但产生式的右部不一定是给定句型的直接短语

::: details 举例

![image-20211230103819808](https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20211230103819808.png)

:::

### 2）二义性文法

如果一个文法可以为某个句子生成<u>多棵分析树</u>， 则称这个文法是**二义性**的。

对于任意一个上下文无关文法，**不存在**一个算法， 判定它是无二义性的；但能给出一组<u>充分条件</u>， 满足这组充分条件的文法是无二义性的。