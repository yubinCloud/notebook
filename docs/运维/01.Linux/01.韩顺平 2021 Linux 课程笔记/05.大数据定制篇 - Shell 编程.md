---
title: 大数据定制篇 - Shell 编程
date: 2022-02-15 20:06:38
permalink: /pages/a79791/
categories:
  - 运维
  - Linux
  - 韩顺平 2021 Linux 课程笔记
tags:
  - 
---

## 1. Shell 概述

### 1.1 为什么要学习 Shell 编程

- Linux 运维工程师在进行服务器集群管理时，需要编写 Shell 程序来进行服务器管理。
- 对于 JavaEE 和 Python 程序员来说，工作的需要，会要求你编写一些 Shell 脚本进行程序或者是服务器的维护，比如编写一个定时备份数据库的脚本。
- 对于大数据程序员来说，需要编写 Shell 程序来管理集群。

### 1.2 shell 是什么

Shell 是一个**命令行解释器**，它为用户提供了一个向 Linux 内核发送请求以便运行程序的界面系统级程序，用户可以用 Shell 来启动、挂起、停止甚至是编写一些程序。

## 2. Shell 脚本的执行方式

### 2.1 脚本格式要求

脚本以 `#!/bin/bash` 开头，需要有可执行权限。

### 2.2 编写第一个 shell 脚本

需求：创建一个 shell 脚本，输出 hello world！

```
vim hello.sh
#!/bin/bash
echo "hello,world~"
```

### 2.3 脚本的常用执行方式

#### :pen: 方式一：输入脚本的绝对路径或相对路径

说明：首先要赋予脚本 `+x` 的权限，再执行脚本

#### :pen: 方式二：sh + 脚本

说明：不用赋予脚本` +x` 权限，直接执行即可

比如 `sh hello.sh` 

## 3. shell 的变量

### 3.1 Shell 变量介绍

- Shell 变量分为**系统变量**和**用户自定义变量**。
- **系统变量**：`$HOME、$PWD、$SHELL、$USER` 等等，比如：`echo $HOME` 等等。
- 显示 shell 所有系统变量：**set 指令**

### 3.2 Shell 变量定义

#### 基本语法：

+ 定义变量：`变量名=值`
  + <u>注意在 shell 编程中，这种**等号的两边不要打空格**。</u>
+ 撤销变量：`unset 变量`
+ 声明静态变量：`readonly 变量`，注意不能 unset

#### 快速入门：

```shell
#!/bin/bash

# 案例 1：定义变量 A
A=100
# 输出变量需要加上 $
echo A=$A
echo "A=$A"
# 案例 2：撤销变量 A
unset A
echo "A=$A"
# 案例 3：声明静态的变量 B=2，不能撤销
readonly B=2
echo "B=$B"
# 此时如果 unset B，执行时会报错
```

### 3.3 shell 变量的定义

#### 定义变量的规则：

+ 变量名称可以由字母、数字和下划线组成，但是不能以数字开头。
+ **等号两侧不能有空格**
+ 变量名称**一般习惯为大写**，这是一个规范，遵守即可

#### 将命令的返回值赋给变量：

+ A=\`date\`，**通过反引号**，运行里面的命令，并把结果返回给变量 A
+ `A=$(date)` 等价于反引号

